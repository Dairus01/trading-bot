var Y0=Object.defineProperty;var Z0=(r,e,t)=>e in r?Y0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var kt=(r,e,t)=>Z0(r,typeof e!="symbol"?e+"":e,t);import{g as nr,c as Qt,a as As,r as re,R as J,b as J0}from"./react-C2nHe5Yl.js";import{b as X0}from"./cryptoLib-D3cA6VP7.js";var fe={},Go={};Go.byteLength=tp;Go.toByteArray=rp;Go.fromByteArray=op;var Mn=[],wn=[],Q0=typeof Uint8Array<"u"?Uint8Array:Array,Ka="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ti=0,ep=Ka.length;ti<ep;++ti)Mn[ti]=Ka[ti],wn[Ka.charCodeAt(ti)]=ti;wn[45]=62;wn[95]=63;function Cd(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function tp(r){var e=Cd(r),t=e[0],n=e[1];return(t+n)*3/4-n}function np(r,e,t){return(e+t)*3/4-t}function rp(r){var e,t=Cd(r),n=t[0],s=t[1],i=new Q0(np(r,n,s)),o=0,a=s>0?n-4:n,c;for(c=0;c<a;c+=4)e=wn[r.charCodeAt(c)]<<18|wn[r.charCodeAt(c+1)]<<12|wn[r.charCodeAt(c+2)]<<6|wn[r.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=wn[r.charCodeAt(c)]<<2|wn[r.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=wn[r.charCodeAt(c)]<<10|wn[r.charCodeAt(c+1)]<<4|wn[r.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function ip(r){return Mn[r>>18&63]+Mn[r>>12&63]+Mn[r>>6&63]+Mn[r&63]}function sp(r,e,t){for(var n,s=[],i=e;i<t;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(ip(n));return s.join("")}function op(r){for(var e,t=r.length,n=t%3,s=[],i=16383,o=0,a=t-n;o<a;o+=i)s.push(sp(r,o,o+i>a?a:o+i));return n===1?(e=r[t-1],s.push(Mn[e>>2]+Mn[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],s.push(Mn[e>>10]+Mn[e>>4&63]+Mn[e<<2&63]+"=")),s.join("")}var Sl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Sl.read=function(r,e,t,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,p=c>>1,g=-7,w=t?s-1:0,B=t?-1:1,m=r[e+w];for(w+=B,i=m&(1<<-g)-1,m>>=-g,g+=a;g>0;i=i*256+r[e+w],w+=B,g-=8);for(o=i&(1<<-g)-1,i>>=-g,g+=n;g>0;o=o*256+r[e+w],w+=B,g-=8);if(i===0)i=1-p;else{if(i===c)return o?NaN:(m?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-p}return(m?-1:1)*o*Math.pow(2,i-n)};Sl.write=function(r,e,t,n,s,i){var o,a,c,p=i*8-s-1,g=(1<<p)-1,w=g>>1,B=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:i-1,I=n?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=g):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+w>=1?e+=B/c:e+=B*Math.pow(2,1-w),e*c>=2&&(o++,c/=2),o+w>=g?(a=0,o=g):o+w>=1?(a=(e*c-1)*Math.pow(2,s),o=o+w):(a=e*Math.pow(2,w-1)*Math.pow(2,s),o=0));s>=8;r[t+m]=a&255,m+=I,a/=256,s-=8);for(o=o<<s|a,p+=s;p>0;r[t+m]=o&255,m+=I,o/=256,p-=8);r[t+m-I]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=Go,t=Sl,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=C,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const b=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(b,u),b.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(b){if(b>s)throw new RangeError('The value "'+b+'" is invalid for option "size"');const u=new Uint8Array(b);return Object.setPrototypeOf(u,a.prototype),u}function a(b,u,d){if(typeof b=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(b)}return c(b,u,d)}a.poolSize=8192;function c(b,u,d){if(typeof b=="string")return B(b,u);if(ArrayBuffer.isView(b))return I(b);if(b==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(cn(b,ArrayBuffer)||b&&cn(b.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(cn(b,SharedArrayBuffer)||b&&cn(b.buffer,SharedArrayBuffer)))return k(b,u,d);if(typeof b=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=b.valueOf&&b.valueOf();if(x!=null&&x!==b)return a.from(x,u,d);const U=E(b);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof b[Symbol.toPrimitive]=="function")return a.from(b[Symbol.toPrimitive]("string"),u,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b)}a.from=function(b,u,d){return c(b,u,d)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function p(b){if(typeof b!="number")throw new TypeError('"size" argument must be of type number');if(b<0)throw new RangeError('The value "'+b+'" is invalid for option "size"')}function g(b,u,d){return p(b),b<=0?o(b):u!==void 0?typeof d=="string"?o(b).fill(u,d):o(b).fill(u):o(b)}a.alloc=function(b,u,d){return g(b,u,d)};function w(b){return p(b),o(b<0?0:M(b)|0)}a.allocUnsafe=function(b){return w(b)},a.allocUnsafeSlow=function(b){return w(b)};function B(b,u){if((typeof u!="string"||u==="")&&(u="utf8"),!a.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const d=T(b,u)|0;let x=o(d);const U=x.write(b,u);return U!==d&&(x=x.slice(0,U)),x}function m(b){const u=b.length<0?0:M(b.length)|0,d=o(u);for(let x=0;x<u;x+=1)d[x]=b[x]&255;return d}function I(b){if(cn(b,Uint8Array)){const u=new Uint8Array(b);return k(u.buffer,u.byteOffset,u.byteLength)}return m(b)}function k(b,u,d){if(u<0||b.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<u+(d||0))throw new RangeError('"length" is outside of buffer bounds');let x;return u===void 0&&d===void 0?x=new Uint8Array(b):d===void 0?x=new Uint8Array(b,u):x=new Uint8Array(b,u,d),Object.setPrototypeOf(x,a.prototype),x}function E(b){if(a.isBuffer(b)){const u=M(b.length)|0,d=o(u);return d.length===0||b.copy(d,0,0,u),d}if(b.length!==void 0)return typeof b.length!="number"||Ve(b.length)?o(0):m(b);if(b.type==="Buffer"&&Array.isArray(b.data))return m(b.data)}function M(b){if(b>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return b|0}function C(b){return+b!=b&&(b=0),a.alloc(+b)}a.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==a.prototype},a.compare=function(u,d){if(cn(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),cn(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(u)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===d)return 0;let x=u.length,U=d.length;for(let K=0,V=Math.min(x,U);K<V;++K)if(u[K]!==d[K]){x=u[K],U=d[K];break}return x<U?-1:U<x?1:0},a.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(u,d){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return a.alloc(0);let x;if(d===void 0)for(d=0,x=0;x<u.length;++x)d+=u[x].length;const U=a.allocUnsafe(d);let K=0;for(x=0;x<u.length;++x){let V=u[x];if(cn(V,Uint8Array))K+V.length>U.length?(a.isBuffer(V)||(V=a.from(V)),V.copy(U,K)):Uint8Array.prototype.set.call(U,V,K);else if(a.isBuffer(V))V.copy(U,K);else throw new TypeError('"list" argument must be an Array of Buffers');K+=V.length}return U};function T(b,u){if(a.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||cn(b,ArrayBuffer))return b.byteLength;if(typeof b!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof b);const d=b.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&d===0)return 0;let U=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return je(b).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return Ze(b).length;default:if(U)return x?-1:je(b).length;u=(""+u).toLowerCase(),U=!0}}a.byteLength=T;function N(b,u,d){let x=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,u>>>=0,d<=u))return"";for(b||(b="utf8");;)switch(b){case"hex":return L(this,u,d);case"utf8":case"utf-8":return l(this,u,d);case"ascii":return S(this,u,d);case"latin1":case"binary":return A(this,u,d);case"base64":return v(this,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,u,d);default:if(x)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase(),x=!0}}a.prototype._isBuffer=!0;function P(b,u,d){const x=b[u];b[u]=b[d],b[d]=x}a.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<u;d+=2)P(this,d,d+1);return this},a.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<u;d+=4)P(this,d,d+3),P(this,d+1,d+2);return this},a.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<u;d+=8)P(this,d,d+7),P(this,d+1,d+6),P(this,d+2,d+5),P(this,d+3,d+4);return this},a.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?l(this,0,u):N.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(u){if(!a.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:a.compare(this,u)===0},a.prototype.inspect=function(){let u="";const d=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(u+=" ... "),"<Buffer "+u+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(u,d,x,U,K){if(cn(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(d===void 0&&(d=0),x===void 0&&(x=u?u.length:0),U===void 0&&(U=0),K===void 0&&(K=this.length),d<0||x>u.length||U<0||K>this.length)throw new RangeError("out of range index");if(U>=K&&d>=x)return 0;if(U>=K)return-1;if(d>=x)return 1;if(d>>>=0,x>>>=0,U>>>=0,K>>>=0,this===u)return 0;let V=K-U,ve=x-d;const we=Math.min(V,ve),me=this.slice(U,K),qe=u.slice(d,x);for(let ge=0;ge<we;++ge)if(me[ge]!==qe[ge]){V=me[ge],ve=qe[ge];break}return V<ve?-1:ve<V?1:0};function D(b,u,d,x,U){if(b.length===0)return-1;if(typeof d=="string"?(x=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,Ve(d)&&(d=U?0:b.length-1),d<0&&(d=b.length+d),d>=b.length){if(U)return-1;d=b.length-1}else if(d<0)if(U)d=0;else return-1;if(typeof u=="string"&&(u=a.from(u,x)),a.isBuffer(u))return u.length===0?-1:F(b,u,d,x,U);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(b,u,d):Uint8Array.prototype.lastIndexOf.call(b,u,d):F(b,[u],d,x,U);throw new TypeError("val must be string, number or Buffer")}function F(b,u,d,x,U){let K=1,V=b.length,ve=u.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(b.length<2||u.length<2)return-1;K=2,V/=2,ve/=2,d/=2}function we(qe,ge){return K===1?qe[ge]:qe.readUInt16BE(ge*K)}let me;if(U){let qe=-1;for(me=d;me<V;me++)if(we(b,me)===we(u,qe===-1?0:me-qe)){if(qe===-1&&(qe=me),me-qe+1===ve)return qe*K}else qe!==-1&&(me-=me-qe),qe=-1}else for(d+ve>V&&(d=V-ve),me=d;me>=0;me--){let qe=!0;for(let ge=0;ge<ve;ge++)if(we(b,me+ge)!==we(u,ge)){qe=!1;break}if(qe)return me}return-1}a.prototype.includes=function(u,d,x){return this.indexOf(u,d,x)!==-1},a.prototype.indexOf=function(u,d,x){return D(this,u,d,x,!0)},a.prototype.lastIndexOf=function(u,d,x){return D(this,u,d,x,!1)};function Y(b,u,d,x){d=Number(d)||0;const U=b.length-d;x?(x=Number(x),x>U&&(x=U)):x=U;const K=u.length;x>K/2&&(x=K/2);let V;for(V=0;V<x;++V){const ve=parseInt(u.substr(V*2,2),16);if(Ve(ve))return V;b[d+V]=ve}return V}function W(b,u,d,x){return $e(je(u,b.length-d),b,d,x)}function j(b,u,d,x){return $e(nt(u),b,d,x)}function q(b,u,d,x){return $e(Ze(u),b,d,x)}function G(b,u,d,x){return $e(Os(u,b.length-d),b,d,x)}a.prototype.write=function(u,d,x,U){if(d===void 0)U="utf8",x=this.length,d=0;else if(x===void 0&&typeof d=="string")U=d,x=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(x)?(x=x>>>0,U===void 0&&(U="utf8")):(U=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const K=this.length-d;if((x===void 0||x>K)&&(x=K),u.length>0&&(x<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let V=!1;for(;;)switch(U){case"hex":return Y(this,u,d,x);case"utf8":case"utf-8":return W(this,u,d,x);case"ascii":case"latin1":case"binary":return j(this,u,d,x);case"base64":return q(this,u,d,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,u,d,x);default:if(V)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),V=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function v(b,u,d){return u===0&&d===b.length?e.fromByteArray(b):e.fromByteArray(b.slice(u,d))}function l(b,u,d){d=Math.min(b.length,d);const x=[];let U=u;for(;U<d;){const K=b[U];let V=null,ve=K>239?4:K>223?3:K>191?2:1;if(U+ve<=d){let we,me,qe,ge;switch(ve){case 1:K<128&&(V=K);break;case 2:we=b[U+1],(we&192)===128&&(ge=(K&31)<<6|we&63,ge>127&&(V=ge));break;case 3:we=b[U+1],me=b[U+2],(we&192)===128&&(me&192)===128&&(ge=(K&15)<<12|(we&63)<<6|me&63,ge>2047&&(ge<55296||ge>57343)&&(V=ge));break;case 4:we=b[U+1],me=b[U+2],qe=b[U+3],(we&192)===128&&(me&192)===128&&(qe&192)===128&&(ge=(K&15)<<18|(we&63)<<12|(me&63)<<6|qe&63,ge>65535&&ge<1114112&&(V=ge))}}V===null?(V=65533,ve=1):V>65535&&(V-=65536,x.push(V>>>10&1023|55296),V=56320|V&1023),x.push(V),U+=ve}return y(x)}const h=4096;function y(b){const u=b.length;if(u<=h)return String.fromCharCode.apply(String,b);let d="",x=0;for(;x<u;)d+=String.fromCharCode.apply(String,b.slice(x,x+=h));return d}function S(b,u,d){let x="";d=Math.min(b.length,d);for(let U=u;U<d;++U)x+=String.fromCharCode(b[U]&127);return x}function A(b,u,d){let x="";d=Math.min(b.length,d);for(let U=u;U<d;++U)x+=String.fromCharCode(b[U]);return x}function L(b,u,d){const x=b.length;(!u||u<0)&&(u=0),(!d||d<0||d>x)&&(d=x);let U="";for(let K=u;K<d;++K)U+=rt[b[K]];return U}function O(b,u,d){const x=b.slice(u,d);let U="";for(let K=0;K<x.length-1;K+=2)U+=String.fromCharCode(x[K]+x[K+1]*256);return U}a.prototype.slice=function(u,d){const x=this.length;u=~~u,d=d===void 0?x:~~d,u<0?(u+=x,u<0&&(u=0)):u>x&&(u=x),d<0?(d+=x,d<0&&(d=0)):d>x&&(d=x),d<u&&(d=u);const U=this.subarray(u,d);return Object.setPrototypeOf(U,a.prototype),U};function _(b,u,d){if(b%1!==0||b<0)throw new RangeError("offset is not uint");if(b+u>d)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(u,d,x){u=u>>>0,d=d>>>0,x||_(u,d,this.length);let U=this[u],K=1,V=0;for(;++V<d&&(K*=256);)U+=this[u+V]*K;return U},a.prototype.readUintBE=a.prototype.readUIntBE=function(u,d,x){u=u>>>0,d=d>>>0,x||_(u,d,this.length);let U=this[u+--d],K=1;for(;d>0&&(K*=256);)U+=this[u+--d]*K;return U},a.prototype.readUint8=a.prototype.readUInt8=function(u,d){return u=u>>>0,d||_(u,1,this.length),this[u]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(u,d){return u=u>>>0,d||_(u,2,this.length),this[u]|this[u+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(u,d){return u=u>>>0,d||_(u,2,this.length),this[u]<<8|this[u+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(u,d){return u=u>>>0,d||_(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(u,d){return u=u>>>0,d||_(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},a.prototype.readBigUInt64LE=Sn(function(u){u=u>>>0,qn(u,"offset");const d=this[u],x=this[u+7];(d===void 0||x===void 0)&&ze(u,this.length-8);const U=d+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,K=this[++u]+this[++u]*2**8+this[++u]*2**16+x*2**24;return BigInt(U)+(BigInt(K)<<BigInt(32))}),a.prototype.readBigUInt64BE=Sn(function(u){u=u>>>0,qn(u,"offset");const d=this[u],x=this[u+7];(d===void 0||x===void 0)&&ze(u,this.length-8);const U=d*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],K=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+x;return(BigInt(U)<<BigInt(32))+BigInt(K)}),a.prototype.readIntLE=function(u,d,x){u=u>>>0,d=d>>>0,x||_(u,d,this.length);let U=this[u],K=1,V=0;for(;++V<d&&(K*=256);)U+=this[u+V]*K;return K*=128,U>=K&&(U-=Math.pow(2,8*d)),U},a.prototype.readIntBE=function(u,d,x){u=u>>>0,d=d>>>0,x||_(u,d,this.length);let U=d,K=1,V=this[u+--U];for(;U>0&&(K*=256);)V+=this[u+--U]*K;return K*=128,V>=K&&(V-=Math.pow(2,8*d)),V},a.prototype.readInt8=function(u,d){return u=u>>>0,d||_(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},a.prototype.readInt16LE=function(u,d){u=u>>>0,d||_(u,2,this.length);const x=this[u]|this[u+1]<<8;return x&32768?x|4294901760:x},a.prototype.readInt16BE=function(u,d){u=u>>>0,d||_(u,2,this.length);const x=this[u+1]|this[u]<<8;return x&32768?x|4294901760:x},a.prototype.readInt32LE=function(u,d){return u=u>>>0,d||_(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},a.prototype.readInt32BE=function(u,d){return u=u>>>0,d||_(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},a.prototype.readBigInt64LE=Sn(function(u){u=u>>>0,qn(u,"offset");const d=this[u],x=this[u+7];(d===void 0||x===void 0)&&ze(u,this.length-8);const U=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(x<<24);return(BigInt(U)<<BigInt(32))+BigInt(d+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),a.prototype.readBigInt64BE=Sn(function(u){u=u>>>0,qn(u,"offset");const d=this[u],x=this[u+7];(d===void 0||x===void 0)&&ze(u,this.length-8);const U=(d<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(U)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+x)}),a.prototype.readFloatLE=function(u,d){return u=u>>>0,d||_(u,4,this.length),t.read(this,u,!0,23,4)},a.prototype.readFloatBE=function(u,d){return u=u>>>0,d||_(u,4,this.length),t.read(this,u,!1,23,4)},a.prototype.readDoubleLE=function(u,d){return u=u>>>0,d||_(u,8,this.length),t.read(this,u,!0,52,8)},a.prototype.readDoubleBE=function(u,d){return u=u>>>0,d||_(u,8,this.length),t.read(this,u,!1,52,8)};function f(b,u,d,x,U,K){if(!a.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>U||u<K)throw new RangeError('"value" argument is out of bounds');if(d+x>b.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(u,d,x,U){if(u=+u,d=d>>>0,x=x>>>0,!U){const ve=Math.pow(2,8*x)-1;f(this,u,d,x,ve,0)}let K=1,V=0;for(this[d]=u&255;++V<x&&(K*=256);)this[d+V]=u/K&255;return d+x},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(u,d,x,U){if(u=+u,d=d>>>0,x=x>>>0,!U){const ve=Math.pow(2,8*x)-1;f(this,u,d,x,ve,0)}let K=x-1,V=1;for(this[d+K]=u&255;--K>=0&&(V*=256);)this[d+K]=u/V&255;return d+x},a.prototype.writeUint8=a.prototype.writeUInt8=function(u,d,x){return u=+u,d=d>>>0,x||f(this,u,d,1,255,0),this[d]=u&255,d+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(u,d,x){return u=+u,d=d>>>0,x||f(this,u,d,2,65535,0),this[d]=u&255,this[d+1]=u>>>8,d+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(u,d,x){return u=+u,d=d>>>0,x||f(this,u,d,2,65535,0),this[d]=u>>>8,this[d+1]=u&255,d+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(u,d,x){return u=+u,d=d>>>0,x||f(this,u,d,4,4294967295,0),this[d+3]=u>>>24,this[d+2]=u>>>16,this[d+1]=u>>>8,this[d]=u&255,d+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(u,d,x){return u=+u,d=d>>>0,x||f(this,u,d,4,4294967295,0),this[d]=u>>>24,this[d+1]=u>>>16,this[d+2]=u>>>8,this[d+3]=u&255,d+4};function R(b,u,d,x,U){Ye(u,x,U,b,d,7);let K=Number(u&BigInt(4294967295));b[d++]=K,K=K>>8,b[d++]=K,K=K>>8,b[d++]=K,K=K>>8,b[d++]=K;let V=Number(u>>BigInt(32)&BigInt(4294967295));return b[d++]=V,V=V>>8,b[d++]=V,V=V>>8,b[d++]=V,V=V>>8,b[d++]=V,d}function oe(b,u,d,x,U){Ye(u,x,U,b,d,7);let K=Number(u&BigInt(4294967295));b[d+7]=K,K=K>>8,b[d+6]=K,K=K>>8,b[d+5]=K,K=K>>8,b[d+4]=K;let V=Number(u>>BigInt(32)&BigInt(4294967295));return b[d+3]=V,V=V>>8,b[d+2]=V,V=V>>8,b[d+1]=V,V=V>>8,b[d]=V,d+8}a.prototype.writeBigUInt64LE=Sn(function(u,d=0){return R(this,u,d,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Sn(function(u,d=0){return oe(this,u,d,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(u,d,x,U){if(u=+u,d=d>>>0,!U){const we=Math.pow(2,8*x-1);f(this,u,d,x,we-1,-we)}let K=0,V=1,ve=0;for(this[d]=u&255;++K<x&&(V*=256);)u<0&&ve===0&&this[d+K-1]!==0&&(ve=1),this[d+K]=(u/V>>0)-ve&255;return d+x},a.prototype.writeIntBE=function(u,d,x,U){if(u=+u,d=d>>>0,!U){const we=Math.pow(2,8*x-1);f(this,u,d,x,we-1,-we)}let K=x-1,V=1,ve=0;for(this[d+K]=u&255;--K>=0&&(V*=256);)u<0&&ve===0&&this[d+K+1]!==0&&(ve=1),this[d+K]=(u/V>>0)-ve&255;return d+x},a.prototype.writeInt8=function(u,d,x){return u=+u,d=d>>>0,x||f(this,u,d,1,127,-128),u<0&&(u=255+u+1),this[d]=u&255,d+1},a.prototype.writeInt16LE=function(u,d,x){return u=+u,d=d>>>0,x||f(this,u,d,2,32767,-32768),this[d]=u&255,this[d+1]=u>>>8,d+2},a.prototype.writeInt16BE=function(u,d,x){return u=+u,d=d>>>0,x||f(this,u,d,2,32767,-32768),this[d]=u>>>8,this[d+1]=u&255,d+2},a.prototype.writeInt32LE=function(u,d,x){return u=+u,d=d>>>0,x||f(this,u,d,4,2147483647,-2147483648),this[d]=u&255,this[d+1]=u>>>8,this[d+2]=u>>>16,this[d+3]=u>>>24,d+4},a.prototype.writeInt32BE=function(u,d,x){return u=+u,d=d>>>0,x||f(this,u,d,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[d]=u>>>24,this[d+1]=u>>>16,this[d+2]=u>>>8,this[d+3]=u&255,d+4},a.prototype.writeBigInt64LE=Sn(function(u,d=0){return R(this,u,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Sn(function(u,d=0){return oe(this,u,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ee(b,u,d,x,U,K){if(d+x>b.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function ae(b,u,d,x,U){return u=+u,d=d>>>0,U||ee(b,u,d,4),t.write(b,u,d,x,23,4),d+4}a.prototype.writeFloatLE=function(u,d,x){return ae(this,u,d,!0,x)},a.prototype.writeFloatBE=function(u,d,x){return ae(this,u,d,!1,x)};function We(b,u,d,x,U){return u=+u,d=d>>>0,U||ee(b,u,d,8),t.write(b,u,d,x,52,8),d+8}a.prototype.writeDoubleLE=function(u,d,x){return We(this,u,d,!0,x)},a.prototype.writeDoubleBE=function(u,d,x){return We(this,u,d,!1,x)},a.prototype.copy=function(u,d,x,U){if(!a.isBuffer(u))throw new TypeError("argument should be a Buffer");if(x||(x=0),!U&&U!==0&&(U=this.length),d>=u.length&&(d=u.length),d||(d=0),U>0&&U<x&&(U=x),U===x||u.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),u.length-d<U-x&&(U=u.length-d+x);const K=U-x;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,x,U):Uint8Array.prototype.set.call(u,this.subarray(x,U),d),K},a.prototype.fill=function(u,d,x,U){if(typeof u=="string"){if(typeof d=="string"?(U=d,d=0,x=this.length):typeof x=="string"&&(U=x,x=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!a.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(u.length===1){const V=u.charCodeAt(0);(U==="utf8"&&V<128||U==="latin1")&&(u=V)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(d<0||this.length<d||this.length<x)throw new RangeError("Out of range index");if(x<=d)return this;d=d>>>0,x=x===void 0?this.length:x>>>0,u||(u=0);let K;if(typeof u=="number")for(K=d;K<x;++K)this[K]=u;else{const V=a.isBuffer(u)?u:a.from(u,U),ve=V.length;if(ve===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(K=0;K<x-d;++K)this[K+d]=V[K%ve]}return this};const be={};function Ae(b,u,d){be[b]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${b}]`,this.stack,delete this.name}get code(){return b}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${b}]: ${this.message}`}}}Ae("ERR_BUFFER_OUT_OF_BOUNDS",function(b){return b?`${b} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ae("ERR_INVALID_ARG_TYPE",function(b,u){return`The "${b}" argument must be of type number. Received type ${typeof u}`},TypeError),Ae("ERR_OUT_OF_RANGE",function(b,u,d){let x=`The value of "${b}" is out of range.`,U=d;return Number.isInteger(d)&&Math.abs(d)>2**32?U=yn(String(d)):typeof d=="bigint"&&(U=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(U=yn(U)),U+="n"),x+=` It must be ${u}. Received ${U}`,x},RangeError);function yn(b){let u="",d=b.length;const x=b[0]==="-"?1:0;for(;d>=x+4;d-=3)u=`_${b.slice(d-3,d)}${u}`;return`${b.slice(0,d)}${u}`}function Re(b,u,d){qn(u,"offset"),(b[u]===void 0||b[u+d]===void 0)&&ze(u,b.length-(d+1))}function Ye(b,u,d,x,U,K){if(b>d||b<u){const V=typeof u=="bigint"?"n":"";let ve;throw u===0||u===BigInt(0)?ve=`>= 0${V} and < 2${V} ** ${(K+1)*8}${V}`:ve=`>= -(2${V} ** ${(K+1)*8-1}${V}) and < 2 ** ${(K+1)*8-1}${V}`,new be.ERR_OUT_OF_RANGE("value",ve,b)}Re(x,U,K)}function qn(b,u){if(typeof b!="number")throw new be.ERR_INVALID_ARG_TYPE(u,"number",b)}function ze(b,u,d){throw Math.floor(b)!==b?(qn(b,d),new be.ERR_OUT_OF_RANGE("offset","an integer",b)):u<0?new be.ERR_BUFFER_OUT_OF_BOUNDS:new be.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,b)}const tt=/[^+/0-9A-Za-z-_]/g;function Ns(b){if(b=b.split("=")[0],b=b.trim().replace(tt,""),b.length<2)return"";for(;b.length%4!==0;)b=b+"=";return b}function je(b,u){u=u||1/0;let d;const x=b.length;let U=null;const K=[];for(let V=0;V<x;++V){if(d=b.charCodeAt(V),d>55295&&d<57344){if(!U){if(d>56319){(u-=3)>-1&&K.push(239,191,189);continue}else if(V+1===x){(u-=3)>-1&&K.push(239,191,189);continue}U=d;continue}if(d<56320){(u-=3)>-1&&K.push(239,191,189),U=d;continue}d=(U-55296<<10|d-56320)+65536}else U&&(u-=3)>-1&&K.push(239,191,189);if(U=null,d<128){if((u-=1)<0)break;K.push(d)}else if(d<2048){if((u-=2)<0)break;K.push(d>>6|192,d&63|128)}else if(d<65536){if((u-=3)<0)break;K.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((u-=4)<0)break;K.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return K}function nt(b){const u=[];for(let d=0;d<b.length;++d)u.push(b.charCodeAt(d)&255);return u}function Os(b,u){let d,x,U;const K=[];for(let V=0;V<b.length&&!((u-=2)<0);++V)d=b.charCodeAt(V),x=d>>8,U=d%256,K.push(U),K.push(x);return K}function Ze(b){return e.toByteArray(Ns(b))}function $e(b,u,d,x){let U;for(U=0;U<x&&!(U+d>=u.length||U>=b.length);++U)u[U+d]=b[U];return U}function cn(b,u){return b instanceof u||b!=null&&b.constructor!=null&&b.constructor.name!=null&&b.constructor.name===u.name}function Ve(b){return b!==b}const rt=function(){const b="0123456789abcdef",u=new Array(256);for(let d=0;d<16;++d){const x=d*16;for(let U=0;U<16;++U)u[x+U]=b[d]+b[U]}return u}();function Sn(b){return typeof BigInt>"u"?it:b}function it(){throw new Error("BigInt not supported")}})(fe);const ni=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Yo(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function gs(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Nt(r,...e){if(!Yo(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function ap(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");gs(r.outputLen),gs(r.blockLen)}function Bi(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Ld(r,e){Nt(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function cp(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function _r(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function $a(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function xn(r,e){return r<<32-e|r>>>e}const lp=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function up(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function dp(r){for(let e=0;e<r.length;e++)r[e]=up(r[e]);return r}const xu=lp?r=>r:dp,Pd=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",fp=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function qr(r){if(Nt(r),Pd)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=fp[r[t]];return e}const Hn={_0:48,_9:57,A:65,F:70,a:97,f:102};function Bu(r){if(r>=Hn._0&&r<=Hn._9)return r-Hn._0;if(r>=Hn.A&&r<=Hn.F)return r-(Hn.A-10);if(r>=Hn.a&&r<=Hn.f)return r-(Hn.a-10)}function El(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Pd)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=Bu(r.charCodeAt(i)),a=Bu(r.charCodeAt(i+1));if(o===void 0||a===void 0){const c=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function Di(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Zo(r){return typeof r=="string"&&(r=Di(r)),Nt(r),r}function Yt(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];Nt(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}class _l{}function Al(r){const e=n=>r().update(Zo(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function kl(r=32){if(ni&&typeof ni.getRandomValues=="function")return ni.getRandomValues(new Uint8Array(r));if(ni&&typeof ni.randomBytes=="function")return Uint8Array.from(ni.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function hp(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),c=n?4:0,p=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+p,a,n)}function pp(r,e,t){return r&e^~r&t}function gp(r,e,t){return r&e^r&t^e&t}class Nd extends _l{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=$a(this.buffer)}update(e){Bi(this),e=Zo(e),Nt(e);const{view:t,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=$a(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Bi(this),Ld(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,_r(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let w=o;w<s;w++)t[w]=0;hp(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=$a(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=c/4,g=this.get();if(p>g.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<p;w++)a.setUint32(4*w,g[w],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const ir=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$t=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ws=BigInt(2**32-1),Ru=BigInt(32);function mp(r,e=!1){return e?{h:Number(r&Ws),l:Number(r>>Ru&Ws)}:{h:Number(r>>Ru&Ws)|0,l:Number(r&Ws)|0}}function Od(r,e=!1){const t=r.length;let n=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l:a}=mp(r[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const Mu=(r,e,t)=>r>>>t,Tu=(r,e,t)=>r<<32-t|e>>>t,ri=(r,e,t)=>r>>>t|e<<32-t,ii=(r,e,t)=>r<<32-t|e>>>t,Us=(r,e,t)=>r<<64-t|e>>>t-32,zs=(r,e,t)=>r>>>t-32|e<<64-t,yp=(r,e,t)=>r<<t|e>>>32-t,wp=(r,e,t)=>e<<t|r>>>32-t,bp=(r,e,t)=>e<<t-32|r>>>64-t,vp=(r,e,t)=>r<<t-32|e>>>64-t;function jn(r,e,t,n){const s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const Sp=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),Ep=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,_p=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),Ap=(r,e,t,n,s)=>e+t+n+s+(r/2**32|0)|0,kp=(r,e,t,n,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Ip=(r,e,t,n,s,i)=>e+t+n+s+i+(r/2**32|0)|0,xp=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sr=new Uint32Array(64);class Bp extends Nd{constructor(e=32){super(64,e,8,!1),this.A=ir[0]|0,this.B=ir[1]|0,this.C=ir[2]|0,this.D=ir[3]|0,this.E=ir[4]|0,this.F=ir[5]|0,this.G=ir[6]|0,this.H=ir[7]|0}get(){const{A:e,B:t,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,t,n,s,i,o,a,c]}set(e,t,n,s,i,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let w=0;w<16;w++,t+=4)sr[w]=e.getUint32(t,!1);for(let w=16;w<64;w++){const B=sr[w-15],m=sr[w-2],I=xn(B,7)^xn(B,18)^B>>>3,k=xn(m,17)^xn(m,19)^m>>>10;sr[w]=k+sr[w-7]+I+sr[w-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:p,H:g}=this;for(let w=0;w<64;w++){const B=xn(a,6)^xn(a,11)^xn(a,25),m=g+B+pp(a,c,p)+xp[w]+sr[w]|0,k=(xn(n,2)^xn(n,13)^xn(n,22))+gp(n,s,i)|0;g=p,p=c,c=a,a=o+m|0,o=i,i=s,s=n,n=m+k|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,p=p+this.G|0,g=g+this.H|0,this.set(n,s,i,o,a,c,p,g)}roundClean(){_r(sr)}destroy(){this.set(0,0,0,0,0,0,0,0),_r(this.buffer)}}const Wd=Od(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Rp=Wd[0],Mp=Wd[1],or=new Uint32Array(80),ar=new Uint32Array(80);class Tp extends Nd{constructor(e=64){super(128,e,16,!1),this.Ah=$t[0]|0,this.Al=$t[1]|0,this.Bh=$t[2]|0,this.Bl=$t[3]|0,this.Ch=$t[4]|0,this.Cl=$t[5]|0,this.Dh=$t[6]|0,this.Dl=$t[7]|0,this.Eh=$t[8]|0,this.El=$t[9]|0,this.Fh=$t[10]|0,this.Fl=$t[11]|0,this.Gh=$t[12]|0,this.Gl=$t[13]|0,this.Hh=$t[14]|0,this.Hl=$t[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:p,El:g,Fh:w,Fl:B,Gh:m,Gl:I,Hh:k,Hl:E}=this;return[e,t,n,s,i,o,a,c,p,g,w,B,m,I,k,E]}set(e,t,n,s,i,o,a,c,p,g,w,B,m,I,k,E){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=p|0,this.El=g|0,this.Fh=w|0,this.Fl=B|0,this.Gh=m|0,this.Gl=I|0,this.Hh=k|0,this.Hl=E|0}process(e,t){for(let T=0;T<16;T++,t+=4)or[T]=e.getUint32(t),ar[T]=e.getUint32(t+=4);for(let T=16;T<80;T++){const N=or[T-15]|0,P=ar[T-15]|0,D=ri(N,P,1)^ri(N,P,8)^Mu(N,P,7),F=ii(N,P,1)^ii(N,P,8)^Tu(N,P,7),Y=or[T-2]|0,W=ar[T-2]|0,j=ri(Y,W,19)^Us(Y,W,61)^Mu(Y,W,6),q=ii(Y,W,19)^zs(Y,W,61)^Tu(Y,W,6),G=_p(F,q,ar[T-7],ar[T-16]),v=Ap(G,D,j,or[T-7],or[T-16]);or[T]=v|0,ar[T]=G|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:p,Dl:g,Eh:w,El:B,Fh:m,Fl:I,Gh:k,Gl:E,Hh:M,Hl:C}=this;for(let T=0;T<80;T++){const N=ri(w,B,14)^ri(w,B,18)^Us(w,B,41),P=ii(w,B,14)^ii(w,B,18)^zs(w,B,41),D=w&m^~w&k,F=B&I^~B&E,Y=kp(C,P,F,Mp[T],ar[T]),W=Ip(Y,M,N,D,Rp[T],or[T]),j=Y|0,q=ri(n,s,28)^Us(n,s,34)^Us(n,s,39),G=ii(n,s,28)^zs(n,s,34)^zs(n,s,39),v=n&i^n&a^i&a,l=s&o^s&c^o&c;M=k|0,C=E|0,k=m|0,E=I|0,m=w|0,I=B|0,{h:w,l:B}=jn(p|0,g|0,W|0,j|0),p=a|0,g=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const h=Sp(j,G,l);n=Ep(h,W,q,v),s=h|0}({h:n,l:s}=jn(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=jn(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=jn(this.Ch|0,this.Cl|0,a|0,c|0),{h:p,l:g}=jn(this.Dh|0,this.Dl|0,p|0,g|0),{h:w,l:B}=jn(this.Eh|0,this.El|0,w|0,B|0),{h:m,l:I}=jn(this.Fh|0,this.Fl|0,m|0,I|0),{h:k,l:E}=jn(this.Gh|0,this.Gl|0,k|0,E|0),{h:M,l:C}=jn(this.Hh|0,this.Hl|0,M|0,C|0),this.set(n,s,i,o,a,c,p,g,w,B,m,I,k,E,M,C)}roundClean(){_r(or,ar)}destroy(){_r(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ud=Al(()=>new Bp),Jo=Al(()=>new Tp);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Il=BigInt(0),Ec=BigInt(1);function Hr(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}function Ds(r){const e=r.toString(16);return e.length&1?"0"+e:e}function zd(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Il:BigInt("0x"+r)}function ks(r){return zd(qr(r))}function Ar(r){return Nt(r),zd(qr(Uint8Array.from(r).reverse()))}function xl(r,e){return El(r.toString(16).padStart(e*2,"0"))}function jr(r,e){return xl(r,e).reverse()}function Ke(r,e,t){let n;if(typeof e=="string")try{n=El(e)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(Yo(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return n}function Cp(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}const qa=r=>typeof r=="bigint"&&Il<=r;function Lp(r,e,t){return qa(r)&&qa(e)&&qa(t)&&e<=r&&r<t}function gr(r,e,t,n){if(!Lp(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function Pp(r){let e;for(e=0;r>Il;r>>=Ec,e+=1);return e}const Xo=r=>(Ec<<BigInt(r))-Ec;function Np(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=m=>new Uint8Array(m),s=m=>Uint8Array.of(m);let i=n(r),o=n(r),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},p=(...m)=>t(o,i,...m),g=(m=n(0))=>{o=p(s(0),m),i=p(),m.length!==0&&(o=p(s(1),m),i=p())},w=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const I=[];for(;m<e;){i=p();const k=i.slice();I.push(k),m+=i.length}return Yt(...I)};return(m,I)=>{c(),g(m);let k;for(;!(k=I(w()));)g();return c(),k}}function Op(r){return typeof r=="function"&&Number.isSafeInteger(r.outputLen)}function Yr(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const a=r[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(t).forEach(([s,i])=>n(s,i,!0))}function Io(r){const e=new WeakMap;return(t,...n)=>{const s=e.get(t);if(s!==void 0)return s;const i=r(t,...n);return e.set(t,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const an=BigInt(0),Kt=BigInt(1),Pr=BigInt(2),Wp=BigInt(3),Dd=BigInt(4),Fd=BigInt(5),Kd=BigInt(8);function Ge(r,e){const t=r%e;return t>=an?t:e+t}function Xe(r,e,t){let n=r;for(;e-- >an;)n*=n,n%=t;return n}function Cu(r,e){if(r===an)throw new Error("invert: expected non-zero number");if(e<=an)throw new Error("invert: expected positive modulus, got "+e);let t=Ge(r,e),n=e,s=an,i=Kt;for(;t!==an;){const a=n/t,c=n%t,p=s-i*a;n=t,t=c,s=i,i=p}if(n!==Kt)throw new Error("invert: does not exist");return Ge(s,e)}function $d(r,e){const t=(r.ORDER+Kt)/Dd,n=r.pow(e,t);if(!r.eql(r.sqr(n),e))throw new Error("Cannot find square root");return n}function Up(r,e){const t=(r.ORDER-Fd)/Kd,n=r.mul(e,Pr),s=r.pow(n,t),i=r.mul(e,s),o=r.mul(r.mul(i,Pr),s),a=r.mul(i,r.sub(o,r.ONE));if(!r.eql(r.sqr(a),e))throw new Error("Cannot find square root");return a}function zp(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let e=r-Kt,t=0;for(;e%Pr===an;)e/=Pr,t++;let n=Pr;const s=Zr(r);for(;Lu(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return $d;let i=s.pow(n,e);const o=(e+Kt)/Pr;return function(c,p){if(c.is0(p))return p;if(Lu(c,p)!==1)throw new Error("Cannot find square root");let g=t,w=c.mul(c.ONE,i),B=c.pow(p,e),m=c.pow(p,o);for(;!c.eql(B,c.ONE);){if(c.is0(B))return c.ZERO;let I=1,k=c.sqr(B);for(;!c.eql(k,c.ONE);)if(I++,k=c.sqr(k),I===g)throw new Error("Cannot find square root");const E=Kt<<BigInt(g-I-1),M=c.pow(w,E);g=I,w=c.sqr(M),B=c.mul(B,w),m=c.mul(m,M)}return m}}function Dp(r){return r%Dd===Wp?$d:r%Kd===Fd?Up:zp(r)}const dr=(r,e)=>(Ge(r,e)&Kt)===Kt,Fp=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Kp(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=Fp.reduce((n,s)=>(n[s]="function",n),e);return Yr(r,t),r}function $p(r,e,t){if(t<an)throw new Error("invalid exponent, negatives unsupported");if(t===an)return r.ONE;if(t===Kt)return e;let n=r.ONE,s=e;for(;t>an;)t&Kt&&(n=r.mul(n,s)),s=r.sqr(s),t>>=Kt;return n}function Bl(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),s=e.reduce((o,a,c)=>r.is0(a)?o:(n[c]=o,r.mul(o,a)),r.ONE),i=r.inv(s);return e.reduceRight((o,a,c)=>r.is0(a)?o:(n[c]=r.mul(o,n[c]),r.mul(o,a)),i),n}function Lu(r,e){const t=(r.ORDER-Kt)/Pr,n=r.pow(e,t),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function qp(r,e){e!==void 0&&gs(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Zr(r,e,t=!1,n={}){if(r<=an)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const g=e;g.BITS&&(s=g.BITS),g.sqrt&&(i=g.sqrt),typeof g.isLE=="boolean"&&(t=g.isLE)}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:o,nByteLength:a}=qp(r,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const p=Object.freeze({ORDER:r,isLE:t,BITS:o,BYTES:a,MASK:Xo(o),ZERO:an,ONE:Kt,create:g=>Ge(g,r),isValid:g=>{if(typeof g!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof g);return an<=g&&g<r},is0:g=>g===an,isValidNot0:g=>!p.is0(g)&&p.isValid(g),isOdd:g=>(g&Kt)===Kt,neg:g=>Ge(-g,r),eql:(g,w)=>g===w,sqr:g=>Ge(g*g,r),add:(g,w)=>Ge(g+w,r),sub:(g,w)=>Ge(g-w,r),mul:(g,w)=>Ge(g*w,r),pow:(g,w)=>$p(p,g,w),div:(g,w)=>Ge(g*Cu(w,r),r),sqrN:g=>g*g,addN:(g,w)=>g+w,subN:(g,w)=>g-w,mulN:(g,w)=>g*w,inv:g=>Cu(g,r),sqrt:i||(g=>(c||(c=Dp(r)),c(p,g))),toBytes:g=>t?jr(g,a):xl(g,a),fromBytes:g=>{if(g.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+g.length);return t?Ar(g):ks(g)},invertBatch:g=>Bl(p,g),cmov:(g,w,B)=>B?w:g});return Object.freeze(p)}function Hp(r,e){if(!r.isOdd)throw new Error("Field doesn't have isOdd");const t=r.sqrt(e);return r.isOdd(t)?r.neg(t):t}function qd(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function Hd(r){const e=qd(r);return e+Math.ceil(e/2)}function jp(r,e,t=!1){const n=r.length,s=qd(e),i=Hd(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=t?Ar(r):ks(r),a=Ge(o,e-Kt)+Kt;return t?jr(a,s):xl(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ri=BigInt(0),Nr=BigInt(1);function as(r,e){const t=e.negate();return r?t:e}function jd(r,e,t){const n=e==="pz"?o=>o.pz:o=>o.ez,s=Bl(r.Fp,t.map(n));return t.map((o,a)=>o.toAffine(s[a])).map(r.fromAffine)}function Vd(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function Ha(r,e){Vd(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),s=2**r,i=Xo(r),o=BigInt(r);return{windows:t,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function Pu(r,e,t){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=t;let a=Number(r&s),c=r>>o;a>n&&(a-=i,c+=Nr);const p=e*n,g=p+Math.abs(a)-1,w=a===0,B=a<0,m=e%2!==0;return{nextN:c,offset:g,isZero:w,isNeg:B,isNegF:m,offsetF:p}}function Vp(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Gp(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const ja=new WeakMap,Gd=new WeakMap;function Va(r){return Gd.get(r)||1}function Nu(r){if(r!==Ri)throw new Error("invalid wNAF")}function Yd(r,e){return{constTimeNegate:as,hasPrecomputes(t){return Va(t)!==1},unsafeLadder(t,n,s=r.ZERO){let i=t;for(;n>Ri;)n&Nr&&(s=s.add(i)),i=i.double(),n>>=Nr;return s},precomputeWindow(t,n){const{windows:s,windowSize:i}=Ha(n,e),o=[];let a=t,c=a;for(let p=0;p<s;p++){c=a,o.push(c);for(let g=1;g<i;g++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,n,s){let i=r.ZERO,o=r.BASE;const a=Ha(t,e);for(let c=0;c<a.windows;c++){const{nextN:p,offset:g,isZero:w,isNeg:B,isNegF:m,offsetF:I}=Pu(s,c,a);s=p,w?o=o.add(as(m,n[I])):i=i.add(as(B,n[g]))}return Nu(s),{p:i,f:o}},wNAFUnsafe(t,n,s,i=r.ZERO){const o=Ha(t,e);for(let a=0;a<o.windows&&s!==Ri;a++){const{nextN:c,offset:p,isZero:g,isNeg:w}=Pu(s,a,o);if(s=c,!g){const B=n[p];i=i.add(w?B.negate():B)}}return Nu(s),i},getPrecomputes(t,n,s){let i=ja.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&(typeof s=="function"&&(i=s(i)),ja.set(n,i))),i},wNAFCached(t,n,s){const i=Va(t);return this.wNAF(i,this.getPrecomputes(i,t,s),n)},wNAFCachedUnsafe(t,n,s,i){const o=Va(t);return o===1?this.unsafeLadder(t,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),n,i)},setWindowSize(t,n){Vd(n,e),Gd.set(t,n),ja.delete(t)}}}function Yp(r,e,t,n){let s=e,i=r.ZERO,o=r.ZERO;for(;t>Ri||n>Ri;)t&Nr&&(i=i.add(s)),n&Nr&&(o=o.add(s)),s=s.double(),t>>=Nr,n>>=Nr;return{p1:i,p2:o}}function Rl(r,e,t,n){Vp(t,r),Gp(n,e);const s=t.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,a=Pp(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const p=Xo(c),g=new Array(Number(p)+1).fill(o),w=Math.floor((e.BITS-1)/c)*c;let B=o;for(let m=w;m>=0;m-=c){g.fill(o);for(let k=0;k<i;k++){const E=n[k],M=Number(E>>BigInt(m)&p);g[M]=g[M].add(t[k])}let I=o;for(let k=g.length-1,E=o;k>0;k--)E=E.add(g[k]),I=I.add(E);if(B=B.add(I),m!==0)for(let k=0;k<c;k++)B=B.double()}return B}function Ou(r,e){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Kp(e),e}else return Zr(r)}function Zd(r,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Ri))throw new Error(`CURVE.${a} must be positive bigint`)}const n=Ou(e.p,t.Fp),s=Ou(e.n,t.Fn),o=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const a of o)if(!n.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bn=BigInt(0),Zt=BigInt(1),Ga=BigInt(2),Zp=BigInt(8),Jp={zip215:!0};function Xp(r,e,t,n){const s=r.sqr(t),i=r.sqr(n),o=r.add(r.mul(e.a,s),i),a=r.add(r.ONE,r.mul(e.d,r.mul(s,i)));return r.eql(o,a)}function Qp(r,e={}){const{Fp:t,Fn:n}=Zd("edwards",r,e),{h:s,n:i}=r;Yr(e,{},{uvRatio:"function"});const o=Ga<<BigInt(n.BYTES*8)-Zt,a=k=>t.create(k),c=e.uvRatio||((k,E)=>{try{return{isValid:!0,value:t.sqrt(t.div(k,E))}}catch{return{isValid:!1,value:Bn}}});if(!Xp(t,r,r.Gx,r.Gy))throw new Error("bad curve params: generator point");function p(k,E,M=!1){const C=M?Zt:Bn;return gr("coordinate "+k,E,C,o),E}function g(k){if(!(k instanceof m))throw new Error("ExtendedPoint expected")}const w=Io((k,E)=>{const{ex:M,ey:C,ez:T}=k,N=k.is0();E==null&&(E=N?Zp:t.inv(T));const P=a(M*E),D=a(C*E),F=a(T*E);if(N)return{x:Bn,y:Zt};if(F!==Zt)throw new Error("invZ was invalid");return{x:P,y:D}}),B=Io(k=>{const{a:E,d:M}=r;if(k.is0())throw new Error("bad point: ZERO");const{ex:C,ey:T,ez:N,et:P}=k,D=a(C*C),F=a(T*T),Y=a(N*N),W=a(Y*Y),j=a(D*E),q=a(Y*a(j+F)),G=a(W+a(M*a(D*F)));if(q!==G)throw new Error("bad point: equation left != right (1)");const v=a(C*T),l=a(N*P);if(v!==l)throw new Error("bad point: equation left != right (2)");return!0});class m{constructor(E,M,C,T){this.ex=p("x",E),this.ey=p("y",M),this.ez=p("z",C,!0),this.et=p("t",T),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(E){if(E instanceof m)throw new Error("extended point not allowed");const{x:M,y:C}=E||{};return p("x",M),p("y",C),new m(M,C,Zt,a(M*C))}static normalizeZ(E){return jd(m,"ez",E)}static msm(E,M){return Rl(m,n,E,M)}_setWindowSize(E){this.precompute(E)}precompute(E=8,M=!0){return I.setWindowSize(this,E),M||this.multiply(Ga),this}assertValidity(){B(this)}equals(E){g(E);const{ex:M,ey:C,ez:T}=this,{ex:N,ey:P,ez:D}=E,F=a(M*D),Y=a(N*T),W=a(C*D),j=a(P*T);return F===Y&&W===j}is0(){return this.equals(m.ZERO)}negate(){return new m(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:E}=r,{ex:M,ey:C,ez:T}=this,N=a(M*M),P=a(C*C),D=a(Ga*a(T*T)),F=a(E*N),Y=M+C,W=a(a(Y*Y)-N-P),j=F+P,q=j-D,G=F-P,v=a(W*q),l=a(j*G),h=a(W*G),y=a(q*j);return new m(v,l,y,h)}add(E){g(E);const{a:M,d:C}=r,{ex:T,ey:N,ez:P,et:D}=this,{ex:F,ey:Y,ez:W,et:j}=E,q=a(T*F),G=a(N*Y),v=a(D*C*j),l=a(P*W),h=a((T+N)*(F+Y)-q-G),y=l-v,S=l+v,A=a(G-M*q),L=a(h*y),O=a(S*A),_=a(h*A),f=a(y*S);return new m(L,O,f,_)}subtract(E){return this.add(E.negate())}multiply(E){const M=E;gr("scalar",M,Zt,i);const{p:C,f:T}=I.wNAFCached(this,M,m.normalizeZ);return m.normalizeZ([C,T])[0]}multiplyUnsafe(E,M=m.ZERO){const C=E;return gr("scalar",C,Bn,i),C===Bn?m.ZERO:this.is0()||C===Zt?this:I.wNAFCachedUnsafe(this,C,m.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return I.wNAFCachedUnsafe(this,i).is0()}toAffine(E){return w(this,E)}clearCofactor(){return s===Zt?this:this.multiplyUnsafe(s)}static fromBytes(E,M=!1){return Nt(E),this.fromHex(E,M)}static fromHex(E,M=!1){const{d:C,a:T}=r,N=t.BYTES;E=Ke("pointHex",E,N),Hr("zip215",M);const P=E.slice(),D=E[N-1];P[N-1]=D&-129;const F=Ar(P),Y=M?o:t.ORDER;gr("pointHex.y",F,Bn,Y);const W=a(F*F),j=a(W-Zt),q=a(C*W-T);let{isValid:G,value:v}=c(j,q);if(!G)throw new Error("Point.fromHex: invalid y coordinate");const l=(v&Zt)===Zt,h=(D&128)!==0;if(!M&&v===Bn&&h)throw new Error("Point.fromHex: x=0 and x_0=1");return h!==l&&(v=a(-v)),m.fromAffine({x:v,y:F})}static fromPrivateScalar(E){return m.BASE.multiply(E)}toBytes(){const{x:E,y:M}=this.toAffine(),C=jr(M,t.BYTES);return C[C.length-1]|=E&Zt?128:0,C}toRawBytes(){return this.toBytes()}toHex(){return qr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}m.BASE=new m(r.Gx,r.Gy,Zt,a(r.Gx*r.Gy)),m.ZERO=new m(Bn,Zt,Zt,Bn),m.Fp=t,m.Fn=n;const I=Yd(m,n.BYTES*8);return m}function eg(r,e){Yr(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:n}=e,{BASE:s,Fp:i,Fn:o}=r,a=o.ORDER,c=e.randomBytes||kl,p=e.adjustScalarBytes||(P=>P),g=e.domain||((P,D,F)=>{if(Hr("phflag",F),D.length||F)throw new Error("Contexts/pre-hash are not supported");return P});function w(P){return o.create(P)}function B(P){return w(Ar(P))}function m(P){const D=i.BYTES;P=Ke("private key",P,D);const F=Ke("hashed private key",n(P),2*D),Y=p(F.slice(0,D)),W=F.slice(D,2*D),j=B(Y);return{head:Y,prefix:W,scalar:j}}function I(P){const{head:D,prefix:F,scalar:Y}=m(P),W=s.multiply(Y),j=W.toBytes();return{head:D,prefix:F,scalar:Y,point:W,pointBytes:j}}function k(P){return I(P).pointBytes}function E(P=Uint8Array.of(),...D){const F=Yt(...D);return B(n(g(F,Ke("context",P),!!t)))}function M(P,D,F={}){P=Ke("message",P),t&&(P=t(P));const{prefix:Y,scalar:W,pointBytes:j}=I(D),q=E(F.context,Y,P),G=s.multiply(q).toBytes(),v=E(F.context,G,j,P),l=w(q+v*W);gr("signature.s",l,Bn,a);const h=i.BYTES,y=Yt(G,jr(l,h));return Ke("result",y,h*2)}const C=Jp;function T(P,D,F,Y=C){const{context:W,zip215:j}=Y,q=i.BYTES;P=Ke("signature",P,2*q),D=Ke("message",D),F=Ke("publicKey",F,q),j!==void 0&&Hr("zip215",j),t&&(D=t(D));const G=Ar(P.slice(q,2*q));let v,l,h;try{v=r.fromHex(F,j),l=r.fromHex(P.slice(0,q),j),h=s.multiplyUnsafe(G)}catch{return!1}if(!j&&v.isSmallOrder())return!1;const y=E(W,l.toBytes(),v.toBytes(),D);return l.add(v.multiplyUnsafe(y)).subtract(h).clearCofactor().is0()}return s.precompute(8),{getPublicKey:k,sign:M,verify:T,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>c(i.BYTES),precompute(P=8,D=r.BASE){return D.precompute(P,!1)}},Point:r}}function tg(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Zr(e.n,r.nBitLength,!0),s={Fp:t,Fn:n,uvRatio:r.uvRatio},i={hash:r.hash,randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:s,eddsaOpts:i}}function ng(r,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:r})}function Ml(r){const{CURVE:e,curveOpts:t,eddsaOpts:n}=tg(r),s=Qp(e,t),i=eg(s,n);return ng(r,i)}const rg=ks;function fr(r,e){if(ms(r),ms(e),r<0||r>=1<<8*e)throw new Error("invalid I2OSP input: "+r);const t=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)t[n]=r&255,r>>>=8;return new Uint8Array(t)}function ig(r,e){const t=new Uint8Array(r.length);for(let n=0;n<r.length;n++)t[n]=r[n]^e[n];return t}function ms(r){if(!Number.isSafeInteger(r))throw new Error("number expected")}function Jd(r,e,t,n){Nt(r),Nt(e),ms(t),e.length>255&&(e=n(Yt(Di("H2C-OVERSIZE-DST-"),e)));const{outputLen:s,blockLen:i}=n,o=Math.ceil(t/s);if(t>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=Yt(e,fr(e.length,1)),c=fr(0,i),p=fr(t,2),g=new Array(o),w=n(Yt(c,r,p,fr(0,1),a));g[0]=n(Yt(w,fr(1,1),a));for(let m=1;m<=o;m++){const I=[ig(w,g[m-1]),fr(m+1,1),a];g[m]=n(Yt(...I))}return Yt(...g).slice(0,t)}function sg(r,e,t,n,s){if(Nt(r),Nt(e),ms(t),e.length>255){const i=Math.ceil(2*n/8);e=s.create({dkLen:i}).update(Di("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:t}).update(r).update(fr(t,2)).update(e).update(fr(e.length,1)).digest()}function Wu(r,e,t){Yr(t,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:n,k:s,m:i,hash:o,expand:a,DST:c}=t;if(!Yo(c)&&typeof c!="string")throw new Error("DST must be string or uint8array");if(!Op(t.hash))throw new Error("expected valid hash");Nt(r),ms(e);const p=typeof c=="string"?Di(c):c,g=n.toString(2).length,w=Math.ceil((g+s)/8),B=e*i*w;let m;if(a==="xmd")m=Jd(r,p,B,o);else if(a==="xof")m=sg(r,p,B,s,o);else if(a==="_internal_pass")m=r;else throw new Error('expand must be "xmd" or "xof"');const I=new Array(e);for(let k=0;k<e;k++){const E=new Array(i);for(let M=0;M<i;M++){const C=w*(M+k*i),T=m.subarray(C,C+w);E[M]=Ge(rg(T),n)}I[k]=E}return I}function og(r,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function n(i){return r.fromAffine(e(i))}function s(i){const o=i.clearCofactor();return o.equals(r.ZERO)?r.ZERO:(o.assertValidity(),o)}return{defaults:t,hashToCurve(i,o){const a=t.DST?t.DST:{},c=Object.assign({},t,a,o),p=Wu(i,2,c),g=n(p[0]),w=n(p[1]);return s(g.add(w))},encodeToCurve(i,o){const a=t.encodeDST?t.encodeDST:{},c=Object.assign({},t,a,o),p=Wu(i,1,c);return s(n(p[0]))},mapToCurve(i){if(!Array.isArray(i))throw new Error("expected array of bigints");for(const o of i)if(typeof o!="bigint")throw new Error("expected array of bigints");return s(n(i))}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ji=BigInt(0),si=BigInt(1),Fs=BigInt(2);function ag(r){return Yr(r,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...r})}function cg(r){const e=ag(r),{P:t,type:n,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const c=o||kl,p=a?255:448,g=a?32:56,w=BigInt(a?9:5),B=BigInt(a?121665:39081),m=a?Fs**BigInt(254):Fs**BigInt(447),I=a?BigInt(8)*Fs**BigInt(251)-si:BigInt(4)*Fs**BigInt(445)-si,k=m+I+si,E=W=>Ge(W,t),M=C(w);function C(W){return jr(E(W),g)}function T(W){const j=Ke("u coordinate",W,g);return a&&(j[31]&=127),E(Ar(j))}function N(W){return Ar(s(Ke("scalar",W,g)))}function P(W,j){const q=Y(T(j),N(W));if(q===ji)throw new Error("invalid private or public key received");return C(q)}function D(W){return P(W,M)}function F(W,j,q){const G=E(W*(j-q));return j=E(j-G),q=E(q+G),{x_2:j,x_3:q}}function Y(W,j){gr("u",W,ji,t),gr("scalar",j,m,k);const q=j,G=W;let v=si,l=ji,h=W,y=si,S=ji;for(let L=BigInt(p-1);L>=ji;L--){const O=q>>L&si;S^=O,{x_2:v,x_3:h}=F(S,v,h),{x_2:l,x_3:y}=F(S,l,y),S=O;const _=v+l,f=E(_*_),R=v-l,oe=E(R*R),ee=f-oe,ae=h+y,We=h-y,be=E(We*_),Ae=E(ae*R),yn=be+Ae,Re=be-Ae;h=E(yn*yn),y=E(G*E(Re*Re)),v=E(f*oe),l=E(ee*(f+E(B*ee)))}({x_2:v,x_3:h}=F(S,v,h)),{x_2:l,x_3:y}=F(S,l,y);const A=i(l);return E(v*A)}return{scalarMult:P,scalarMultBase:D,getSharedSecret:(W,j)=>P(W,j),getPublicKey:W=>D(W),utils:{randomPrivateKey:()=>c(g)},GuBytes:M.slice()}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lg=BigInt(0),Pn=BigInt(1),xo=BigInt(2),Xd=BigInt(3),Qd=BigInt(5),Tl=BigInt(8),Is={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Tl,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function ef(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),s=BigInt(80),i=Is.p,a=r*r%i*r%i,c=Xe(a,xo,i)*a%i,p=Xe(c,Pn,i)*r%i,g=Xe(p,Qd,i)*p%i,w=Xe(g,e,i)*g%i,B=Xe(w,t,i)*w%i,m=Xe(B,n,i)*B%i,I=Xe(m,s,i)*m%i,k=Xe(I,s,i)*m%i,E=Xe(k,e,i)*g%i;return{pow_p_5_8:Xe(E,xo,i)*r%i,b2:a}}function tf(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const _c=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Cl(r,e){const t=Is.p,n=Ge(e*e*e,t),s=Ge(n*n*e,t),i=ef(r*s).pow_p_5_8;let o=Ge(r*n*i,t);const a=Ge(e*o*o,t),c=o,p=Ge(o*_c,t),g=a===r,w=a===Ge(-r,t),B=a===Ge(-r*_c,t);return g&&(o=c),(w||B)&&(o=p),dr(o,t)&&(o=Ge(-o,t)),{isValid:g||w,value:o}}const ug=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],ne=Zr(Is.p,void 0,!0),ys={...Is,Fp:ne,hash:Jo,adjustScalarBytes:tf,uvRatio:Cl},ot=Ml(ys);function nf(r,e,t){if(e.length>255)throw new Error("Context is too big");return Yt(Di("SigEd25519 no Ed25519 collisions"),new Uint8Array([t?1:0,e.length]),e,r)}const dg=Ml({...ys,domain:nf}),fg=Ml(Object.assign({},ys,{domain:nf,prehash:Jo})),hg=(()=>{const r=Is.p;return cg({P:r,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:n}=ef(e);return Ge(Xe(t,Xd,r)*n,r)},adjustScalarBytes:tf})})();function rf(r){const e=Ke("pub",r),{y:t}=ot.Point.fromHex(e),n=BigInt(1);return ne.toBytes(ne.create((n+t)*ne.inv(n-t)))}const pg=rf;function gg(r){const e=ys.hash(r.subarray(0,32));return ys.adjustScalarBytes(e).subarray(0,32)}const mg=(ne.ORDER+Xd)/Tl,yg=ne.pow(xo,mg),Uu=ne.sqrt(ne.neg(ne.ONE));function wg(r){const e=(ne.ORDER-Qd)/Tl,t=BigInt(486662);let n=ne.sqr(r);n=ne.mul(n,xo);let s=ne.add(n,ne.ONE),i=ne.neg(t),o=ne.sqr(s),a=ne.mul(o,s),c=ne.mul(n,t);c=ne.mul(c,i),c=ne.add(c,o),c=ne.mul(c,i);let p=ne.sqr(a);o=ne.sqr(p),p=ne.mul(p,a),p=ne.mul(p,c),o=ne.mul(o,p);let g=ne.pow(o,e);g=ne.mul(g,p);let w=ne.mul(g,Uu);o=ne.sqr(g),o=ne.mul(o,a);let B=ne.eql(o,c),m=ne.cmov(w,g,B),I=ne.mul(i,n),k=ne.mul(g,r);k=ne.mul(k,yg);let E=ne.mul(k,Uu),M=ne.mul(c,n);o=ne.sqr(k),o=ne.mul(o,a);let C=ne.eql(o,M),T=ne.cmov(E,k,C);o=ne.sqr(m),o=ne.mul(o,a);let N=ne.eql(o,c),P=ne.cmov(I,i,N),D=ne.cmov(T,m,N),F=ne.isOdd(D);return D=ne.cmov(D,ne.neg(D),N!==F),{xMn:P,xMd:s,yMn:D,yMd:Pn}}const bg=Hp(ne,ne.neg(BigInt(486664)));function vg(r){const{xMn:e,xMd:t,yMn:n,yMd:s}=wg(r);let i=ne.mul(e,s);i=ne.mul(i,bg);let o=ne.mul(t,n),a=ne.sub(e,t),c=ne.add(e,t),p=ne.mul(o,c),g=ne.eql(p,ne.ZERO);i=ne.cmov(i,ne.ZERO,g),o=ne.cmov(o,ne.ONE,g),a=ne.cmov(a,ne.ONE,g),c=ne.cmov(c,ne.ONE,g);const[w,B]=Bl(ne,[o,c],!0);return{x:ne.mul(i,w),y:ne.mul(a,B)}}const Ll=og(ot.Point,r=>vg(r[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:ne.ORDER,m:1,k:128,expand:"xmd",hash:Jo}),Sg=Ll.hashToCurve,Eg=Ll.encodeToCurve;function Ya(r){if(!(r instanceof xt))throw new Error("RistrettoPoint expected")}const Ac=_c,_g=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Ag=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),kg=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Ig=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),zu=r=>Cl(Pn,r),xg=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Za=r=>ot.CURVE.Fp.create(Ar(r)&xg);function Du(r){const{d:e}=ot.CURVE,t=ot.CURVE.Fp.ORDER,n=ot.CURVE.Fp.create,s=n(Ac*r*r),i=n((s+Pn)*kg);let o=BigInt(-1);const a=n((o-e*s)*n(s+e));let{isValid:c,value:p}=Cl(i,a),g=n(p*r);dr(g,t)||(g=n(-g)),c||(p=g),c||(o=s);const w=n(o*(s-Pn)*Ig-a),B=p*p,m=n((p+p)*a),I=n(w*_g),k=n(Pn-B),E=n(Pn+B);return new ot.Point(n(m*E),n(k*I),n(I*E),n(m*k))}class xt{constructor(e){this.ep=e}static fromAffine(e){return new xt(ot.Point.fromAffine(e))}static hashToCurve(e){e=Ke("ristrettoHash",e,64);const t=Za(e.slice(0,32)),n=Du(t),s=Za(e.slice(32,64)),i=Du(s);return new xt(n.add(i))}static fromBytes(e){return Nt(e),this.fromHex(e)}static fromHex(e){e=Ke("ristrettoHex",e,32);const{a:t,d:n}=ot.CURVE,s=ne.ORDER,i=ne.create,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=Za(e);if(!Cp(jr(a,32),e)||dr(a,s))throw new Error(o);const c=i(a*a),p=i(Pn+t*c),g=i(Pn-t*c),w=i(p*p),B=i(g*g),m=i(t*n*w-B),{isValid:I,value:k}=zu(i(m*B)),E=i(k*g),M=i(k*E*m);let C=i((a+a)*E);dr(C,s)&&(C=i(-C));const T=i(p*M),N=i(C*T);if(!I||dr(N,s)||T===lg)throw new Error(o);return new xt(new ot.Point(C,T,Pn,N))}static msm(e,t){const n=Zr(ot.CURVE.n,ot.CURVE.nBitLength);return Rl(xt,n,e,t)}toBytes(){let{ex:e,ey:t,ez:n,et:s}=this.ep;const i=ne.ORDER,o=ne.create,a=o(o(n+t)*o(n-t)),c=o(e*t),p=o(c*c),{value:g}=zu(o(a*p)),w=o(g*a),B=o(g*c),m=o(w*B*s);let I;if(dr(s*m,i)){let E=o(t*Ac),M=o(e*Ac);e=E,t=M,I=o(w*Ag)}else I=B;dr(e*m,i)&&(t=o(-t));let k=o((n-t)*I);return dr(k,i)&&(k=o(-k)),jr(k,32)}toRawBytes(){return this.toBytes()}toHex(){return qr(this.toBytes())}toString(){return this.toHex()}equals(e){Ya(e);const{ex:t,ey:n}=this.ep,{ex:s,ey:i}=e.ep,o=ne.create,a=o(t*i)===o(n*s),c=o(n*i)===o(t*s);return a||c}add(e){return Ya(e),new xt(this.ep.add(e.ep))}subtract(e){return Ya(e),new xt(this.ep.subtract(e.ep))}multiply(e){return new xt(this.ep.multiply(e))}multiplyUnsafe(e){return new xt(this.ep.multiplyUnsafe(e))}double(){return new xt(this.ep.double())}negate(){return new xt(this.ep.negate())}}const Bg=(xt.BASE||(xt.BASE=new xt(ot.Point.BASE)),xt.ZERO||(xt.ZERO=new xt(ot.Point.ZERO)),xt),sf=(r,e)=>{const t=e.DST,n=typeof t=="string"?Di(t):t,s=Jd(r,n,64,Jo);return xt.hashToCurve(s)},Rg=sf,Mg=Object.freeze(Object.defineProperty({__proto__:null,ED25519_TORSION_SUBGROUP:ug,RistrettoPoint:Bg,ed25519:ot,ed25519_hasher:Ll,ed25519ctx:dg,ed25519ph:fg,edwardsToMontgomery:pg,edwardsToMontgomeryPriv:gg,edwardsToMontgomeryPub:rf,encodeToCurve:Eg,hashToCurve:Sg,hashToRistretto255:sf,hash_to_ristretto255:Rg,x25519:hg},Symbol.toStringTag,{value:"Module"}));var Pl={exports:{}};const Tg={},Cg=Object.freeze(Object.defineProperty({__proto__:null,default:Tg},Symbol.toStringTag,{value:"Module"})),Lg=nr(Cg);Pl.exports;(function(r){(function(e,t){function n(v,l){if(!v)throw new Error(l||"Assertion failed")}function s(v,l){v.super_=l;var h=function(){};h.prototype=l.prototype,v.prototype=new h,v.prototype.constructor=v}function i(v,l,h){if(i.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((l==="le"||l==="be")&&(h=l,l=10),this._init(v||0,l||10,h||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Lg.Buffer}catch{}i.isBN=function(l){return l instanceof i?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===i.wordSize&&Array.isArray(l.words)},i.max=function(l,h){return l.cmp(h)>0?l:h},i.min=function(l,h){return l.cmp(h)<0?l:h},i.prototype._init=function(l,h,y){if(typeof l=="number")return this._initNumber(l,h,y);if(typeof l=="object")return this._initArray(l,h,y);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),l=l.toString().replace(/\s+/g,"");var S=0;l[0]==="-"&&(S++,this.negative=1),S<l.length&&(h===16?this._parseHex(l,S,y):(this._parseBase(l,h,S),y==="le"&&this._initArray(this.toArray(),h,y)))},i.prototype._initNumber=function(l,h,y){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(n(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),h,y)},i.prototype._initArray=function(l,h,y){if(n(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var A,L,O=0;if(y==="be")for(S=l.length-1,A=0;S>=0;S-=3)L=l[S]|l[S-1]<<8|l[S-2]<<16,this.words[A]|=L<<O&67108863,this.words[A+1]=L>>>26-O&67108863,O+=24,O>=26&&(O-=26,A++);else if(y==="le")for(S=0,A=0;S<l.length;S+=3)L=l[S]|l[S+1]<<8|l[S+2]<<16,this.words[A]|=L<<O&67108863,this.words[A+1]=L>>>26-O&67108863,O+=24,O>=26&&(O-=26,A++);return this._strip()};function a(v,l){var h=v.charCodeAt(l);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;n(!1,"Invalid character in "+v)}function c(v,l,h){var y=a(v,h);return h-1>=l&&(y|=a(v,h-1)<<4),y}i.prototype._parseHex=function(l,h,y){this.length=Math.ceil((l.length-h)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var A=0,L=0,O;if(y==="be")for(S=l.length-1;S>=h;S-=2)O=c(l,h,S)<<A,this.words[L]|=O&67108863,A>=18?(A-=18,L+=1,this.words[L]|=O>>>26):A+=8;else{var _=l.length-h;for(S=_%2===0?h+1:h;S<l.length;S+=2)O=c(l,h,S)<<A,this.words[L]|=O&67108863,A>=18?(A-=18,L+=1,this.words[L]|=O>>>26):A+=8}this._strip()};function p(v,l,h,y){for(var S=0,A=0,L=Math.min(v.length,h),O=l;O<L;O++){var _=v.charCodeAt(O)-48;S*=y,_>=49?A=_-49+10:_>=17?A=_-17+10:A=_,n(_>=0&&A<y,"Invalid character"),S+=A}return S}i.prototype._parseBase=function(l,h,y){this.words=[0],this.length=1;for(var S=0,A=1;A<=67108863;A*=h)S++;S--,A=A/h|0;for(var L=l.length-y,O=L%S,_=Math.min(L,L-O)+y,f=0,R=y;R<_;R+=S)f=p(l,R,R+S,h),this.imuln(A),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(O!==0){var oe=1;for(f=p(l,R,l.length,h),R=0;R<O;R++)oe*=h;this.imuln(oe),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},i.prototype.copy=function(l){l.words=new Array(this.length);for(var h=0;h<this.length;h++)l.words[h]=this.words[h];l.length=this.length,l.negative=this.negative,l.red=this.red};function g(v,l){v.words=l.words,v.length=l.length,v.negative=l.negative,v.red=l.red}if(i.prototype._move=function(l){g(l,this)},i.prototype.clone=function(){var l=new i(null);return this.copy(l),l},i.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{i.prototype.inspect=w}else i.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(l,h){l=l||10,h=h|0||1;var y;if(l===16||l==="hex"){y="";for(var S=0,A=0,L=0;L<this.length;L++){var O=this.words[L],_=((O<<S|A)&16777215).toString(16);A=O>>>24-S&16777215,S+=2,S>=26&&(S-=26,L--),A!==0||L!==this.length-1?y=B[6-_.length]+_+y:y=_+y}for(A!==0&&(y=A.toString(16)+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(l===(l|0)&&l>=2&&l<=36){var f=m[l],R=I[l];y="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var ee=oe.modrn(R).toString(l);oe=oe.idivn(R),oe.isZero()?y=ee+y:y=B[f-ee.length]+ee+y}for(this.isZero()&&(y="0"+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(l,h){return this.toArrayLike(o,l,h)}),i.prototype.toArray=function(l,h){return this.toArrayLike(Array,l,h)};var k=function(l,h){return l.allocUnsafe?l.allocUnsafe(h):new l(h)};i.prototype.toArrayLike=function(l,h,y){this._strip();var S=this.byteLength(),A=y||Math.max(1,S);n(S<=A,"byte array longer than desired length"),n(A>0,"Requested array length <= 0");var L=k(l,A),O=h==="le"?"LE":"BE";return this["_toArrayLike"+O](L,S),L},i.prototype._toArrayLikeLE=function(l,h){for(var y=0,S=0,A=0,L=0;A<this.length;A++){var O=this.words[A]<<L|S;l[y++]=O&255,y<l.length&&(l[y++]=O>>8&255),y<l.length&&(l[y++]=O>>16&255),L===6?(y<l.length&&(l[y++]=O>>24&255),S=0,L=0):(S=O>>>24,L+=2)}if(y<l.length)for(l[y++]=S;y<l.length;)l[y++]=0},i.prototype._toArrayLikeBE=function(l,h){for(var y=l.length-1,S=0,A=0,L=0;A<this.length;A++){var O=this.words[A]<<L|S;l[y--]=O&255,y>=0&&(l[y--]=O>>8&255),y>=0&&(l[y--]=O>>16&255),L===6?(y>=0&&(l[y--]=O>>24&255),S=0,L=0):(S=O>>>24,L+=2)}if(y>=0)for(l[y--]=S;y>=0;)l[y--]=0},Math.clz32?i.prototype._countBits=function(l){return 32-Math.clz32(l)}:i.prototype._countBits=function(l){var h=l,y=0;return h>=4096&&(y+=13,h>>>=13),h>=64&&(y+=7,h>>>=7),h>=8&&(y+=4,h>>>=4),h>=2&&(y+=2,h>>>=2),y+h},i.prototype._zeroBits=function(l){if(l===0)return 26;var h=l,y=0;return h&8191||(y+=13,h>>>=13),h&127||(y+=7,h>>>=7),h&15||(y+=4,h>>>=4),h&3||(y+=2,h>>>=2),h&1||y++,y},i.prototype.bitLength=function(){var l=this.words[this.length-1],h=this._countBits(l);return(this.length-1)*26+h};function E(v){for(var l=new Array(v.bitLength()),h=0;h<l.length;h++){var y=h/26|0,S=h%26;l[h]=v.words[y]>>>S&1}return l}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,h=0;h<this.length;h++){var y=this._zeroBits(this.words[h]);if(l+=y,y!==26)break}return l},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},i.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var h=0;h<l.length;h++)this.words[h]=this.words[h]|l.words[h];return this._strip()},i.prototype.ior=function(l){return n((this.negative|l.negative)===0),this.iuor(l)},i.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},i.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},i.prototype.iuand=function(l){var h;this.length>l.length?h=l:h=this;for(var y=0;y<h.length;y++)this.words[y]=this.words[y]&l.words[y];return this.length=h.length,this._strip()},i.prototype.iand=function(l){return n((this.negative|l.negative)===0),this.iuand(l)},i.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},i.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},i.prototype.iuxor=function(l){var h,y;this.length>l.length?(h=this,y=l):(h=l,y=this);for(var S=0;S<y.length;S++)this.words[S]=h.words[S]^y.words[S];if(this!==h)for(;S<h.length;S++)this.words[S]=h.words[S];return this.length=h.length,this._strip()},i.prototype.ixor=function(l){return n((this.negative|l.negative)===0),this.iuxor(l)},i.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},i.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},i.prototype.inotn=function(l){n(typeof l=="number"&&l>=0);var h=Math.ceil(l/26)|0,y=l%26;this._expand(h),y>0&&h--;for(var S=0;S<h;S++)this.words[S]=~this.words[S]&67108863;return y>0&&(this.words[S]=~this.words[S]&67108863>>26-y),this._strip()},i.prototype.notn=function(l){return this.clone().inotn(l)},i.prototype.setn=function(l,h){n(typeof l=="number"&&l>=0);var y=l/26|0,S=l%26;return this._expand(y+1),h?this.words[y]=this.words[y]|1<<S:this.words[y]=this.words[y]&~(1<<S),this._strip()},i.prototype.iadd=function(l){var h;if(this.negative!==0&&l.negative===0)return this.negative=0,h=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,h=this.isub(l),l.negative=1,h._normSign();var y,S;this.length>l.length?(y=this,S=l):(y=l,S=this);for(var A=0,L=0;L<S.length;L++)h=(y.words[L]|0)+(S.words[L]|0)+A,this.words[L]=h&67108863,A=h>>>26;for(;A!==0&&L<y.length;L++)h=(y.words[L]|0)+A,this.words[L]=h&67108863,A=h>>>26;if(this.length=y.length,A!==0)this.words[this.length]=A,this.length++;else if(y!==this)for(;L<y.length;L++)this.words[L]=y.words[L];return this},i.prototype.add=function(l){var h;return l.negative!==0&&this.negative===0?(l.negative=0,h=this.sub(l),l.negative^=1,h):l.negative===0&&this.negative!==0?(this.negative=0,h=l.sub(this),this.negative=1,h):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},i.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var h=this.iadd(l);return l.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var y=this.cmp(l);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,A;y>0?(S=this,A=l):(S=l,A=this);for(var L=0,O=0;O<A.length;O++)h=(S.words[O]|0)-(A.words[O]|0)+L,L=h>>26,this.words[O]=h&67108863;for(;L!==0&&O<S.length;O++)h=(S.words[O]|0)+L,L=h>>26,this.words[O]=h&67108863;if(L===0&&O<S.length&&S!==this)for(;O<S.length;O++)this.words[O]=S.words[O];return this.length=Math.max(this.length,O),S!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(l){return this.clone().isub(l)};function M(v,l,h){h.negative=l.negative^v.negative;var y=v.length+l.length|0;h.length=y,y=y-1|0;var S=v.words[0]|0,A=l.words[0]|0,L=S*A,O=L&67108863,_=L/67108864|0;h.words[0]=O;for(var f=1;f<y;f++){for(var R=_>>>26,oe=_&67108863,ee=Math.min(f,l.length-1),ae=Math.max(0,f-v.length+1);ae<=ee;ae++){var We=f-ae|0;S=v.words[We]|0,A=l.words[ae]|0,L=S*A+oe,R+=L/67108864|0,oe=L&67108863}h.words[f]=oe|0,_=R|0}return _!==0?h.words[f]=_|0:h.length--,h._strip()}var C=function(l,h,y){var S=l.words,A=h.words,L=y.words,O=0,_,f,R,oe=S[0]|0,ee=oe&8191,ae=oe>>>13,We=S[1]|0,be=We&8191,Ae=We>>>13,yn=S[2]|0,Re=yn&8191,Ye=yn>>>13,qn=S[3]|0,ze=qn&8191,tt=qn>>>13,Ns=S[4]|0,je=Ns&8191,nt=Ns>>>13,Os=S[5]|0,Ze=Os&8191,$e=Os>>>13,cn=S[6]|0,Ve=cn&8191,rt=cn>>>13,Sn=S[7]|0,it=Sn&8191,b=Sn>>>13,u=S[8]|0,d=u&8191,x=u>>>13,U=S[9]|0,K=U&8191,V=U>>>13,ve=A[0]|0,we=ve&8191,me=ve>>>13,qe=A[1]|0,ge=qe&8191,ct=qe>>>13,bu=A[2]|0,lt=bu&8191,ut=bu>>>13,vu=A[3]|0,dt=vu&8191,ft=vu>>>13,Su=A[4]|0,ht=Su&8191,pt=Su>>>13,Eu=A[5]|0,gt=Eu&8191,mt=Eu>>>13,_u=A[6]|0,yt=_u&8191,wt=_u>>>13,Au=A[7]|0,bt=Au&8191,vt=Au>>>13,ku=A[8]|0,St=ku&8191,Et=ku>>>13,Iu=A[9]|0,_t=Iu&8191,At=Iu>>>13;y.negative=l.negative^h.negative,y.length=19,_=Math.imul(ee,we),f=Math.imul(ee,me),f=f+Math.imul(ae,we)|0,R=Math.imul(ae,me);var _a=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(_a>>>26)|0,_a&=67108863,_=Math.imul(be,we),f=Math.imul(be,me),f=f+Math.imul(Ae,we)|0,R=Math.imul(Ae,me),_=_+Math.imul(ee,ge)|0,f=f+Math.imul(ee,ct)|0,f=f+Math.imul(ae,ge)|0,R=R+Math.imul(ae,ct)|0;var Aa=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Aa>>>26)|0,Aa&=67108863,_=Math.imul(Re,we),f=Math.imul(Re,me),f=f+Math.imul(Ye,we)|0,R=Math.imul(Ye,me),_=_+Math.imul(be,ge)|0,f=f+Math.imul(be,ct)|0,f=f+Math.imul(Ae,ge)|0,R=R+Math.imul(Ae,ct)|0,_=_+Math.imul(ee,lt)|0,f=f+Math.imul(ee,ut)|0,f=f+Math.imul(ae,lt)|0,R=R+Math.imul(ae,ut)|0;var ka=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(ka>>>26)|0,ka&=67108863,_=Math.imul(ze,we),f=Math.imul(ze,me),f=f+Math.imul(tt,we)|0,R=Math.imul(tt,me),_=_+Math.imul(Re,ge)|0,f=f+Math.imul(Re,ct)|0,f=f+Math.imul(Ye,ge)|0,R=R+Math.imul(Ye,ct)|0,_=_+Math.imul(be,lt)|0,f=f+Math.imul(be,ut)|0,f=f+Math.imul(Ae,lt)|0,R=R+Math.imul(Ae,ut)|0,_=_+Math.imul(ee,dt)|0,f=f+Math.imul(ee,ft)|0,f=f+Math.imul(ae,dt)|0,R=R+Math.imul(ae,ft)|0;var Ia=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Ia>>>26)|0,Ia&=67108863,_=Math.imul(je,we),f=Math.imul(je,me),f=f+Math.imul(nt,we)|0,R=Math.imul(nt,me),_=_+Math.imul(ze,ge)|0,f=f+Math.imul(ze,ct)|0,f=f+Math.imul(tt,ge)|0,R=R+Math.imul(tt,ct)|0,_=_+Math.imul(Re,lt)|0,f=f+Math.imul(Re,ut)|0,f=f+Math.imul(Ye,lt)|0,R=R+Math.imul(Ye,ut)|0,_=_+Math.imul(be,dt)|0,f=f+Math.imul(be,ft)|0,f=f+Math.imul(Ae,dt)|0,R=R+Math.imul(Ae,ft)|0,_=_+Math.imul(ee,ht)|0,f=f+Math.imul(ee,pt)|0,f=f+Math.imul(ae,ht)|0,R=R+Math.imul(ae,pt)|0;var xa=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(xa>>>26)|0,xa&=67108863,_=Math.imul(Ze,we),f=Math.imul(Ze,me),f=f+Math.imul($e,we)|0,R=Math.imul($e,me),_=_+Math.imul(je,ge)|0,f=f+Math.imul(je,ct)|0,f=f+Math.imul(nt,ge)|0,R=R+Math.imul(nt,ct)|0,_=_+Math.imul(ze,lt)|0,f=f+Math.imul(ze,ut)|0,f=f+Math.imul(tt,lt)|0,R=R+Math.imul(tt,ut)|0,_=_+Math.imul(Re,dt)|0,f=f+Math.imul(Re,ft)|0,f=f+Math.imul(Ye,dt)|0,R=R+Math.imul(Ye,ft)|0,_=_+Math.imul(be,ht)|0,f=f+Math.imul(be,pt)|0,f=f+Math.imul(Ae,ht)|0,R=R+Math.imul(Ae,pt)|0,_=_+Math.imul(ee,gt)|0,f=f+Math.imul(ee,mt)|0,f=f+Math.imul(ae,gt)|0,R=R+Math.imul(ae,mt)|0;var Ba=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Ba>>>26)|0,Ba&=67108863,_=Math.imul(Ve,we),f=Math.imul(Ve,me),f=f+Math.imul(rt,we)|0,R=Math.imul(rt,me),_=_+Math.imul(Ze,ge)|0,f=f+Math.imul(Ze,ct)|0,f=f+Math.imul($e,ge)|0,R=R+Math.imul($e,ct)|0,_=_+Math.imul(je,lt)|0,f=f+Math.imul(je,ut)|0,f=f+Math.imul(nt,lt)|0,R=R+Math.imul(nt,ut)|0,_=_+Math.imul(ze,dt)|0,f=f+Math.imul(ze,ft)|0,f=f+Math.imul(tt,dt)|0,R=R+Math.imul(tt,ft)|0,_=_+Math.imul(Re,ht)|0,f=f+Math.imul(Re,pt)|0,f=f+Math.imul(Ye,ht)|0,R=R+Math.imul(Ye,pt)|0,_=_+Math.imul(be,gt)|0,f=f+Math.imul(be,mt)|0,f=f+Math.imul(Ae,gt)|0,R=R+Math.imul(Ae,mt)|0,_=_+Math.imul(ee,yt)|0,f=f+Math.imul(ee,wt)|0,f=f+Math.imul(ae,yt)|0,R=R+Math.imul(ae,wt)|0;var Ra=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Ra>>>26)|0,Ra&=67108863,_=Math.imul(it,we),f=Math.imul(it,me),f=f+Math.imul(b,we)|0,R=Math.imul(b,me),_=_+Math.imul(Ve,ge)|0,f=f+Math.imul(Ve,ct)|0,f=f+Math.imul(rt,ge)|0,R=R+Math.imul(rt,ct)|0,_=_+Math.imul(Ze,lt)|0,f=f+Math.imul(Ze,ut)|0,f=f+Math.imul($e,lt)|0,R=R+Math.imul($e,ut)|0,_=_+Math.imul(je,dt)|0,f=f+Math.imul(je,ft)|0,f=f+Math.imul(nt,dt)|0,R=R+Math.imul(nt,ft)|0,_=_+Math.imul(ze,ht)|0,f=f+Math.imul(ze,pt)|0,f=f+Math.imul(tt,ht)|0,R=R+Math.imul(tt,pt)|0,_=_+Math.imul(Re,gt)|0,f=f+Math.imul(Re,mt)|0,f=f+Math.imul(Ye,gt)|0,R=R+Math.imul(Ye,mt)|0,_=_+Math.imul(be,yt)|0,f=f+Math.imul(be,wt)|0,f=f+Math.imul(Ae,yt)|0,R=R+Math.imul(Ae,wt)|0,_=_+Math.imul(ee,bt)|0,f=f+Math.imul(ee,vt)|0,f=f+Math.imul(ae,bt)|0,R=R+Math.imul(ae,vt)|0;var Ma=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Ma>>>26)|0,Ma&=67108863,_=Math.imul(d,we),f=Math.imul(d,me),f=f+Math.imul(x,we)|0,R=Math.imul(x,me),_=_+Math.imul(it,ge)|0,f=f+Math.imul(it,ct)|0,f=f+Math.imul(b,ge)|0,R=R+Math.imul(b,ct)|0,_=_+Math.imul(Ve,lt)|0,f=f+Math.imul(Ve,ut)|0,f=f+Math.imul(rt,lt)|0,R=R+Math.imul(rt,ut)|0,_=_+Math.imul(Ze,dt)|0,f=f+Math.imul(Ze,ft)|0,f=f+Math.imul($e,dt)|0,R=R+Math.imul($e,ft)|0,_=_+Math.imul(je,ht)|0,f=f+Math.imul(je,pt)|0,f=f+Math.imul(nt,ht)|0,R=R+Math.imul(nt,pt)|0,_=_+Math.imul(ze,gt)|0,f=f+Math.imul(ze,mt)|0,f=f+Math.imul(tt,gt)|0,R=R+Math.imul(tt,mt)|0,_=_+Math.imul(Re,yt)|0,f=f+Math.imul(Re,wt)|0,f=f+Math.imul(Ye,yt)|0,R=R+Math.imul(Ye,wt)|0,_=_+Math.imul(be,bt)|0,f=f+Math.imul(be,vt)|0,f=f+Math.imul(Ae,bt)|0,R=R+Math.imul(Ae,vt)|0,_=_+Math.imul(ee,St)|0,f=f+Math.imul(ee,Et)|0,f=f+Math.imul(ae,St)|0,R=R+Math.imul(ae,Et)|0;var Ta=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Ta>>>26)|0,Ta&=67108863,_=Math.imul(K,we),f=Math.imul(K,me),f=f+Math.imul(V,we)|0,R=Math.imul(V,me),_=_+Math.imul(d,ge)|0,f=f+Math.imul(d,ct)|0,f=f+Math.imul(x,ge)|0,R=R+Math.imul(x,ct)|0,_=_+Math.imul(it,lt)|0,f=f+Math.imul(it,ut)|0,f=f+Math.imul(b,lt)|0,R=R+Math.imul(b,ut)|0,_=_+Math.imul(Ve,dt)|0,f=f+Math.imul(Ve,ft)|0,f=f+Math.imul(rt,dt)|0,R=R+Math.imul(rt,ft)|0,_=_+Math.imul(Ze,ht)|0,f=f+Math.imul(Ze,pt)|0,f=f+Math.imul($e,ht)|0,R=R+Math.imul($e,pt)|0,_=_+Math.imul(je,gt)|0,f=f+Math.imul(je,mt)|0,f=f+Math.imul(nt,gt)|0,R=R+Math.imul(nt,mt)|0,_=_+Math.imul(ze,yt)|0,f=f+Math.imul(ze,wt)|0,f=f+Math.imul(tt,yt)|0,R=R+Math.imul(tt,wt)|0,_=_+Math.imul(Re,bt)|0,f=f+Math.imul(Re,vt)|0,f=f+Math.imul(Ye,bt)|0,R=R+Math.imul(Ye,vt)|0,_=_+Math.imul(be,St)|0,f=f+Math.imul(be,Et)|0,f=f+Math.imul(Ae,St)|0,R=R+Math.imul(Ae,Et)|0,_=_+Math.imul(ee,_t)|0,f=f+Math.imul(ee,At)|0,f=f+Math.imul(ae,_t)|0,R=R+Math.imul(ae,At)|0;var Ca=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Ca>>>26)|0,Ca&=67108863,_=Math.imul(K,ge),f=Math.imul(K,ct),f=f+Math.imul(V,ge)|0,R=Math.imul(V,ct),_=_+Math.imul(d,lt)|0,f=f+Math.imul(d,ut)|0,f=f+Math.imul(x,lt)|0,R=R+Math.imul(x,ut)|0,_=_+Math.imul(it,dt)|0,f=f+Math.imul(it,ft)|0,f=f+Math.imul(b,dt)|0,R=R+Math.imul(b,ft)|0,_=_+Math.imul(Ve,ht)|0,f=f+Math.imul(Ve,pt)|0,f=f+Math.imul(rt,ht)|0,R=R+Math.imul(rt,pt)|0,_=_+Math.imul(Ze,gt)|0,f=f+Math.imul(Ze,mt)|0,f=f+Math.imul($e,gt)|0,R=R+Math.imul($e,mt)|0,_=_+Math.imul(je,yt)|0,f=f+Math.imul(je,wt)|0,f=f+Math.imul(nt,yt)|0,R=R+Math.imul(nt,wt)|0,_=_+Math.imul(ze,bt)|0,f=f+Math.imul(ze,vt)|0,f=f+Math.imul(tt,bt)|0,R=R+Math.imul(tt,vt)|0,_=_+Math.imul(Re,St)|0,f=f+Math.imul(Re,Et)|0,f=f+Math.imul(Ye,St)|0,R=R+Math.imul(Ye,Et)|0,_=_+Math.imul(be,_t)|0,f=f+Math.imul(be,At)|0,f=f+Math.imul(Ae,_t)|0,R=R+Math.imul(Ae,At)|0;var La=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(La>>>26)|0,La&=67108863,_=Math.imul(K,lt),f=Math.imul(K,ut),f=f+Math.imul(V,lt)|0,R=Math.imul(V,ut),_=_+Math.imul(d,dt)|0,f=f+Math.imul(d,ft)|0,f=f+Math.imul(x,dt)|0,R=R+Math.imul(x,ft)|0,_=_+Math.imul(it,ht)|0,f=f+Math.imul(it,pt)|0,f=f+Math.imul(b,ht)|0,R=R+Math.imul(b,pt)|0,_=_+Math.imul(Ve,gt)|0,f=f+Math.imul(Ve,mt)|0,f=f+Math.imul(rt,gt)|0,R=R+Math.imul(rt,mt)|0,_=_+Math.imul(Ze,yt)|0,f=f+Math.imul(Ze,wt)|0,f=f+Math.imul($e,yt)|0,R=R+Math.imul($e,wt)|0,_=_+Math.imul(je,bt)|0,f=f+Math.imul(je,vt)|0,f=f+Math.imul(nt,bt)|0,R=R+Math.imul(nt,vt)|0,_=_+Math.imul(ze,St)|0,f=f+Math.imul(ze,Et)|0,f=f+Math.imul(tt,St)|0,R=R+Math.imul(tt,Et)|0,_=_+Math.imul(Re,_t)|0,f=f+Math.imul(Re,At)|0,f=f+Math.imul(Ye,_t)|0,R=R+Math.imul(Ye,At)|0;var Pa=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Pa>>>26)|0,Pa&=67108863,_=Math.imul(K,dt),f=Math.imul(K,ft),f=f+Math.imul(V,dt)|0,R=Math.imul(V,ft),_=_+Math.imul(d,ht)|0,f=f+Math.imul(d,pt)|0,f=f+Math.imul(x,ht)|0,R=R+Math.imul(x,pt)|0,_=_+Math.imul(it,gt)|0,f=f+Math.imul(it,mt)|0,f=f+Math.imul(b,gt)|0,R=R+Math.imul(b,mt)|0,_=_+Math.imul(Ve,yt)|0,f=f+Math.imul(Ve,wt)|0,f=f+Math.imul(rt,yt)|0,R=R+Math.imul(rt,wt)|0,_=_+Math.imul(Ze,bt)|0,f=f+Math.imul(Ze,vt)|0,f=f+Math.imul($e,bt)|0,R=R+Math.imul($e,vt)|0,_=_+Math.imul(je,St)|0,f=f+Math.imul(je,Et)|0,f=f+Math.imul(nt,St)|0,R=R+Math.imul(nt,Et)|0,_=_+Math.imul(ze,_t)|0,f=f+Math.imul(ze,At)|0,f=f+Math.imul(tt,_t)|0,R=R+Math.imul(tt,At)|0;var Na=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Na>>>26)|0,Na&=67108863,_=Math.imul(K,ht),f=Math.imul(K,pt),f=f+Math.imul(V,ht)|0,R=Math.imul(V,pt),_=_+Math.imul(d,gt)|0,f=f+Math.imul(d,mt)|0,f=f+Math.imul(x,gt)|0,R=R+Math.imul(x,mt)|0,_=_+Math.imul(it,yt)|0,f=f+Math.imul(it,wt)|0,f=f+Math.imul(b,yt)|0,R=R+Math.imul(b,wt)|0,_=_+Math.imul(Ve,bt)|0,f=f+Math.imul(Ve,vt)|0,f=f+Math.imul(rt,bt)|0,R=R+Math.imul(rt,vt)|0,_=_+Math.imul(Ze,St)|0,f=f+Math.imul(Ze,Et)|0,f=f+Math.imul($e,St)|0,R=R+Math.imul($e,Et)|0,_=_+Math.imul(je,_t)|0,f=f+Math.imul(je,At)|0,f=f+Math.imul(nt,_t)|0,R=R+Math.imul(nt,At)|0;var Oa=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Oa>>>26)|0,Oa&=67108863,_=Math.imul(K,gt),f=Math.imul(K,mt),f=f+Math.imul(V,gt)|0,R=Math.imul(V,mt),_=_+Math.imul(d,yt)|0,f=f+Math.imul(d,wt)|0,f=f+Math.imul(x,yt)|0,R=R+Math.imul(x,wt)|0,_=_+Math.imul(it,bt)|0,f=f+Math.imul(it,vt)|0,f=f+Math.imul(b,bt)|0,R=R+Math.imul(b,vt)|0,_=_+Math.imul(Ve,St)|0,f=f+Math.imul(Ve,Et)|0,f=f+Math.imul(rt,St)|0,R=R+Math.imul(rt,Et)|0,_=_+Math.imul(Ze,_t)|0,f=f+Math.imul(Ze,At)|0,f=f+Math.imul($e,_t)|0,R=R+Math.imul($e,At)|0;var Wa=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Wa>>>26)|0,Wa&=67108863,_=Math.imul(K,yt),f=Math.imul(K,wt),f=f+Math.imul(V,yt)|0,R=Math.imul(V,wt),_=_+Math.imul(d,bt)|0,f=f+Math.imul(d,vt)|0,f=f+Math.imul(x,bt)|0,R=R+Math.imul(x,vt)|0,_=_+Math.imul(it,St)|0,f=f+Math.imul(it,Et)|0,f=f+Math.imul(b,St)|0,R=R+Math.imul(b,Et)|0,_=_+Math.imul(Ve,_t)|0,f=f+Math.imul(Ve,At)|0,f=f+Math.imul(rt,_t)|0,R=R+Math.imul(rt,At)|0;var Ua=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Ua>>>26)|0,Ua&=67108863,_=Math.imul(K,bt),f=Math.imul(K,vt),f=f+Math.imul(V,bt)|0,R=Math.imul(V,vt),_=_+Math.imul(d,St)|0,f=f+Math.imul(d,Et)|0,f=f+Math.imul(x,St)|0,R=R+Math.imul(x,Et)|0,_=_+Math.imul(it,_t)|0,f=f+Math.imul(it,At)|0,f=f+Math.imul(b,_t)|0,R=R+Math.imul(b,At)|0;var za=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(za>>>26)|0,za&=67108863,_=Math.imul(K,St),f=Math.imul(K,Et),f=f+Math.imul(V,St)|0,R=Math.imul(V,Et),_=_+Math.imul(d,_t)|0,f=f+Math.imul(d,At)|0,f=f+Math.imul(x,_t)|0,R=R+Math.imul(x,At)|0;var Da=(O+_|0)+((f&8191)<<13)|0;O=(R+(f>>>13)|0)+(Da>>>26)|0,Da&=67108863,_=Math.imul(K,_t),f=Math.imul(K,At),f=f+Math.imul(V,_t)|0,R=Math.imul(V,At);var Fa=(O+_|0)+((f&8191)<<13)|0;return O=(R+(f>>>13)|0)+(Fa>>>26)|0,Fa&=67108863,L[0]=_a,L[1]=Aa,L[2]=ka,L[3]=Ia,L[4]=xa,L[5]=Ba,L[6]=Ra,L[7]=Ma,L[8]=Ta,L[9]=Ca,L[10]=La,L[11]=Pa,L[12]=Na,L[13]=Oa,L[14]=Wa,L[15]=Ua,L[16]=za,L[17]=Da,L[18]=Fa,O!==0&&(L[19]=O,y.length++),y};Math.imul||(C=M);function T(v,l,h){h.negative=l.negative^v.negative,h.length=v.length+l.length;for(var y=0,S=0,A=0;A<h.length-1;A++){var L=S;S=0;for(var O=y&67108863,_=Math.min(A,l.length-1),f=Math.max(0,A-v.length+1);f<=_;f++){var R=A-f,oe=v.words[R]|0,ee=l.words[f]|0,ae=oe*ee,We=ae&67108863;L=L+(ae/67108864|0)|0,We=We+O|0,O=We&67108863,L=L+(We>>>26)|0,S+=L>>>26,L&=67108863}h.words[A]=O,y=L,L=S}return y!==0?h.words[A]=y:h.length--,h._strip()}function N(v,l,h){return T(v,l,h)}i.prototype.mulTo=function(l,h){var y,S=this.length+l.length;return this.length===10&&l.length===10?y=C(this,l,h):S<63?y=M(this,l,h):S<1024?y=T(this,l,h):y=N(this,l,h),y},i.prototype.mul=function(l){var h=new i(null);return h.words=new Array(this.length+l.length),this.mulTo(l,h)},i.prototype.mulf=function(l){var h=new i(null);return h.words=new Array(this.length+l.length),N(this,l,h)},i.prototype.imul=function(l){return this.clone().mulTo(l,this)},i.prototype.imuln=function(l){var h=l<0;h&&(l=-l),n(typeof l=="number"),n(l<67108864);for(var y=0,S=0;S<this.length;S++){var A=(this.words[S]|0)*l,L=(A&67108863)+(y&67108863);y>>=26,y+=A/67108864|0,y+=L>>>26,this.words[S]=L&67108863}return y!==0&&(this.words[S]=y,this.length++),this.length=l===0?1:this.length,h?this.ineg():this},i.prototype.muln=function(l){return this.clone().imuln(l)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(l){var h=E(l);if(h.length===0)return new i(1);for(var y=this,S=0;S<h.length&&h[S]===0;S++,y=y.sqr());if(++S<h.length)for(var A=y.sqr();S<h.length;S++,A=A.sqr())h[S]!==0&&(y=y.mul(A));return y},i.prototype.iushln=function(l){n(typeof l=="number"&&l>=0);var h=l%26,y=(l-h)/26,S=67108863>>>26-h<<26-h,A;if(h!==0){var L=0;for(A=0;A<this.length;A++){var O=this.words[A]&S,_=(this.words[A]|0)-O<<h;this.words[A]=_|L,L=O>>>26-h}L&&(this.words[A]=L,this.length++)}if(y!==0){for(A=this.length-1;A>=0;A--)this.words[A+y]=this.words[A];for(A=0;A<y;A++)this.words[A]=0;this.length+=y}return this._strip()},i.prototype.ishln=function(l){return n(this.negative===0),this.iushln(l)},i.prototype.iushrn=function(l,h,y){n(typeof l=="number"&&l>=0);var S;h?S=(h-h%26)/26:S=0;var A=l%26,L=Math.min((l-A)/26,this.length),O=67108863^67108863>>>A<<A,_=y;if(S-=L,S=Math.max(0,S),_){for(var f=0;f<L;f++)_.words[f]=this.words[f];_.length=L}if(L!==0)if(this.length>L)for(this.length-=L,f=0;f<this.length;f++)this.words[f]=this.words[f+L];else this.words[0]=0,this.length=1;var R=0;for(f=this.length-1;f>=0&&(R!==0||f>=S);f--){var oe=this.words[f]|0;this.words[f]=R<<26-A|oe>>>A,R=oe&O}return _&&R!==0&&(_.words[_.length++]=R),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(l,h,y){return n(this.negative===0),this.iushrn(l,h,y)},i.prototype.shln=function(l){return this.clone().ishln(l)},i.prototype.ushln=function(l){return this.clone().iushln(l)},i.prototype.shrn=function(l){return this.clone().ishrn(l)},i.prototype.ushrn=function(l){return this.clone().iushrn(l)},i.prototype.testn=function(l){n(typeof l=="number"&&l>=0);var h=l%26,y=(l-h)/26,S=1<<h;if(this.length<=y)return!1;var A=this.words[y];return!!(A&S)},i.prototype.imaskn=function(l){n(typeof l=="number"&&l>=0);var h=l%26,y=(l-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(h!==0&&y++,this.length=Math.min(y,this.length),h!==0){var S=67108863^67108863>>>h<<h;this.words[this.length-1]&=S}return this._strip()},i.prototype.maskn=function(l){return this.clone().imaskn(l)},i.prototype.iaddn=function(l){return n(typeof l=="number"),n(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},i.prototype._iaddn=function(l){this.words[0]+=l;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(l){if(n(typeof l=="number"),n(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(l){return this.clone().iaddn(l)},i.prototype.subn=function(l){return this.clone().isubn(l)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(l,h,y){var S=l.length+y,A;this._expand(S);var L,O=0;for(A=0;A<l.length;A++){L=(this.words[A+y]|0)+O;var _=(l.words[A]|0)*h;L-=_&67108863,O=(L>>26)-(_/67108864|0),this.words[A+y]=L&67108863}for(;A<this.length-y;A++)L=(this.words[A+y]|0)+O,O=L>>26,this.words[A+y]=L&67108863;if(O===0)return this._strip();for(n(O===-1),O=0,A=0;A<this.length;A++)L=-(this.words[A]|0)+O,O=L>>26,this.words[A]=L&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(l,h){var y=this.length-l.length,S=this.clone(),A=l,L=A.words[A.length-1]|0,O=this._countBits(L);y=26-O,y!==0&&(A=A.ushln(y),S.iushln(y),L=A.words[A.length-1]|0);var _=S.length-A.length,f;if(h!=="mod"){f=new i(null),f.length=_+1,f.words=new Array(f.length);for(var R=0;R<f.length;R++)f.words[R]=0}var oe=S.clone()._ishlnsubmul(A,1,_);oe.negative===0&&(S=oe,f&&(f.words[_]=1));for(var ee=_-1;ee>=0;ee--){var ae=(S.words[A.length+ee]|0)*67108864+(S.words[A.length+ee-1]|0);for(ae=Math.min(ae/L|0,67108863),S._ishlnsubmul(A,ae,ee);S.negative!==0;)ae--,S.negative=0,S._ishlnsubmul(A,1,ee),S.isZero()||(S.negative^=1);f&&(f.words[ee]=ae)}return f&&f._strip(),S._strip(),h!=="div"&&y!==0&&S.iushrn(y),{div:f||null,mod:S}},i.prototype.divmod=function(l,h,y){if(n(!l.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var S,A,L;return this.negative!==0&&l.negative===0?(L=this.neg().divmod(l,h),h!=="mod"&&(S=L.div.neg()),h!=="div"&&(A=L.mod.neg(),y&&A.negative!==0&&A.iadd(l)),{div:S,mod:A}):this.negative===0&&l.negative!==0?(L=this.divmod(l.neg(),h),h!=="mod"&&(S=L.div.neg()),{div:S,mod:L.mod}):this.negative&l.negative?(L=this.neg().divmod(l.neg(),h),h!=="div"&&(A=L.mod.neg(),y&&A.negative!==0&&A.isub(l)),{div:L.div,mod:A}):l.length>this.length||this.cmp(l)<0?{div:new i(0),mod:this}:l.length===1?h==="div"?{div:this.divn(l.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new i(this.modrn(l.words[0]))}:this._wordDiv(l,h)},i.prototype.div=function(l){return this.divmod(l,"div",!1).div},i.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},i.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},i.prototype.divRound=function(l){var h=this.divmod(l);if(h.mod.isZero())return h.div;var y=h.div.negative!==0?h.mod.isub(l):h.mod,S=l.ushrn(1),A=l.andln(1),L=y.cmp(S);return L<0||A===1&&L===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(l){var h=l<0;h&&(l=-l),n(l<=67108863);for(var y=(1<<26)%l,S=0,A=this.length-1;A>=0;A--)S=(y*S+(this.words[A]|0))%l;return h?-S:S},i.prototype.modn=function(l){return this.modrn(l)},i.prototype.idivn=function(l){var h=l<0;h&&(l=-l),n(l<=67108863);for(var y=0,S=this.length-1;S>=0;S--){var A=(this.words[S]|0)+y*67108864;this.words[S]=A/l|0,y=A%l}return this._strip(),h?this.ineg():this},i.prototype.divn=function(l){return this.clone().idivn(l)},i.prototype.egcd=function(l){n(l.negative===0),n(!l.isZero());var h=this,y=l.clone();h.negative!==0?h=h.umod(l):h=h.clone();for(var S=new i(1),A=new i(0),L=new i(0),O=new i(1),_=0;h.isEven()&&y.isEven();)h.iushrn(1),y.iushrn(1),++_;for(var f=y.clone(),R=h.clone();!h.isZero();){for(var oe=0,ee=1;!(h.words[0]&ee)&&oe<26;++oe,ee<<=1);if(oe>0)for(h.iushrn(oe);oe-- >0;)(S.isOdd()||A.isOdd())&&(S.iadd(f),A.isub(R)),S.iushrn(1),A.iushrn(1);for(var ae=0,We=1;!(y.words[0]&We)&&ae<26;++ae,We<<=1);if(ae>0)for(y.iushrn(ae);ae-- >0;)(L.isOdd()||O.isOdd())&&(L.iadd(f),O.isub(R)),L.iushrn(1),O.iushrn(1);h.cmp(y)>=0?(h.isub(y),S.isub(L),A.isub(O)):(y.isub(h),L.isub(S),O.isub(A))}return{a:L,b:O,gcd:y.iushln(_)}},i.prototype._invmp=function(l){n(l.negative===0),n(!l.isZero());var h=this,y=l.clone();h.negative!==0?h=h.umod(l):h=h.clone();for(var S=new i(1),A=new i(0),L=y.clone();h.cmpn(1)>0&&y.cmpn(1)>0;){for(var O=0,_=1;!(h.words[0]&_)&&O<26;++O,_<<=1);if(O>0)for(h.iushrn(O);O-- >0;)S.isOdd()&&S.iadd(L),S.iushrn(1);for(var f=0,R=1;!(y.words[0]&R)&&f<26;++f,R<<=1);if(f>0)for(y.iushrn(f);f-- >0;)A.isOdd()&&A.iadd(L),A.iushrn(1);h.cmp(y)>=0?(h.isub(y),S.isub(A)):(y.isub(h),A.isub(S))}var oe;return h.cmpn(1)===0?oe=S:oe=A,oe.cmpn(0)<0&&oe.iadd(l),oe},i.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var h=this.clone(),y=l.clone();h.negative=0,y.negative=0;for(var S=0;h.isEven()&&y.isEven();S++)h.iushrn(1),y.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;y.isEven();)y.iushrn(1);var A=h.cmp(y);if(A<0){var L=h;h=y,y=L}else if(A===0||y.cmpn(1)===0)break;h.isub(y)}while(!0);return y.iushln(S)},i.prototype.invm=function(l){return this.egcd(l).a.umod(l)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(l){return this.words[0]&l},i.prototype.bincn=function(l){n(typeof l=="number");var h=l%26,y=(l-h)/26,S=1<<h;if(this.length<=y)return this._expand(y+1),this.words[y]|=S,this;for(var A=S,L=y;A!==0&&L<this.length;L++){var O=this.words[L]|0;O+=A,A=O>>>26,O&=67108863,this.words[L]=O}return A!==0&&(this.words[L]=A,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(l){var h=l<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var y;if(this.length>1)y=1;else{h&&(l=-l),n(l<=67108863,"Number is too big");var S=this.words[0]|0;y=S===l?0:S<l?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var h=this.ucmp(l);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var h=0,y=this.length-1;y>=0;y--){var S=this.words[y]|0,A=l.words[y]|0;if(S!==A){S<A?h=-1:S>A&&(h=1);break}}return h},i.prototype.gtn=function(l){return this.cmpn(l)===1},i.prototype.gt=function(l){return this.cmp(l)===1},i.prototype.gten=function(l){return this.cmpn(l)>=0},i.prototype.gte=function(l){return this.cmp(l)>=0},i.prototype.ltn=function(l){return this.cmpn(l)===-1},i.prototype.lt=function(l){return this.cmp(l)===-1},i.prototype.lten=function(l){return this.cmpn(l)<=0},i.prototype.lte=function(l){return this.cmp(l)<=0},i.prototype.eqn=function(l){return this.cmpn(l)===0},i.prototype.eq=function(l){return this.cmp(l)===0},i.red=function(l){return new q(l)},i.prototype.toRed=function(l){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(l){return this.red=l,this},i.prototype.forceRed=function(l){return n(!this.red,"Already a number in reduction context"),this._forceRed(l)},i.prototype.redAdd=function(l){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},i.prototype.redIAdd=function(l){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},i.prototype.redSub=function(l){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},i.prototype.redISub=function(l){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},i.prototype.redShl=function(l){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},i.prototype.redMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},i.prototype.redIMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(l){return n(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var P={k256:null,p224:null,p192:null,p25519:null};function D(v,l){this.name=v,this.p=new i(l,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var l=new i(null);return l.words=new Array(Math.ceil(this.n/13)),l},D.prototype.ireduce=function(l){var h=l,y;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),y=h.bitLength();while(y>this.n);var S=y<this.n?-1:h.ucmp(this.p);return S===0?(h.words[0]=0,h.length=1):S>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},D.prototype.split=function(l,h){l.iushrn(this.n,0,h)},D.prototype.imulK=function(l){return l.imul(this.k)};function F(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(F,D),F.prototype.split=function(l,h){for(var y=4194303,S=Math.min(l.length,9),A=0;A<S;A++)h.words[A]=l.words[A];if(h.length=S,l.length<=9){l.words[0]=0,l.length=1;return}var L=l.words[9];for(h.words[h.length++]=L&y,A=10;A<l.length;A++){var O=l.words[A]|0;l.words[A-10]=(O&y)<<4|L>>>22,L=O}L>>>=22,l.words[A-10]=L,L===0&&l.length>10?l.length-=10:l.length-=9},F.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var h=0,y=0;y<l.length;y++){var S=l.words[y]|0;h+=S*977,l.words[y]=h&67108863,h=S*64+(h/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function Y(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(Y,D);function W(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(W,D);function j(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(j,D),j.prototype.imulK=function(l){for(var h=0,y=0;y<l.length;y++){var S=(l.words[y]|0)*19+h,A=S&67108863;S>>>=26,l.words[y]=A,h=S}return h!==0&&(l.words[l.length++]=h),l},i._prime=function(l){if(P[l])return P[l];var h;if(l==="k256")h=new F;else if(l==="p224")h=new Y;else if(l==="p192")h=new W;else if(l==="p25519")h=new j;else throw new Error("Unknown prime "+l);return P[l]=h,h};function q(v){if(typeof v=="string"){var l=i._prime(v);this.m=l.p,this.prime=l}else n(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}q.prototype._verify1=function(l){n(l.negative===0,"red works only with positives"),n(l.red,"red works only with red numbers")},q.prototype._verify2=function(l,h){n((l.negative|h.negative)===0,"red works only with positives"),n(l.red&&l.red===h.red,"red works only with red numbers")},q.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(g(l,l.umod(this.m)._forceRed(this)),l)},q.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},q.prototype.add=function(l,h){this._verify2(l,h);var y=l.add(h);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},q.prototype.iadd=function(l,h){this._verify2(l,h);var y=l.iadd(h);return y.cmp(this.m)>=0&&y.isub(this.m),y},q.prototype.sub=function(l,h){this._verify2(l,h);var y=l.sub(h);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},q.prototype.isub=function(l,h){this._verify2(l,h);var y=l.isub(h);return y.cmpn(0)<0&&y.iadd(this.m),y},q.prototype.shl=function(l,h){return this._verify1(l),this.imod(l.ushln(h))},q.prototype.imul=function(l,h){return this._verify2(l,h),this.imod(l.imul(h))},q.prototype.mul=function(l,h){return this._verify2(l,h),this.imod(l.mul(h))},q.prototype.isqr=function(l){return this.imul(l,l.clone())},q.prototype.sqr=function(l){return this.mul(l,l)},q.prototype.sqrt=function(l){if(l.isZero())return l.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(l,y)}for(var S=this.m.subn(1),A=0;!S.isZero()&&S.andln(1)===0;)A++,S.iushrn(1);n(!S.isZero());var L=new i(1).toRed(this),O=L.redNeg(),_=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,_).cmp(O)!==0;)f.redIAdd(O);for(var R=this.pow(f,S),oe=this.pow(l,S.addn(1).iushrn(1)),ee=this.pow(l,S),ae=A;ee.cmp(L)!==0;){for(var We=ee,be=0;We.cmp(L)!==0;be++)We=We.redSqr();n(be<ae);var Ae=this.pow(R,new i(1).iushln(ae-be-1));oe=oe.redMul(Ae),R=Ae.redSqr(),ee=ee.redMul(R),ae=be}return oe},q.prototype.invm=function(l){var h=l._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},q.prototype.pow=function(l,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return l.clone();var y=4,S=new Array(1<<y);S[0]=new i(1).toRed(this),S[1]=l;for(var A=2;A<S.length;A++)S[A]=this.mul(S[A-1],l);var L=S[0],O=0,_=0,f=h.bitLength()%26;for(f===0&&(f=26),A=h.length-1;A>=0;A--){for(var R=h.words[A],oe=f-1;oe>=0;oe--){var ee=R>>oe&1;if(L!==S[0]&&(L=this.sqr(L)),ee===0&&O===0){_=0;continue}O<<=1,O|=ee,_++,!(_!==y&&(A!==0||oe!==0))&&(L=this.mul(L,S[O]),_=0,O=0)}f=26}return L},q.prototype.convertTo=function(l){var h=l.umod(this.m);return h===l?h.clone():h},q.prototype.convertFrom=function(l){var h=l.clone();return h.red=null,h},i.mont=function(l){return new G(l)};function G(v){q.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(G,q),G.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},G.prototype.convertFrom=function(l){var h=this.imod(l.mul(this.rinv));return h.red=null,h},G.prototype.imul=function(l,h){if(l.isZero()||h.isZero())return l.words[0]=0,l.length=1,l;var y=l.imul(h),S=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=y.isub(S).iushrn(this.shift),L=A;return A.cmp(this.m)>=0?L=A.isub(this.m):A.cmpn(0)<0&&(L=A.iadd(this.m)),L._forceRed(this)},G.prototype.mul=function(l,h){if(l.isZero()||h.isZero())return new i(0)._forceRed(this);var y=l.mul(h),S=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=y.isub(S).iushrn(this.shift),L=A;return A.cmp(this.m)>=0?L=A.isub(this.m):A.cmpn(0)<0&&(L=A.iadd(this.m)),L._forceRed(this)},G.prototype.invm=function(l){var h=this.imod(l._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,Qt)})(Pl);var of=Pl.exports;const Fu=As(of);var kc={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,e){var t=fe,n=t.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(s(t,e),e.Buffer=i);function i(o,a,c){return n(o,a,c)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=n(o);return a!==void 0?typeof c=="string"?p.fill(a,c):p.fill(a):p.fill(0),p},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(kc,kc.exports);var af=kc.exports,Ks=af.Buffer;function Pg(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var o=r.length,a=r.charAt(0),c=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=Ks.from(m)),!Ks.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var I=0,k=0,E=0,M=m.length;E!==M&&m[E]===0;)E++,I++;for(var C=(M-E)*p+1>>>0,T=new Uint8Array(C);E!==M;){for(var N=m[E],P=0,D=C-1;(N!==0||P<k)&&D!==-1;D--,P++)N+=256*T[D]>>>0,T[D]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");k=P,E++}for(var F=C-k;F!==C&&T[F]===0;)F++;for(var Y=a.repeat(I);F<C;++F)Y+=r.charAt(T[F]);return Y}function w(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return Ks.alloc(0);for(var I=0,k=0,E=0;m[I]===a;)k++,I++;for(var M=(m.length-I)*c+1>>>0,C=new Uint8Array(M);I<m.length;){var T=m.charCodeAt(I);if(T>255)return;var N=e[T];if(N===255)return;for(var P=0,D=M-1;(N!==0||P<E)&&D!==-1;D--,P++)N+=o*C[D]>>>0,C[D]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");E=P,I++}for(var F=M-E;F!==M&&C[F]===0;)F++;var Y=Ks.allocUnsafe(k+(M-F));Y.fill(0,0,k);for(var W=k;F!==M;)Y[W++]=C[F++];return Y}function B(m){var I=w(m);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:w,decode:B}}var Ng=Pg,Og=Ng,Wg="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ug=Og(Wg);const Dt=As(Ug),Ku=Ud;var zt={},$s=af.Buffer;function zg(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var o=r.length,a=r.charAt(0),c=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=$s.from(m)),!$s.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var I=0,k=0,E=0,M=m.length;E!==M&&m[E]===0;)E++,I++;for(var C=(M-E)*p+1>>>0,T=new Uint8Array(C);E!==M;){for(var N=m[E],P=0,D=C-1;(N!==0||P<k)&&D!==-1;D--,P++)N+=256*T[D]>>>0,T[D]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");k=P,E++}for(var F=C-k;F!==C&&T[F]===0;)F++;for(var Y=a.repeat(I);F<C;++F)Y+=r.charAt(T[F]);return Y}function w(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return $s.alloc(0);for(var I=0,k=0,E=0;m[I]===a;)k++,I++;for(var M=(m.length-I)*c+1>>>0,C=new Uint8Array(M);I<m.length;){var T=m.charCodeAt(I);if(T>255)return;var N=e[T];if(N===255)return;for(var P=0,D=M-1;(N!==0||P<E)&&D!==-1;D--,P++)N+=o*C[D]>>>0,C[D]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");E=P,I++}for(var F=M-E;F!==M&&C[F]===0;)F++;var Y=$s.allocUnsafe(k+(M-F));Y.fill(0,0,k);for(var W=k;F!==M;)Y[W++]=C[F++];return Y}function B(m){var I=w(m);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:w,decode:B}}var Dg=zg,Fg=Dg,Kg="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",$g=Fg(Kg);function Jn(r,e,t){return e<=r&&r<=t}function Qo(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function qg(r){for(var e=String(r),t=e.length,n=0,s=[];n<t;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===t-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),n+=1}else s.push(65533)}n+=1}return s}function Hg(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Bo=-1;function Nl(r){this.tokens=[].slice.call(r)}Nl.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Bo},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var Mi=-1;function Ja(r,e){if(r)throw TypeError("Decoder error");return e||65533}var Ro="utf-8";function Mo(r,e){if(!(this instanceof Mo))return new Mo(r,e);if(r=r!==void 0?String(r).toLowerCase():Ro,r!==Ro)throw new Error("Encoding not supported. Only utf-8 is supported");e=Qo(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Mo.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=Qo(t),this._streaming||(this._decoder=new jg({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new Nl(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Mi);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Mi)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Hg(i)}};function To(r,e){if(!(this instanceof To))return new To(r,e);if(r=r!==void 0?String(r).toLowerCase():Ro,r!==Ro)throw new Error("Encoding not supported. Only utf-8 is supported");e=Qo(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}To.prototype={encode:function(e,t){e=e?String(e):"",t=Qo(t),this._streaming||(this._encoder=new Vg(this._options)),this._streaming=!!t.stream;for(var n=[],s=new Nl(qg(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Mi);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Mi;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function jg(r){var e=r.fatal,t=0,n=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===Bo&&s!==0)return s=0,Ja(e);if(c===Bo)return Mi;if(s===0){if(Jn(c,0,127))return c;if(Jn(c,194,223))s=1,t=c-192;else if(Jn(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,t=c-224;else if(Jn(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,t=c-240;else return Ja(e);return t=t<<6*s,null}if(!Jn(c,i,o))return t=s=n=0,i=128,o=191,a.prepend(c),Ja(e);if(i=128,o=191,n+=1,t+=c-128<<6*(s-n),n!==s)return null;var p=t;return t=s=n=0,p}}function Vg(r){r.fatal,this.handler=function(e,t){if(t===Bo)return Mi;if(Jn(t,0,127))return t;var n,s;Jn(t,128,2047)?(n=1,s=192):Jn(t,2048,65535)?(n=2,s=224):Jn(t,65536,1114111)&&(n=3,s=240);for(var i=[(t>>6*n)+s];n>0;){var o=t>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Gg=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Mo,TextEncoder:To},Symbol.toStringTag,{value:"Module"})),Yg=nr(Gg);var Zg=Qt&&Qt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Jg=Qt&&Qt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Un=Qt&&Qt.__decorate||function(r,e,t,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i},Xg=Qt&&Qt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&Zg(e,r,t);return Jg(e,r),e},cf=Qt&&Qt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zt,"__esModule",{value:!0});var lf=zt.deserializeUnchecked=gf=zt.deserialize=pf=zt.serialize=zt.BinaryReader=zt.BinaryWriter=zt.BorshError=zt.baseDecode=zt.baseEncode=void 0;const mr=cf(of),uf=cf($g),Qg=Xg(Yg),em=typeof TextDecoder!="function"?Qg.TextDecoder:TextDecoder,tm=new em("utf-8",{fatal:!0});function nm(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),uf.default.encode(Buffer.from(r))}zt.baseEncode=nm;function rm(r){return Buffer.from(uf.default.decode(r))}zt.baseDecode=rm;const Xa=1024;class en extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}zt.BorshError=en;class df{constructor(){this.buf=Buffer.alloc(Xa),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Xa)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new mr.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new mr.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new mr.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new mr.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(Xa)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}}zt.BinaryWriter=df;function zn(r,e,t){const n=t.value;t.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new en("Reached the end of buffer when deserializing")}throw i}}}class gn{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new mr.default(e,"le")}readU128(){const e=this.readBuffer(16);return new mr.default(e,"le")}readU256(){const e=this.readBuffer(32);return new mr.default(e,"le")}readU512(){const e=this.readBuffer(64);return new mr.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new en(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return tm.decode(t)}catch(n){throw new en(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),n=Array();for(let s=0;s<t;++s)n.push(e());return n}}Un([zn],gn.prototype,"readU8",null);Un([zn],gn.prototype,"readU16",null);Un([zn],gn.prototype,"readU32",null);Un([zn],gn.prototype,"readU64",null);Un([zn],gn.prototype,"readU128",null);Un([zn],gn.prototype,"readU256",null);Un([zn],gn.prototype,"readU512",null);Un([zn],gn.prototype,"readString",null);Un([zn],gn.prototype,"readFixedArray",null);Un([zn],gn.prototype,"readArray",null);zt.BinaryReader=gn;function ff(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Mr(r,e,t,n,s){try{if(typeof n=="string")s[`write${ff(n)}`](t);else if(n instanceof Array)if(typeof n[0]=="number"){if(t.length!==n[0])throw new en(`Expecting byte array of length ${n[0]}, but got ${t.length} bytes`);s.writeFixedArray(t)}else if(n.length===2&&typeof n[1]=="number"){if(t.length!==n[1])throw new en(`Expecting byte array of length ${n[1]}, but got ${t.length} bytes`);for(let i=0;i<n[1];i++)Mr(r,null,t[i],n[0],s)}else s.writeArray(t,i=>{Mr(r,e,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{t==null?s.writeU8(0):(s.writeU8(1),Mr(r,e,t,n.type,s));break}case"map":{s.writeU32(t.size),t.forEach((i,o)=>{Mr(r,e,o,n.key,s),Mr(r,e,i,n.value,s)});break}default:throw new en(`FieldType ${n} unrecognized`)}else hf(r,t,s)}catch(i){throw i instanceof en&&i.addToFieldPath(e),i}}function hf(r,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const n=r.get(e.constructor);if(!n)throw new en(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{Mr(r,s,e[s],i,t)});else if(n.kind==="enum"){const s=e[n.field];for(let i=0;i<n.values.length;++i){const[o,a]=n.values[i];if(o===s){t.writeU8(i),Mr(r,o,e[o],a,t);break}}}else throw new en(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function im(r,e,t=df){const n=new t;return hf(r,e,n),n.toArray()}var pf=zt.serialize=im;function Tr(r,e,t,n){try{if(typeof t=="string")return n[`read${ff(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return n.readFixedArray(t[0]);if(typeof t[1]=="number"){const s=[];for(let i=0;i<t[1];i++)s.push(Tr(r,null,t[0],n));return s}else return n.readArray(()=>Tr(r,e,t[0],n))}if(t.kind==="option")return n.readU8()?Tr(r,e,t.type,n):void 0;if(t.kind==="map"){let s=new Map;const i=n.readU32();for(let o=0;o<i;o++){const a=Tr(r,e,t.key,n),c=Tr(r,e,t.value,n);s.set(a,c)}return s}return Ol(r,t,n)}catch(s){throw s instanceof en&&s.addToFieldPath(e),s}}function Ol(r,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const n=r.get(e);if(!n)throw new en(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,o]of r.get(e).fields)s[i]=Tr(r,i,o,t);return new e(s)}if(n.kind==="enum"){const s=t.readU8();if(s>=n.values.length)throw new en(`Enum index: ${s} is out of range`);const[i,o]=n.values[s],a=Tr(r,i,o,t);return new e({[i]:a})}throw new en(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function sm(r,e,t,n=gn){const s=new n(t),i=Ol(r,e,s);if(s.offset<t.length)throw new en(`Unexpected ${t.length-s.offset} bytes after deserialized data`);return i}var gf=zt.deserialize=sm;function om(r,e,t,n=gn){const s=new n(t);return Ol(r,e,s)}lf=zt.deserializeUnchecked=om;var H={};Object.defineProperty(H,"__esModule",{value:!0});H.s16=H.s8=H.nu64be=H.u48be=H.u40be=H.u32be=H.u24be=H.u16be=Wt=H.nu64=H.u48=H.u40=ce=H.u32=H.u24=bn=H.u16=Be=H.u8=Sr=H.offset=H.greedy=H.Constant=H.UTF8=H.CString=H.Blob=H.Boolean=H.BitField=H.BitStructure=H.VariantLayout=H.Union=H.UnionLayoutDiscriminator=H.UnionDiscriminator=H.Structure=H.Sequence=H.DoubleBE=H.Double=H.FloatBE=H.Float=H.NearInt64BE=H.NearInt64=H.NearUInt64BE=H.NearUInt64=H.IntBE=H.Int=H.UIntBE=H.UInt=H.OffsetLayout=H.GreedyCount=H.ExternalLayout=H.bindConstructorLayout=H.nameWithProperty=H.Layout=H.uint8ArrayToBuffer=H.checkUint8Array=void 0;H.constant=H.utf8=H.cstr=He=H.blob=H.unionLayoutDiscriminator=H.union=Ft=H.seq=H.bits=le=H.struct=H.f64be=H.f64=H.f32be=H.f32=H.ns64be=H.s48be=H.s40be=H.s32be=H.s24be=H.s16be=dn=H.ns64=H.s48=H.s40=H.s32=H.s24=void 0;const Wl=fe;function Fi(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}H.checkUint8Array=Fi;function Ce(r){return Fi(r),Wl.Buffer.from(r.buffer,r.byteOffset,r.length)}H.uint8ArrayToBuffer=Ce;class Ne{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}H.Layout=Ne;function Ul(r,e){return e.property?r+"["+e.property+"]":r}H.nameWithProperty=Ul;function am(r,e){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Ne))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=e,e.boundConstructor_=r,e.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(r,"decode",{value(t,n){return e.decode(t,n)},writable:!0})}H.bindConstructorLayout=am;class on extends Ne{isCount(){throw new Error("ExternalLayout is abstract")}}H.ExternalLayout=on;class mf extends on{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Fi(e);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}}H.GreedyCount=mf;class zl extends on{constructor(e,t=0,n){if(!(e instanceof Ne))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof vn||this.layout instanceof An}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}}H.OffsetLayout=zl;class vn extends Ne{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Ce(e).readUIntLE(t,this.span)}encode(e,t,n=0){return Ce(t).writeUIntLE(e,n,this.span),this.span}}H.UInt=vn;class An extends Ne{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Ce(e).readUIntBE(t,this.span)}encode(e,t,n=0){return Ce(t).writeUIntBE(e,n,this.span),this.span}}H.UIntBE=An;class Jr extends Ne{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Ce(e).readIntLE(t,this.span)}encode(e,t,n=0){return Ce(t).writeIntLE(e,n,this.span),this.span}}H.Int=Jr;class Ki extends Ne{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Ce(e).readIntBE(t,this.span)}encode(e,t,n=0){return Ce(t).writeIntBE(e,n,this.span),this.span}}H.IntBE=Ki;const Ic=Math.pow(2,32);function ea(r){const e=Math.floor(r/Ic),t=r-e*Ic;return{hi32:e,lo32:t}}function ta(r,e){return r*Ic+e}class yf extends Ne{constructor(e){super(8,e)}decode(e,t=0){const n=Ce(e),s=n.readUInt32LE(t),i=n.readUInt32LE(t+4);return ta(i,s)}encode(e,t,n=0){const s=ea(e),i=Ce(t);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}H.NearUInt64=yf;class wf extends Ne{constructor(e){super(8,e)}decode(e,t=0){const n=Ce(e),s=n.readUInt32BE(t),i=n.readUInt32BE(t+4);return ta(s,i)}encode(e,t,n=0){const s=ea(e),i=Ce(t);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}H.NearUInt64BE=wf;class bf extends Ne{constructor(e){super(8,e)}decode(e,t=0){const n=Ce(e),s=n.readUInt32LE(t),i=n.readInt32LE(t+4);return ta(i,s)}encode(e,t,n=0){const s=ea(e),i=Ce(t);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}H.NearInt64=bf;class vf extends Ne{constructor(e){super(8,e)}decode(e,t=0){const n=Ce(e),s=n.readInt32BE(t),i=n.readUInt32BE(t+4);return ta(s,i)}encode(e,t,n=0){const s=ea(e),i=Ce(t);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}H.NearInt64BE=vf;class Sf extends Ne{constructor(e){super(4,e)}decode(e,t=0){return Ce(e).readFloatLE(t)}encode(e,t,n=0){return Ce(t).writeFloatLE(e,n),4}}H.Float=Sf;class Ef extends Ne{constructor(e){super(4,e)}decode(e,t=0){return Ce(e).readFloatBE(t)}encode(e,t,n=0){return Ce(t).writeFloatBE(e,n),4}}H.FloatBE=Ef;class _f extends Ne{constructor(e){super(8,e)}decode(e,t=0){return Ce(e).readDoubleLE(t)}encode(e,t,n=0){return Ce(t).writeDoubleLE(e,n),8}}H.Double=_f;class Af extends Ne{constructor(e){super(8,e)}decode(e,t=0){return Ce(e).readDoubleBE(t)}encode(e,t,n=0){return Ce(t).writeDoubleBE(e,n),8}}H.DoubleBE=Af;class kf extends Ne{constructor(e,t,n){if(!(e instanceof Ne))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof on&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(t instanceof on)&&0<e.span&&(s=t*e.span),super(s,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof on&&(s=s.decode(e,t)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(e,t+n),++i}return n}decode(e,t=0){const n=[];let s=0,i=this.count;for(i instanceof on&&(i=i.decode(e,t));s<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),s+=1;return n}encode(e,t,n=0){const s=this.elementLayout,i=e.reduce((o,a)=>o+s.encode(a,t,n+o),0);return this.count instanceof on&&this.count.encode(e.length,t,n),i}}H.Sequence=kf;class If extends Ne{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((i,o)=>i&&o instanceof Ne,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(e,t);return t+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t=0){Fi(e);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){const s=n;let i=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const p=e[a.property];p!==void 0&&(o=a.encode(p,t,n),0>c&&(c=a.getSpan(t,n)))}i=n,n+=c}return i+o-s}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}H.Structure=If;class Dl{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}}H.UnionDiscriminator=Dl;class Co extends Dl{constructor(e,t){if(!(e instanceof on&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}H.UnionLayoutDiscriminator=Co;class Fl extends Ne{constructor(e,t,n){let s;if(e instanceof vn||e instanceof An)s=new Co(new zl(e));else if(e instanceof on&&e.isCount())s=new Co(e);else if(e instanceof Dl)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Ne))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&(e instanceof vn||e instanceof An)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof vn||e instanceof An,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n;const s=this.discriminator,i=s.decode(e,t),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[a.property]=a.decode(e,t+c)}else n=o.decode(e,t);return n}encode(e,t,n=0){const s=this.getSourceVariant(e);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],t,n),a+o.encode(e[o.property],t,n+a)}return s.encode(e,t,n)}addVariant(e,t,n){const s=new xf(this,e,t,n);return this.registry[e]=s,s}getVariant(e,t=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,t):n=e,this.registry[n]}}H.Union=Fl;class xf extends Ne{constructor(e,t,n,s){if(!(e instanceof Fl))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof Ne))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=n?n.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,s),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,t+n)),n+s}decode(e,t=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let i=s;if(this.layout&&(this.layout.encode(e[this.property],t,n+s),i+=this.layout.getSpan(t,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}H.VariantLayout=xf;function ai(r){return 0>r&&(r+=4294967296),r}class Kl extends Ne{constructor(e,t,n){if(!(e instanceof vn||e instanceof An))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&n===void 0&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let s=0;this._packedSetValue=function(i){return s=ai(i),this},this._packedGetValue=function(){return s}}decode(e,t=0){const n=this.makeDestinationObject(),s=this.word.decode(e,t);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(e));return n}encode(e,t,n=0){const s=this.word.decode(t,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=e[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new $l(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new Bf(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}H.BitStructure=Kl;class $l{constructor(e,t,n){if(!(e instanceof Kl))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const s=8*e.span,i=e.fields.reduce((o,a)=>o+a.bits,0);if(t+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-t),this.wordMask=ai(this.valueMask<<this.start),this.property=n}decode(e,t){const n=this.container._packedGetValue();return ai(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==ai(e&this.valueMask))throw new TypeError(Ul("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=ai(e<<this.start);this.container._packedSetValue(ai(t&~this.wordMask)|n)}}H.BitField=$l;let Bf=class extends $l{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};H.Boolean=Bf;class Rf extends Ne{constructor(e,t){if(!(e instanceof on&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof on||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),Ce(e).slice(t,t+n)}encode(e,t,n){let s=this.length;if(this.length instanceof on&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(Ul("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>t.length)throw new RangeError("encoding overruns Uint8Array");const i=Ce(e);return Ce(t).write(i.toString("hex"),n,s,"hex"),this.length instanceof on&&this.length.encode(s,t,n),s}}H.Blob=Rf;class Mf extends Ne{constructor(e){super(-1,e)}getSpan(e,t=0){Fi(e);let n=t;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-t}decode(e,t=0){const n=this.getSpan(e,t);return Ce(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));const s=Wl.Buffer.from(e,"utf8"),i=s.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");const o=Ce(t);return s.copy(o,n),o[n+i]=0,i+1}}H.CString=Mf;class Tf extends Ne{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Fi(e),e.length-t}decode(e,t=0){const n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Ce(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));const s=Wl.Buffer.from(e,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return s.copy(Ce(t),n),i}}H.UTF8=Tf;class Cf extends Ne{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}}H.Constant=Cf;H.greedy=(r,e)=>new mf(r,e);var Sr=H.offset=(r,e,t)=>new zl(r,e,t),Be=H.u8=r=>new vn(1,r),bn=H.u16=r=>new vn(2,r);H.u24=r=>new vn(3,r);var ce=H.u32=r=>new vn(4,r);H.u40=r=>new vn(5,r);H.u48=r=>new vn(6,r);var Wt=H.nu64=r=>new yf(r);H.u16be=r=>new An(2,r);H.u24be=r=>new An(3,r);H.u32be=r=>new An(4,r);H.u40be=r=>new An(5,r);H.u48be=r=>new An(6,r);H.nu64be=r=>new wf(r);H.s8=r=>new Jr(1,r);H.s16=r=>new Jr(2,r);H.s24=r=>new Jr(3,r);H.s32=r=>new Jr(4,r);H.s40=r=>new Jr(5,r);H.s48=r=>new Jr(6,r);var dn=H.ns64=r=>new bf(r);H.s16be=r=>new Ki(2,r);H.s24be=r=>new Ki(3,r);H.s32be=r=>new Ki(4,r);H.s40be=r=>new Ki(5,r);H.s48be=r=>new Ki(6,r);H.ns64be=r=>new vf(r);H.f32=r=>new Sf(r);H.f32be=r=>new Ef(r);H.f64=r=>new _f(r);H.f64be=r=>new Af(r);var le=H.struct=(r,e,t)=>new If(r,e,t);H.bits=(r,e,t)=>new Kl(r,e,t);var Ft=H.seq=(r,e,t)=>new kf(r,e,t);H.union=(r,e,t)=>new Fl(r,e,t);H.unionLayoutDiscriminator=(r,e)=>new Co(r,e);var He=H.blob=(r,e)=>new Rf(r,e);H.cstr=r=>new Mf(r);H.utf8=(r,e)=>new Tf(r,e);H.constant=(r,e)=>new Cf(r,e);var cm=8078e3,lm=8078001,um=8078004,dm=8078005,fm=8078006,hm=8078011;function Lf(r){return Array.isArray(r)?"%5B"+r.map(Lf).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function pm([r,e]){return`${r}=${Lf(e)}`}function gm(r){const e=Object.entries(r).map(pm).join("&");return btoa(e)}function mm(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${gm(e)}'`),`${t}\``}}var _i=class extends Error{constructor(...[e,t]){let n,s;if(t){const{cause:o,...a}=t;o&&(s={cause:o}),Object.keys(a).length>0&&(n=a)}const i=mm(e,n);super(i,s);kt(this,"cause",this.cause);kt(this,"context");this.context={__code:e,...n},this.name="SolanaError"}};function ym(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function wm(r){return Object.freeze({...r,encode:e=>{const t=new Uint8Array(ym(e,r));return r.write(e,t,0),t}})}function bm(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function oi(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function vm(r,e){if(oi(r)!==oi(e))throw new _i(um);if(oi(r)&&oi(e)&&r.fixedSize!==e.fixedSize)throw new _i(dm,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!oi(r)&&!oi(e)&&r.maxSize!==e.maxSize)throw new _i(fm,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function Sm(r,e,t=0){if(e.length-t<=0)throw new _i(cm,{codecDescription:r})}function Em(r,e,t,n=0){const s=t.length-n;if(s<e)throw new _i(lm,{bytesLength:s,codecDescription:r,expected:e})}function _m(r,e,t,n){if(n<e||n>t)throw new _i(hm,{codecDescription:r,max:t,min:e,value:n})}function Pf(r){return(r==null?void 0:r.endian)!==1}function Am(r){return wm({fixedSize:r.size,write(e,t,n){r.range&&_m(r.name,r.range[0],r.range[1],e);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),e,Pf(r.config)),t.set(new Uint8Array(s),n),n+r.size}})}function km(r){return bm({fixedSize:r.size,read(e,t=0){Sm(r.name,e,t),Em(r.name,r.size,e,t);const n=new DataView(Im(e,t,r.size));return[r.get(n,Pf(r.config)),t+r.size]}})}function Im(r,e,t){const n=r.byteOffset+(e??0),s=t??r.byteLength;return r.buffer.slice(n,n+s)}var Nf=(r={})=>Am({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),xm=(r={})=>km({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),Bm=(r={})=>vm(Nf(r),xm(r));class Rm extends TypeError{constructor(e,t){let n;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function Mm(r){return xs(r)&&typeof r[Symbol.iterator]=="function"}function xs(r){return typeof r=="object"&&r!=null}function Lo(r){return xs(r)&&!Array.isArray(r)}function kn(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function Tm(r){const{done:e,value:t}=r.next();return e?void 0:t}function Cm(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=e,{type:o}=t,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${kn(n)}\``}=r;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...r,message:c}}function*$u(r,e,t,n){Mm(r)||(r=[r]);for(const s of r){const i=Cm(s,e,t,n);i&&(yield i)}}function*ql(r,e,t={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=t,a={path:n,branch:s,mask:o};i&&(r=e.coercer(r,a));let c="valid";for(const p of e.validator(r,a))p.explanation=t.message,c="not_valid",yield[p,void 0];for(let[p,g,w]of e.entries(r,a)){const B=ql(g,w,{path:p===void 0?n:[...n,p],branch:p===void 0?s:[...s,g],coerce:i,mask:o,message:t.message});for(const m of B)m[0]?(c=m[0].refinement!=null?"not_refined":"not_valid",yield[m[0],void 0]):i&&(g=m[1],p===void 0?r=g:r instanceof Map?r.set(p,g):r instanceof Set?r.add(g):xs(r)&&(g!==void 0||p in r)&&(r[p]=g))}if(c!=="not_valid")for(const p of e.refiner(r,a))p.explanation=t.message,c="not_refined",yield[p,void 0];c==="valid"&&(yield[void 0,r])}let Dn=class{constructor(e){const{type:t,schema:n,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(c,p)=>{const g=s(c,p);return $u(g,p,this,c)}:this.validator=()=>[],i?this.refiner=(c,p)=>{const g=i(c,p);return $u(g,p,this,c)}:this.refiner=()=>[]}assert(e,t){return Of(e,this,t)}create(e,t){return te(e,this,t)}is(e){return Wf(e,this)}mask(e,t){return Lm(e,this,t)}validate(e,t={}){return Bs(e,this,t)}};function Of(r,e,t){const n=Bs(r,e,{message:t});if(n[0])throw n[0]}function te(r,e,t){const n=Bs(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function Lm(r,e,t){const n=Bs(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function Wf(r,e){return!Bs(r,e)[0]}function Bs(r,e,t={}){const n=ql(r,e,t),s=Tm(n);return s[0]?[new Rm(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Xr(r,e){return new Dn({type:r,schema:null,validator:e})}function Pm(){return Xr("any",()=>!0)}function ie(r){return new Dn({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${kn(e)}`}})}function Wn(){return Xr("boolean",r=>typeof r=="boolean")}function Hl(r){return Xr("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${kn(e)}`)}function Qe(r){const e=kn(r),t=typeof r;return new Dn({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${kn(n)}`}})}function Nm(){return Xr("never",()=>!1)}function se(r){return new Dn({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function $(){return Xr("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${kn(r)}`)}function pe(r){return new Dn({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Uf(r,e){return new Dn({type:"record",schema:null,*entries(t){if(xs(t))for(const n in t){const s=t[n];yield[n,n,r],yield[n,s,e]}},validator(t){return Lo(t)||`Expected an object, but received: ${kn(t)}`},coercer(t){return Lo(t)?{...t}:t}})}function X(){return Xr("string",r=>typeof r=="string"||`Expected a string, but received: ${kn(r)}`)}function jl(r){const e=Nm();return new Dn({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let s=0;s<n;s++)yield[s,t[s],r[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${kn(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function Z(r){const e=Object.keys(r);return new Dn({type:"type",schema:r,*entries(t){if(xs(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return Lo(t)||`Expected an object, but received: ${kn(t)}`},coercer(t){return Lo(t)?{...t}:t}})}function tn(r){const e=r.map(t=>t.type).join(" | ");return new Dn({type:"union",schema:null,coercer(t,n){for(const s of r){const[i,o]=s.validate(t,{coerce:!0,mask:n.mask});if(!i)return o}return t},validator(t,n){const s=[];for(const i of r){const[...o]=ql(t,i,n),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${kn(t)}`,...s]}})}function $i(){return Xr("unknown",()=>!0)}function Rs(r,e,t){return new Dn({...r,coercer:(n,s)=>Wf(n,e)?r.coercer(t(n,s),s):r.coercer(n,s)})}var qs,Om=new Uint8Array(16);function zf(){if(!qs&&(qs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!qs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qs(Om)}const Wm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function na(r){return typeof r=="string"&&Wm.test(r)}var Ot=[];for(var Qa=0;Qa<256;++Qa)Ot.push((Qa+256).toString(16).substr(1));function ra(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Ot[r[e+0]]+Ot[r[e+1]]+Ot[r[e+2]]+Ot[r[e+3]]+"-"+Ot[r[e+4]]+Ot[r[e+5]]+"-"+Ot[r[e+6]]+Ot[r[e+7]]+"-"+Ot[r[e+8]]+Ot[r[e+9]]+"-"+Ot[r[e+10]]+Ot[r[e+11]]+Ot[r[e+12]]+Ot[r[e+13]]+Ot[r[e+14]]+Ot[r[e+15]]).toLowerCase();if(!na(t))throw TypeError("Stringified UUID is invalid");return t}var qu,ec,tc=0,nc=0;function Um(r,e,t){var n=e&&t||0,s=e||new Array(16);r=r||{};var i=r.node||qu,o=r.clockseq!==void 0?r.clockseq:ec;if(i==null||o==null){var a=r.random||(r.rng||zf)();i==null&&(i=qu=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=ec=(a[6]<<8|a[7])&16383)}var c=r.msecs!==void 0?r.msecs:Date.now(),p=r.nsecs!==void 0?r.nsecs:nc+1,g=c-tc+(p-nc)/1e4;if(g<0&&r.clockseq===void 0&&(o=o+1&16383),(g<0||c>tc)&&r.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");tc=c,nc=p,ec=o,c+=122192928e5;var w=((c&268435455)*1e4+p)%4294967296;s[n++]=w>>>24&255,s[n++]=w>>>16&255,s[n++]=w>>>8&255,s[n++]=w&255;var B=c/4294967296*1e4&268435455;s[n++]=B>>>8&255,s[n++]=B&255,s[n++]=B>>>24&15|16,s[n++]=B>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var m=0;m<6;++m)s[n+m]=i[m];return e||ra(s)}function Df(r){if(!na(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function zm(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var Dm="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Fm="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ff(r,e,t){function n(s,i,o,a){if(typeof s=="string"&&(s=zm(s)),typeof i=="string"&&(i=Df(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var p=0;p<16;++p)o[a+p]=c[p];return o}return ra(c)}try{n.name=r}catch{}return n.DNS=Dm,n.URL=Fm,n}function Km(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return $m(qm(Hm(r),r.length*8))}function $m(r){for(var e=[],t=r.length*32,n="0123456789abcdef",s=0;s<t;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(o)}return e}function Kf(r){return(r+64>>>9<<4)+14+1}function qm(r,e){r[e>>5]|=128<<e%32,r[Kf(e)-1]=e;for(var t=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var a=t,c=n,p=s,g=i;t=qt(t,n,s,i,r[o],7,-680876936),i=qt(i,t,n,s,r[o+1],12,-389564586),s=qt(s,i,t,n,r[o+2],17,606105819),n=qt(n,s,i,t,r[o+3],22,-1044525330),t=qt(t,n,s,i,r[o+4],7,-176418897),i=qt(i,t,n,s,r[o+5],12,1200080426),s=qt(s,i,t,n,r[o+6],17,-1473231341),n=qt(n,s,i,t,r[o+7],22,-45705983),t=qt(t,n,s,i,r[o+8],7,1770035416),i=qt(i,t,n,s,r[o+9],12,-1958414417),s=qt(s,i,t,n,r[o+10],17,-42063),n=qt(n,s,i,t,r[o+11],22,-1990404162),t=qt(t,n,s,i,r[o+12],7,1804603682),i=qt(i,t,n,s,r[o+13],12,-40341101),s=qt(s,i,t,n,r[o+14],17,-1502002290),n=qt(n,s,i,t,r[o+15],22,1236535329),t=Ht(t,n,s,i,r[o+1],5,-165796510),i=Ht(i,t,n,s,r[o+6],9,-1069501632),s=Ht(s,i,t,n,r[o+11],14,643717713),n=Ht(n,s,i,t,r[o],20,-373897302),t=Ht(t,n,s,i,r[o+5],5,-701558691),i=Ht(i,t,n,s,r[o+10],9,38016083),s=Ht(s,i,t,n,r[o+15],14,-660478335),n=Ht(n,s,i,t,r[o+4],20,-405537848),t=Ht(t,n,s,i,r[o+9],5,568446438),i=Ht(i,t,n,s,r[o+14],9,-1019803690),s=Ht(s,i,t,n,r[o+3],14,-187363961),n=Ht(n,s,i,t,r[o+8],20,1163531501),t=Ht(t,n,s,i,r[o+13],5,-1444681467),i=Ht(i,t,n,s,r[o+2],9,-51403784),s=Ht(s,i,t,n,r[o+7],14,1735328473),n=Ht(n,s,i,t,r[o+12],20,-1926607734),t=jt(t,n,s,i,r[o+5],4,-378558),i=jt(i,t,n,s,r[o+8],11,-2022574463),s=jt(s,i,t,n,r[o+11],16,1839030562),n=jt(n,s,i,t,r[o+14],23,-35309556),t=jt(t,n,s,i,r[o+1],4,-1530992060),i=jt(i,t,n,s,r[o+4],11,1272893353),s=jt(s,i,t,n,r[o+7],16,-155497632),n=jt(n,s,i,t,r[o+10],23,-1094730640),t=jt(t,n,s,i,r[o+13],4,681279174),i=jt(i,t,n,s,r[o],11,-358537222),s=jt(s,i,t,n,r[o+3],16,-722521979),n=jt(n,s,i,t,r[o+6],23,76029189),t=jt(t,n,s,i,r[o+9],4,-640364487),i=jt(i,t,n,s,r[o+12],11,-421815835),s=jt(s,i,t,n,r[o+15],16,530742520),n=jt(n,s,i,t,r[o+2],23,-995338651),t=Vt(t,n,s,i,r[o],6,-198630844),i=Vt(i,t,n,s,r[o+7],10,1126891415),s=Vt(s,i,t,n,r[o+14],15,-1416354905),n=Vt(n,s,i,t,r[o+5],21,-57434055),t=Vt(t,n,s,i,r[o+12],6,1700485571),i=Vt(i,t,n,s,r[o+3],10,-1894986606),s=Vt(s,i,t,n,r[o+10],15,-1051523),n=Vt(n,s,i,t,r[o+1],21,-2054922799),t=Vt(t,n,s,i,r[o+8],6,1873313359),i=Vt(i,t,n,s,r[o+15],10,-30611744),s=Vt(s,i,t,n,r[o+6],15,-1560198380),n=Vt(n,s,i,t,r[o+13],21,1309151649),t=Vt(t,n,s,i,r[o+4],6,-145523070),i=Vt(i,t,n,s,r[o+11],10,-1120210379),s=Vt(s,i,t,n,r[o+2],15,718787259),n=Vt(n,s,i,t,r[o+9],21,-343485551),t=yr(t,a),n=yr(n,c),s=yr(s,p),i=yr(i,g)}return[t,n,s,i]}function Hm(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(Kf(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function yr(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function jm(r,e){return r<<e|r>>>32-e}function ia(r,e,t,n,s,i){return yr(jm(yr(yr(e,r),yr(n,i)),s),t)}function qt(r,e,t,n,s,i,o){return ia(e&t|~e&n,r,e,s,i,o)}function Ht(r,e,t,n,s,i,o){return ia(e&n|t&~n,r,e,s,i,o)}function jt(r,e,t,n,s,i,o){return ia(e^t^n,r,e,s,i,o)}function Vt(r,e,t,n,s,i,o){return ia(t^(e|~n),r,e,s,i,o)}var Vm=Ff("v3",48,Km);function Gm(r,e,t){r=r||{};var n=r.random||(r.rng||zf)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=n[s];return e}return ra(n)}function Ym(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function rc(r,e){return r<<e|r>>>32-e}function Zm(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var p=new Uint32Array(16),g=0;g<16;++g)p[g]=r[c*64+g*4]<<24|r[c*64+g*4+1]<<16|r[c*64+g*4+2]<<8|r[c*64+g*4+3];a[c]=p}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var w=0;w<o;++w){for(var B=new Uint32Array(80),m=0;m<16;++m)B[m]=a[w][m];for(var I=16;I<80;++I)B[I]=rc(B[I-3]^B[I-8]^B[I-14]^B[I-16],1);for(var k=t[0],E=t[1],M=t[2],C=t[3],T=t[4],N=0;N<80;++N){var P=Math.floor(N/20),D=rc(k,5)+Ym(P,E,M,C)+T+e[P]+B[N]>>>0;T=C,C=M,M=rc(E,30)>>>0,E=k,k=D}t[0]=t[0]+k>>>0,t[1]=t[1]+E>>>0,t[2]=t[2]+M>>>0,t[3]=t[3]+C>>>0,t[4]=t[4]+T>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Jm=Ff("v5",80,Zm);const Xm="00000000-0000-0000-0000-000000000000";function Qm(r){if(!na(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const ey=Object.freeze(Object.defineProperty({__proto__:null,NIL:Xm,parse:Df,stringify:ra,v1:Um,v3:Vm,v4:Gm,v5:Jm,validate:na,version:Qm},Symbol.toStringTag,{value:"Module"})),$f=nr(ey),ty=$f.v4,ny=function(r,e,t,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:r};if(s===2&&(i.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");i.params=e}if(typeof t>"u"){const o=typeof n.generator=="function"?n.generator:function(){return ty()};i.id=o(i,n)}else s===2&&t===null?n.notificationIdNull&&(i.id=null):i.id=t;return i};var ry=ny;const iy=$f.v4,sy=ry,ws=function(r,e){if(!(this instanceof ws))return new ws(r,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return iy()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=r};var oy=ws;ws.prototype.request=function(r,e,t,n){const s=this;let i=null;const o=Array.isArray(r)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof e=="function")n=e,i=r;else{typeof t=="function"&&(n=t,t=void 0);const p=typeof n=="function";try{i=sy(r,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(p)return n(g);throw g}if(!p)return i}let c;try{c=JSON.stringify(i,this.options.replacer)}catch(p){return n(p)}return this.callServer(c,function(p,g){s._parseResponse(p,g,n)}),i};ws.prototype._parseResponse=function(r,e,t){if(r){t(r);return}if(!e)return t();let n;try{n=JSON.parse(e,this.options.reviver)}catch(s){return t(s)}if(t.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return t(null,n.filter(s),n.filter(i))}else return t(null,n.error,n.result);t(null,n)};const ay=As(oy);var qf={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(c,p,g){this.fn=c,this.context=p,this.once=g||!1}function i(c,p,g,w,B){if(typeof g!="function")throw new TypeError("The listener must be a function");var m=new s(g,w||c,B),I=t?t+p:p;return c._events[I]?c._events[I].fn?c._events[I]=[c._events[I],m]:c._events[I].push(m):(c._events[I]=m,c._eventsCount++),c}function o(c,p){--c._eventsCount===0?c._events=new n:delete c._events[p]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var p=[],g,w;if(this._eventsCount===0)return p;for(w in g=this._events)e.call(g,w)&&p.push(t?w.slice(1):w);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},a.prototype.listeners=function(p){var g=t?t+p:p,w=this._events[g];if(!w)return[];if(w.fn)return[w.fn];for(var B=0,m=w.length,I=new Array(m);B<m;B++)I[B]=w[B].fn;return I},a.prototype.listenerCount=function(p){var g=t?t+p:p,w=this._events[g];return w?w.fn?1:w.length:0},a.prototype.emit=function(p,g,w,B,m,I){var k=t?t+p:p;if(!this._events[k])return!1;var E=this._events[k],M=arguments.length,C,T;if(E.fn){switch(E.once&&this.removeListener(p,E.fn,void 0,!0),M){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,g),!0;case 3:return E.fn.call(E.context,g,w),!0;case 4:return E.fn.call(E.context,g,w,B),!0;case 5:return E.fn.call(E.context,g,w,B,m),!0;case 6:return E.fn.call(E.context,g,w,B,m,I),!0}for(T=1,C=new Array(M-1);T<M;T++)C[T-1]=arguments[T];E.fn.apply(E.context,C)}else{var N=E.length,P;for(T=0;T<N;T++)switch(E[T].once&&this.removeListener(p,E[T].fn,void 0,!0),M){case 1:E[T].fn.call(E[T].context);break;case 2:E[T].fn.call(E[T].context,g);break;case 3:E[T].fn.call(E[T].context,g,w);break;case 4:E[T].fn.call(E[T].context,g,w,B);break;default:if(!C)for(P=1,C=new Array(M-1);P<M;P++)C[P-1]=arguments[P];E[T].fn.apply(E[T].context,C)}}return!0},a.prototype.on=function(p,g,w){return i(this,p,g,w,!1)},a.prototype.once=function(p,g,w){return i(this,p,g,w,!0)},a.prototype.removeListener=function(p,g,w,B){var m=t?t+p:p;if(!this._events[m])return this;if(!g)return o(this,m),this;var I=this._events[m];if(I.fn)I.fn===g&&(!B||I.once)&&(!w||I.context===w)&&o(this,m);else{for(var k=0,E=[],M=I.length;k<M;k++)(I[k].fn!==g||B&&!I[k].once||w&&I[k].context!==w)&&E.push(I[k]);E.length?this._events[m]=E.length===1?E[0]:E:o(this,m)}return this},a.prototype.removeAllListeners=function(p){var g;return p?(g=t?t+p:p,this._events[g]&&o(this,g)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(qf);var cy=qf.exports;const sa=As(cy);var ly=class extends sa{constructor(e,t,n){super();kt(this,"socket");this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(e,t,n){const s=n||t;try{this.socket.send(e),s()}catch(i){s(i)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,n){this.socket.addEventListener(e,t,n)}};function uy(r,e){return new ly(r,e)}var dy=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},fy=class extends sa{constructor(e,t="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},c,p){super();kt(this,"address");kt(this,"rpc_id");kt(this,"queue");kt(this,"options");kt(this,"autoconnect");kt(this,"ready");kt(this,"reconnect");kt(this,"reconnect_timer_id");kt(this,"reconnect_interval");kt(this,"max_reconnects");kt(this,"rest_options");kt(this,"current_reconnects");kt(this,"generate_request_id");kt(this,"socket");kt(this,"webSocketFactory");kt(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),p?this.dataPack=p:this.dataPack=new dy,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,t),c={jsonrpc:"2.0",method:e,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(c),s,p=>{if(p)return o(p);this.queue[a]={promise:[i,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=fe.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};const hy=BigInt(0),Vi=BigInt(1),py=BigInt(2),gy=BigInt(7),my=BigInt(256),yy=BigInt(113),Hf=[],jf=[],Vf=[];for(let r=0,e=Vi,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],Hf.push(2*(5*n+t)),jf.push((r+1)*(r+2)/2%64);let s=hy;for(let i=0;i<7;i++)e=(e<<Vi^(e>>gy)*yy)%my,e&py&&(s^=Vi<<(Vi<<BigInt(i))-Vi);Vf.push(s)}const Gf=Od(Vf,!0),wy=Gf[0],by=Gf[1],Hu=(r,e,t)=>t>32?bp(r,e,t):yp(r,e,t),ju=(r,e,t)=>t>32?vp(r,e,t):wp(r,e,t);function vy(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,p=t[c],g=t[c+1],w=Hu(p,g,1)^t[a],B=ju(p,g,1)^t[a+1];for(let m=0;m<50;m+=10)r[o+m]^=w,r[o+m+1]^=B}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=jf[o],c=Hu(s,i,a),p=ju(s,i,a),g=Hf[o];s=r[g],i=r[g+1],r[g]=c,r[g+1]=p}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=wy[n],r[1]^=by[n]}_r(t)}class Vl extends _l{constructor(e,t,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,gs(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=cp(this.state)}clone(){return this._cloneInto()}keccak(){xu(this.state32),vy(this.state32,this.rounds),xu(this.state32),this.posOut=0,this.pos=0}update(e){Bi(this),e=Zo(e),Nt(e);const{blockLen:t,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,t&128&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Bi(this,!1),Nt(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return gs(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ld(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,_r(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Vl(t,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Sy=(r,e,t)=>Al(()=>new Vl(e,r,t)),Vu=Sy(1,136,256/8);class Yf extends _l{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ap(e);const n=Zo(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),_r(i)}update(e){return Bi(this),this.iHash.update(e),this}digestInto(e){Bi(this),Nt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Zf=(r,e,t)=>new Yf(r,e).update(t).digest();Zf.create=(r,e)=>new Yf(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gu(r){r.lowS!==void 0&&Hr("lowS",r.lowS),r.prehash!==void 0&&Hr("prehash",r.prehash)}class Ey extends Error{constructor(e=""){super(e)}}const Yn={Err:Ey,_tlv:{encode:(r,e)=>{const{Err:t}=Yn;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,s=Ds(n);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=n>127?Ds(s.length/2|128):"";return Ds(r)+i+s+e},decode(r,e){const{Err:t}=Yn;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const p=e.subarray(n,n+c);if(p.length!==c)throw new t("tlv.decode: length bytes not complete");if(p[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const g of p)o=o<<8|g;if(n+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=Yn;if(r<cs)throw new e("integer: negative integers are not allowed");let t=Ds(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=Yn;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ks(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=Yn,s=Ke("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:p,l:g}=n.decode(2,c);if(g.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(p)}},hexFromSig(r){const{_tlv:e,_int:t}=Yn,n=e.encode(2,t.encode(r.r)),s=e.encode(2,t.encode(r.s)),i=n+s;return e.encode(48,i)}},cs=BigInt(0),ls=BigInt(1),_y=BigInt(2),Hs=BigInt(3),Ay=BigInt(4);function ky(r,e,t){function n(s){const i=r.sqr(s),o=r.mul(i,s);return r.add(r.add(o,r.mul(s,e)),t)}return n}function Jf(r,e,t){const{BYTES:n}=r;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Ke("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{o=r.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(t&&(o=r.create(o)),!r.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Iy(r,e={}){const{Fp:t,Fn:n}=Zd("weierstrass",r,e),{h:s,n:i}=r;Yr(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!t.is0(r.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(Y,W,j){const{x:q,y:G}=W.toAffine(),v=t.toBytes(q);if(Hr("isCompressed",j),j){a();const l=!t.isOdd(G);return Yt(Xf(l),v)}else return Yt(Uint8Array.of(4),v,t.toBytes(G))}function p(Y){Nt(Y);const W=t.BYTES,j=W+1,q=2*W+1,G=Y.length,v=Y[0],l=Y.subarray(1);if(G===j&&(v===2||v===3)){const h=t.fromBytes(l);if(!t.isValid(h))throw new Error("bad point: is not on curve, wrong x");const y=B(h);let S;try{S=t.sqrt(y)}catch(O){const _=O instanceof Error?": "+O.message:"";throw new Error("bad point: is not on curve, sqrt error"+_)}a();const A=t.isOdd(S);return(v&1)===1!==A&&(S=t.neg(S)),{x:h,y:S}}else if(G===q&&v===4){const h=t.fromBytes(l.subarray(W*0,W*1)),y=t.fromBytes(l.subarray(W*1,W*2));if(!m(h,y))throw new Error("bad point: is not on curve");return{x:h,y}}else throw new Error(`bad point: got length ${G}, expected compressed=${j} or uncompressed=${q}`)}const g=e.toBytes||c,w=e.fromBytes||p,B=ky(t,r.a,r.b);function m(Y,W){const j=t.sqr(W),q=B(Y);return t.eql(j,q)}if(!m(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const I=t.mul(t.pow(r.a,Hs),Ay),k=t.mul(t.sqr(r.b),BigInt(27));if(t.is0(t.add(I,k)))throw new Error("bad curve params: a or b");function E(Y,W,j=!1){if(!t.isValid(W)||j&&t.is0(W))throw new Error(`bad point coordinate ${Y}`);return W}function M(Y){if(!(Y instanceof P))throw new Error("ProjectivePoint expected")}const C=Io((Y,W)=>{const{px:j,py:q,pz:G}=Y;if(t.eql(G,t.ONE))return{x:j,y:q};const v=Y.is0();W==null&&(W=v?t.ONE:t.inv(G));const l=t.mul(j,W),h=t.mul(q,W),y=t.mul(G,W);if(v)return{x:t.ZERO,y:t.ZERO};if(!t.eql(y,t.ONE))throw new Error("invZ was invalid");return{x:l,y:h}}),T=Io(Y=>{if(Y.is0()){if(e.allowInfinityPoint&&!t.is0(Y.py))return;throw new Error("bad point: ZERO")}const{x:W,y:j}=Y.toAffine();if(!t.isValid(W)||!t.isValid(j))throw new Error("bad point: x or y not field elements");if(!m(W,j))throw new Error("bad point: equation left != right");if(!Y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function N(Y,W,j,q,G){return j=new P(t.mul(j.px,Y),j.py,j.pz),W=as(q,W),j=as(G,j),W.add(j)}class P{constructor(W,j,q){this.px=E("x",W),this.py=E("y",j,!0),this.pz=E("z",q),Object.freeze(this)}static fromAffine(W){const{x:j,y:q}=W||{};if(!W||!t.isValid(j)||!t.isValid(q))throw new Error("invalid affine point");if(W instanceof P)throw new Error("projective point not allowed");return t.is0(j)&&t.is0(q)?P.ZERO:new P(j,q,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(W){return jd(P,"pz",W)}static fromBytes(W){return Nt(W),P.fromHex(W)}static fromHex(W){const j=P.fromAffine(w(Ke("pointHex",W)));return j.assertValidity(),j}static fromPrivateKey(W){const j=Jf(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return P.BASE.multiply(j(W))}static msm(W,j){return Rl(P,n,W,j)}precompute(W=8,j=!0){return F.setWindowSize(this,W),j||this.multiply(Hs),this}_setWindowSize(W){this.precompute(W)}assertValidity(){T(this)}hasEvenY(){const{y:W}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(W)}equals(W){M(W);const{px:j,py:q,pz:G}=this,{px:v,py:l,pz:h}=W,y=t.eql(t.mul(j,h),t.mul(v,G)),S=t.eql(t.mul(q,h),t.mul(l,G));return y&&S}negate(){return new P(this.px,t.neg(this.py),this.pz)}double(){const{a:W,b:j}=r,q=t.mul(j,Hs),{px:G,py:v,pz:l}=this;let h=t.ZERO,y=t.ZERO,S=t.ZERO,A=t.mul(G,G),L=t.mul(v,v),O=t.mul(l,l),_=t.mul(G,v);return _=t.add(_,_),S=t.mul(G,l),S=t.add(S,S),h=t.mul(W,S),y=t.mul(q,O),y=t.add(h,y),h=t.sub(L,y),y=t.add(L,y),y=t.mul(h,y),h=t.mul(_,h),S=t.mul(q,S),O=t.mul(W,O),_=t.sub(A,O),_=t.mul(W,_),_=t.add(_,S),S=t.add(A,A),A=t.add(S,A),A=t.add(A,O),A=t.mul(A,_),y=t.add(y,A),O=t.mul(v,l),O=t.add(O,O),A=t.mul(O,_),h=t.sub(h,A),S=t.mul(O,L),S=t.add(S,S),S=t.add(S,S),new P(h,y,S)}add(W){M(W);const{px:j,py:q,pz:G}=this,{px:v,py:l,pz:h}=W;let y=t.ZERO,S=t.ZERO,A=t.ZERO;const L=r.a,O=t.mul(r.b,Hs);let _=t.mul(j,v),f=t.mul(q,l),R=t.mul(G,h),oe=t.add(j,q),ee=t.add(v,l);oe=t.mul(oe,ee),ee=t.add(_,f),oe=t.sub(oe,ee),ee=t.add(j,G);let ae=t.add(v,h);return ee=t.mul(ee,ae),ae=t.add(_,R),ee=t.sub(ee,ae),ae=t.add(q,G),y=t.add(l,h),ae=t.mul(ae,y),y=t.add(f,R),ae=t.sub(ae,y),A=t.mul(L,ee),y=t.mul(O,R),A=t.add(y,A),y=t.sub(f,A),A=t.add(f,A),S=t.mul(y,A),f=t.add(_,_),f=t.add(f,_),R=t.mul(L,R),ee=t.mul(O,ee),f=t.add(f,R),R=t.sub(_,R),R=t.mul(L,R),ee=t.add(ee,R),_=t.mul(f,ee),S=t.add(S,_),_=t.mul(ae,ee),y=t.mul(oe,y),y=t.sub(y,_),_=t.mul(oe,f),A=t.mul(ae,A),A=t.add(A,_),new P(y,S,A)}subtract(W){return this.add(W.negate())}is0(){return this.equals(P.ZERO)}multiply(W){const{endo:j}=e;if(!n.isValidNot0(W))throw new Error("invalid scalar: out of range");let q,G;const v=l=>F.wNAFCached(this,l,P.normalizeZ);if(j){const{k1neg:l,k1:h,k2neg:y,k2:S}=j.splitScalar(W),{p:A,f:L}=v(h),{p:O,f:_}=v(S);G=L.add(_),q=N(j.beta,A,O,l,y)}else{const{p:l,f:h}=v(W);q=l,G=h}return P.normalizeZ([q,G])[0]}multiplyUnsafe(W){const{endo:j}=e,q=this;if(!n.isValid(W))throw new Error("invalid scalar: out of range");if(W===cs||q.is0())return P.ZERO;if(W===ls)return q;if(F.hasPrecomputes(this))return this.multiply(W);if(j){const{k1neg:G,k1:v,k2neg:l,k2:h}=j.splitScalar(W),{p1:y,p2:S}=Yp(P,q,v,h);return N(j.beta,y,S,G,l)}else return F.wNAFCachedUnsafe(q,W)}multiplyAndAddUnsafe(W,j,q){const G=this.multiplyUnsafe(j).add(W.multiplyUnsafe(q));return G.is0()?void 0:G}toAffine(W){return C(this,W)}isTorsionFree(){const{isTorsionFree:W}=e;return s===ls?!0:W?W(P,this):F.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:W}=e;return s===ls?this:W?W(P,this):this.multiplyUnsafe(s)}toBytes(W=!0){return Hr("isCompressed",W),this.assertValidity(),g(P,this,W)}toRawBytes(W=!0){return this.toBytes(W)}toHex(W=!0){return qr(this.toBytes(W))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}P.BASE=new P(r.Gx,r.Gy,t.ONE),P.ZERO=new P(t.ZERO,t.ONE,t.ZERO),P.Fp=t,P.Fn=n;const D=n.BITS,F=Yd(P,e.endo?Math.ceil(D/2):D);return P}function Xf(r){return Uint8Array.of(r?2:3)}function xy(r,e,t={}){Yr(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||kl,s=e.hmac||((q,...G)=>Zf(e.hash,q,Yt(...G))),{Fp:i,Fn:o}=r,{ORDER:a,BITS:c}=o;function p(q){const G=a>>ls;return q>G}function g(q){return p(q)?o.neg(q):q}function w(q,G){if(!o.isValidNot0(G))throw new Error(`invalid signature ${q}: out of range 1..CURVE.n`)}class B{constructor(G,v,l){w("r",G),w("s",v),this.r=G,this.s=v,l!=null&&(this.recovery=l),Object.freeze(this)}static fromCompact(G){const v=o.BYTES,l=Ke("compactSignature",G,v*2);return new B(o.fromBytes(l.subarray(0,v)),o.fromBytes(l.subarray(v,v*2)))}static fromDER(G){const{r:v,s:l}=Yn.toSig(Ke("DER",G));return new B(v,l)}assertValidity(){}addRecoveryBit(G){return new B(this.r,this.s,G)}recoverPublicKey(G){const v=i.ORDER,{r:l,s:h,recovery:y}=this;if(y==null||![0,1,2,3].includes(y))throw new Error("recovery id invalid");if(a*_y<v&&y>1)throw new Error("recovery id is ambiguous for h>1 curve");const A=y===2||y===3?l+a:l;if(!i.isValid(A))throw new Error("recovery id 2 or 3 invalid");const L=i.toBytes(A),O=r.fromHex(Yt(Xf((y&1)===0),L)),_=o.inv(A),f=T(Ke("msgHash",G)),R=o.create(-f*_),oe=o.create(h*_),ee=r.BASE.multiplyUnsafe(R).add(O.multiplyUnsafe(oe));if(ee.is0())throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,o.neg(this.s),this.recovery):this}toBytes(G){if(G==="compact")return Yt(o.toBytes(this.r),o.toBytes(this.s));if(G==="der")return El(Yn.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return qr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return qr(this.toBytes("compact"))}}const m=Jf(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey),I={isValidPrivateKey(q){try{return m(q),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const q=a;return jp(n(Hd(q)),q)},precompute(q=8,G=r.BASE){return G.precompute(q,!1)}};function k(q,G=!0){return r.fromPrivateKey(q).toBytes(G)}function E(q){if(typeof q=="bigint")return!1;if(q instanceof r)return!0;const v=Ke("key",q).length,l=i.BYTES,h=l+1,y=2*l+1;if(!(t.allowedPrivateKeyLengths||o.BYTES===h))return v===h||v===y}function M(q,G,v=!0){if(E(q)===!0)throw new Error("first arg must be private key");if(E(G)===!1)throw new Error("second arg must be public key");return r.fromHex(G).multiply(m(q)).toBytes(v)}const C=e.bits2int||function(q){if(q.length>8192)throw new Error("input is too large");const G=ks(q),v=q.length*8-c;return v>0?G>>BigInt(v):G},T=e.bits2int_modN||function(q){return o.create(C(q))},N=Xo(c);function P(q){return gr("num < 2^"+c,q,cs,N),o.toBytes(q)}function D(q,G,v=F){if(["recovered","canonical"].some(oe=>oe in v))throw new Error("sign() legacy options not supported");const{hash:l}=e;let{lowS:h,prehash:y,extraEntropy:S}=v;h==null&&(h=!0),q=Ke("msgHash",q),Gu(v),y&&(q=Ke("prehashed msgHash",l(q)));const A=T(q),L=m(G),O=[P(L),P(A)];if(S!=null&&S!==!1){const oe=S===!0?n(i.BYTES):S;O.push(Ke("extraEntropy",oe))}const _=Yt(...O),f=A;function R(oe){const ee=C(oe);if(!o.isValidNot0(ee))return;const ae=o.inv(ee),We=r.BASE.multiply(ee).toAffine(),be=o.create(We.x);if(be===cs)return;const Ae=o.create(ae*o.create(f+be*L));if(Ae===cs)return;let yn=(We.x===be?0:2)|Number(We.y&ls),Re=Ae;return h&&p(Ae)&&(Re=g(Ae),yn^=1),new B(be,Re,yn)}return{seed:_,k2sig:R}}const F={lowS:e.lowS,prehash:!1},Y={lowS:e.lowS,prehash:!1};function W(q,G,v=F){const{seed:l,k2sig:h}=D(q,G,v);return Np(e.hash.outputLen,o.BYTES,s)(l,h)}r.BASE.precompute(8);function j(q,G,v,l=Y){const h=q;G=Ke("msgHash",G),v=Ke("publicKey",v),Gu(l);const{lowS:y,prehash:S,format:A}=l;if("strict"in l)throw new Error("options.strict was renamed to lowS");if(A!==void 0&&!["compact","der","js"].includes(A))throw new Error('format must be "compact", "der" or "js"');const L=typeof h=="string"||Yo(h),O=!L&&!A&&typeof h=="object"&&h!==null&&typeof h.r=="bigint"&&typeof h.s=="bigint";if(!L&&!O)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let _,f;try{if(O)if(A===void 0||A==="js")_=new B(h.r,h.s);else throw new Error("invalid format");if(L){try{A!=="compact"&&(_=B.fromDER(h))}catch(Re){if(!(Re instanceof Yn.Err))throw Re}!_&&A!=="der"&&(_=B.fromCompact(h))}f=r.fromHex(v)}catch{return!1}if(!_||y&&_.hasHighS())return!1;S&&(G=e.hash(G));const{r:R,s:oe}=_,ee=T(G),ae=o.inv(oe),We=o.create(ee*ae),be=o.create(R*ae),Ae=r.BASE.multiplyUnsafe(We).add(f.multiplyUnsafe(be));return Ae.is0()?!1:o.create(Ae.x)===R}return Object.freeze({getPublicKey:k,getSharedSecret:M,sign:W,verify:j,utils:I,Point:r,Signature:B})}function By(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Zr(e.n,r.nBitLength),s={Fp:t,Fn:n,allowedPrivateKeyLengths:r.allowedPrivateKeyLengths,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,wrapPrivateKey:r.wrapPrivateKey,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:s}}function Ry(r){const{CURVE:e,curveOpts:t}=By(r),n={hash:r.hash,hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:n}}function My(r,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:r})}function Ty(r){const{CURVE:e,curveOpts:t,ecdsaOpts:n}=Ry(r),s=Iy(e,t),i=xy(s,n,t);return My(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Cy(r,e){const t=n=>Ty({...r,hash:n});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Po={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Ly=BigInt(1),xc=BigInt(2),Yu=(r,e)=>(r+e/xc)/e;function Py(r){const e=Po.p,t=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),p=r*r*r%e,g=p*p*r%e,w=Xe(g,t,e)*g%e,B=Xe(w,t,e)*g%e,m=Xe(B,xc,e)*p%e,I=Xe(m,s,e)*m%e,k=Xe(I,i,e)*I%e,E=Xe(k,a,e)*k%e,M=Xe(E,c,e)*E%e,C=Xe(M,a,e)*k%e,T=Xe(C,t,e)*g%e,N=Xe(T,o,e)*I%e,P=Xe(N,n,e)*p%e,D=Xe(P,xc,e);if(!Bc.eql(Bc.sqr(D),r))throw new Error("Cannot find square root");return D}const Bc=Zr(Po.p,void 0,void 0,{sqrt:Py}),Gl=Cy({...Po,Fp:Bc,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=Po.n,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Ly*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=Yu(i*r,e),c=Yu(-n*r,e);let p=Ge(r-a*t-c*s,e),g=Ge(-a*n-c*i,e);const w=p>o,B=g>o;if(w&&(p=e-p),B&&(g=e-g),p>o||g>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:w,k1:p,k2neg:B,k2:g}}}},Ud),Ny=ot.utils.randomPrivateKey,Zu=()=>{const r=ot.utils.randomPrivateKey(),e=No(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},No=ot.getPublicKey;function Ju(r){try{return ot.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Yl=(r,e)=>ot.sign(r,e.slice(0,32)),Oy=ot.verify,Ee=r=>fe.Buffer.isBuffer(r)?r:r instanceof Uint8Array?fe.Buffer.from(r.buffer,r.byteOffset,r.byteLength):fe.Buffer.from(r);class Zl{constructor(e){Object.assign(this,e)}encode(){return fe.Buffer.from(pf(us,this))}static decode(e){return gf(us,this,e)}static decodeUnchecked(e){return lf(us,this,e)}}class Wy extends Zl{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const us=new Map;var Qf;const eh=32,On=32;function Uy(r){return r._bn!==void 0}let Xu=1;class Q extends Zl{constructor(e){if(super({}),this._bn=void 0,Uy(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Dt.decode(e);if(t.length!=On)throw new Error("Invalid public key input");this._bn=new Fu(t)}else this._bn=new Fu(e);if(this._bn.byteLength()>On)throw new Error("Invalid public key input")}}static unique(){const e=new Q(Xu);return Xu+=1,new Q(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Dt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(fe.Buffer);if(e.length===On)return e;const t=fe.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const s=fe.Buffer.concat([e.toBuffer(),fe.Buffer.from(t),n.toBuffer()]),i=Ku(s);return new Q(i)}static createProgramAddressSync(e,t){let n=fe.Buffer.alloc(0);e.forEach(function(i){if(i.length>eh)throw new TypeError("Max seed length exceeded");n=fe.Buffer.concat([n,Ee(i)])}),n=fe.Buffer.concat([n,t.toBuffer(),fe.Buffer.from("ProgramDerivedAddress")]);const s=Ku(n);if(Ju(s))throw new Error("Invalid seeds, address must fall off the curve");return new Q(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,s;for(;n!=0;){try{const i=e.concat(fe.Buffer.from([n]));s=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Q(e);return Ju(t.toBytes())}}Qf=Q;Q.default=new Qf("11111111111111111111111111111111");us.set(Q,{kind:"struct",fields:[["_bn","u256"]]});class zy{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=Ee(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=Ee(Ny()),this._publicKey=Ee(No(this._secretKey))}get publicKey(){return new Q(this._publicKey)}get secretKey(){return fe.Buffer.concat([this._secretKey,this._publicKey],64)}}const Dy=new Q("BPFLoader1111111111111111111111111111111111"),Er=1232,oa=127,Ti=64;class Jl extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Jl.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Xl extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Xl.prototype,"name",{value:"TransactionExpiredTimeoutError"});class bi extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(bi.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class bs{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const ke=(r="publicKey")=>He(32,r),Fy=(r="signature")=>He(64,r),Or=(r="string")=>{const e=le([ce("length"),ce("lengthPadding"),He(Sr(ce(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,o)=>t(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:fe.Buffer.from(i,"utf8")};return n(c,o,a)},s.alloc=i=>ce().span+ce().span+fe.Buffer.from(i,"utf8").length,s},Ky=(r="authorized")=>le([ke("staker"),ke("withdrawer")],r),$y=(r="lockup")=>le([dn("unixTimestamp"),dn("epoch"),ke("custodian")],r),qy=(r="voteInit")=>le([ke("nodePubkey"),ke("authorizedVoter"),ke("authorizedWithdrawer"),Be("commission")],r),Hy=(r="voteAuthorizeWithSeedArgs")=>le([ce("voteAuthorizationType"),ke("currentAuthorityDerivedKeyOwnerPubkey"),Or("currentAuthorityDerivedKeySeed"),ke("newAuthorized")],r);function th(r,e){const t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*t(s.elementLayout)}else if("fields"in s)return th({layout:s},e[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=t(s)}),n}function rn(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,!(n&128))break}return e}function fn(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Te(r,e){if(!r)throw new Error(e||"Assertion failed")}class aa{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,s=o=>{const a=o.toBase58();let c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},i=s(t);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new aa(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Te(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Te(t.length>0,"Expected at least one writable signer key");const[c]=t[0];Te(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([c])=>new Q(c)),...n.map(([c])=>new Q(c)),...s.map(([c])=>new Q(c)),...i.map(([c])=>new Q(c))];return[o,a]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,t){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const a=new Q(i),c=e.findIndex(p=>p.equals(a));c>=0&&(Te(c<256,"Max lookup table index exceeded"),n.push(c),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const nh="Reached end of buffer unexpectedly";function Tn(r){if(r.length===0)throw new Error(nh);return r.shift()}function sn(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(nh);return r.splice(...e)}class In{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Q(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Dt.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new bs(this.staticAccountKeys)}static compile(e){const t=aa.compile(e.instructions,e.payerKey),[n,s]=t.getMessageComponents(),o=new bs(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Dt.encode(a.data)}));return new In({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,i=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];fn(t,e);const n=this.instructions.map(w=>{const{accounts:B,programIdIndex:m}=w,I=Array.from(Dt.decode(w.data));let k=[];fn(k,B.length);let E=[];return fn(E,I.length),{programIdIndex:m,keyIndicesCount:fe.Buffer.from(k),keyIndices:B,dataLength:fe.Buffer.from(E),data:I}});let s=[];fn(s,n.length);let i=fe.Buffer.alloc(Er);fe.Buffer.from(s).copy(i);let o=s.length;n.forEach(w=>{const m=le([Be("programIdIndex"),He(w.keyIndicesCount.length,"keyIndicesCount"),Ft(Be("keyIndex"),w.keyIndices.length,"keyIndices"),He(w.dataLength.length,"dataLength"),Ft(Be("userdatum"),w.data.length,"data")]).encode(w,i,o);o+=m}),i=i.slice(0,o);const a=le([He(1,"numRequiredSignatures"),He(1,"numReadonlySignedAccounts"),He(1,"numReadonlyUnsignedAccounts"),He(t.length,"keyCount"),Ft(ke("key"),e,"keys"),ke("recentBlockhash")]),c={numRequiredSignatures:fe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:fe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:fe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:fe.Buffer.from(t),keys:this.accountKeys.map(w=>Ee(w.toBytes())),recentBlockhash:Dt.decode(this.recentBlockhash)};let p=fe.Buffer.alloc(2048);const g=a.encode(c,p);return i.copy(p,g),p.slice(0,g+i.length)}static from(e){let t=[...e];const n=Tn(t);if(n!==(n&oa))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Tn(t),i=Tn(t),o=rn(t);let a=[];for(let B=0;B<o;B++){const m=sn(t,0,On);a.push(new Q(fe.Buffer.from(m)))}const c=sn(t,0,On),p=rn(t);let g=[];for(let B=0;B<p;B++){const m=Tn(t),I=rn(t),k=sn(t,0,I),E=rn(t),M=sn(t,0,E),C=Dt.encode(fe.Buffer.from(M));g.push({programIdIndex:m,accounts:k,data:C})}const w={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Dt.encode(fe.Buffer.from(c)),accountKeys:a,instructions:g};return new In(w)}}class Vr{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new bs(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)t.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)t.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=aa.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const g of i){const w=t.extractTableLookup(g);if(w!==void 0){const[B,{writable:m,readonly:I}]=w;n.push(B),s.writable.push(...m),s.readonly.push(...I)}}const[o,a]=t.getMessageComponents(),p=new bs(a,s).compileInstructions(e.instructions);return new Vr({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:p,addressTableLookups:n})}serialize(){const e=Array();fn(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();fn(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();fn(i,this.addressTableLookups.length);const o=le([Be("prefix"),le([Be("numRequiredSignatures"),Be("numReadonlySignedAccounts"),Be("numReadonlyUnsignedAccounts")],"header"),He(e.length,"staticAccountKeysLength"),Ft(ke(),this.staticAccountKeys.length,"staticAccountKeys"),ke("recentBlockhash"),He(n.length,"instructionsLength"),He(t.length,"serializedInstructions"),He(i.length,"addressTableLookupsLength"),He(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Er),p=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(g=>g.toBytes()),recentBlockhash:Dt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,p)}serializeInstructions(){let e=0;const t=new Uint8Array(Er);for(const n of this.compiledInstructions){const s=Array();fn(s,n.accountKeyIndexes.length);const i=Array();fn(i,n.data.length);const o=le([Be("programIdIndex"),He(s.length,"encodedAccountKeyIndexesLength"),Ft(Be(),n.accountKeyIndexes.length,"accountKeyIndexes"),He(i.length,"encodedDataLength"),He(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Er);for(const n of this.addressTableLookups){const s=Array();fn(s,n.writableIndexes.length);const i=Array();fn(i,n.readonlyIndexes.length);const o=le([ke("accountKey"),He(s.length,"encodedWritableIndexesLength"),Ft(Be(),n.writableIndexes.length,"writableIndexes"),He(i.length,"encodedReadonlyIndexesLength"),Ft(Be(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=Tn(t),s=n&oa;Te(n!==s,"Expected versioned message but received legacy message");const i=s;Te(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Tn(t),numReadonlySignedAccounts:Tn(t),numReadonlyUnsignedAccounts:Tn(t)},a=[],c=rn(t);for(let I=0;I<c;I++)a.push(new Q(sn(t,0,On)));const p=Dt.encode(sn(t,0,On)),g=rn(t),w=[];for(let I=0;I<g;I++){const k=Tn(t),E=rn(t),M=sn(t,0,E),C=rn(t),T=new Uint8Array(sn(t,0,C));w.push({programIdIndex:k,accountKeyIndexes:M,data:T})}const B=rn(t),m=[];for(let I=0;I<B;I++){const k=new Q(sn(t,0,On)),E=rn(t),M=sn(t,0,E),C=rn(t),T=sn(t,0,C);m.push({accountKey:k,writableIndexes:M,readonlyIndexes:T})}return new Vr({header:o,staticAccountKeys:a,recentBlockhash:p,compiledInstructions:w,addressTableLookups:m})}}const ca={deserializeMessageVersion(r){const e=r[0],t=e&oa;return t===e?"legacy":t},deserialize:r=>{const e=ca.deserializeMessageVersion(r);if(e==="legacy")return In.from(r);if(e===0)return Vr.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Vn=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const jy=fe.Buffer.alloc(Ti).fill(0);class Ue{constructor(e){this.keys=void 0,this.programId=void 0,this.data=fe.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class xe{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Ue(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let k=0;k<t.length;k++)if(t[k].programId===void 0)throw new Error(`Transaction instruction index ${k} has undefined program id`);const s=[],i=[];t.forEach(k=>{k.keys.forEach(M=>{i.push({...M})});const E=k.programId.toString();s.includes(E)||s.push(E)}),s.forEach(k=>{i.push({pubkey:new Q(k),isSigner:!1,isWritable:!1})});const o=[];i.forEach(k=>{const E=k.pubkey.toString(),M=o.findIndex(C=>C.pubkey.toString()===E);M>-1?(o[M].isWritable=o[M].isWritable||k.isWritable,o[M].isSigner=o[M].isSigner||k.isSigner):o.push(k)}),o.sort(function(k,E){if(k.isSigner!==E.isSigner)return k.isSigner?-1:1;if(k.isWritable!==E.isWritable)return k.isWritable?-1:1;const M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return k.pubkey.toBase58().localeCompare(E.pubkey.toBase58(),"en",M)});const a=o.findIndex(k=>k.pubkey.equals(n));if(a>-1){const[k]=o.splice(a,1);k.isSigner=!0,k.isWritable=!0,o.unshift(k)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const k of this.signatures){const E=o.findIndex(M=>M.pubkey.equals(k.publicKey));if(E>-1)o[E].isSigner||(o[E].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${k.publicKey.toString()}`)}let c=0,p=0,g=0;const w=[],B=[];o.forEach(({pubkey:k,isSigner:E,isWritable:M})=>{E?(w.push(k.toString()),c+=1,M||(p+=1)):(B.push(k.toString()),M||(g+=1))});const m=w.concat(B),I=t.map(k=>{const{data:E,programId:M}=k;return{programIdIndex:m.indexOf(M.toString()),accounts:k.keys.map(C=>m.indexOf(C.pubkey.toString())),data:Dt.encode(E)}});return I.forEach(k=>{Te(k.programIdIndex>=0),k.accounts.forEach(E=>Te(E>=0))}),new In({header:{numRequiredSignatures:c,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:g},accountKeys:m,recentBlockhash:e,instructions:I})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,i)=>t[i].equals(s.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const s=n.toString();return t.has(s)?!1:(t.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(s=>{const i=Yl(n,s.secretKey);this._addSignature(s.publicKey,Ee(i))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Te(t.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=fe.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?t&&(n.missing||(n.missing=[])).push(i):Oy(s,e,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,t);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,n=[];fn(n,t.length);const s=n.length+t.length*64+e.length,i=fe.Buffer.alloc(s);return Te(t.length<256),fe.Buffer.from(n).copy(i,0),t.forEach(({signature:o},a)=>{o!==null&&(Te(o.length===64,"signature has invalid length"),fe.Buffer.from(o).copy(i,n.length+a*64))}),e.copy(i,n.length+t.length*64),Te(i.length<=Er,`Transaction too large: ${i.length} > ${Er}`),i}get keys(){return Te(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Te(this.instructions.length===1),this.instructions[0].programId}get data(){return Te(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=rn(t);let s=[];for(let i=0;i<n;i++){const o=sn(t,0,Ti);s.push(Dt.encode(fe.Buffer.from(o)))}return xe.populate(In.from(t),s)}static populate(e,t=[]){const n=new xe;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((s,i)=>{const o={signature:s==Dt.encode(jy)?null:Dt.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Ue({keys:i,programId:e.accountKeys[s.programIdIndex],data:Dt.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class Ql{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:s,recentBlockhash:i}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:c}=n,p=o-a;Te(p>0,"Message header is invalid");const g=e.staticAccountKeys.length-o-c;Te(g>=0,"Message header is invalid");const w=e.getAccountKeys(t),B=w.get(0);if(B===void 0)throw new Error("Failed to decompile message because no account keys were found");const m=[];for(const I of s){const k=[];for(const M of I.accountKeyIndexes){const C=w.get(M);if(C===void 0)throw new Error(`Failed to find key for account key index ${M}`);const T=M<o;let N;T?N=M<p:M<w.staticAccountKeys.length?N=M-o<g:N=M-w.staticAccountKeys.length<w.accountKeysFromLookups.writable.length,k.push({pubkey:C,isSigner:M<n.numRequiredSignatures,isWritable:N})}const E=w.get(I.programIdIndex);if(E===void 0)throw new Error(`Failed to find program id for program id index ${I.programIdIndex}`);m.push(new Ue({programId:E,data:Ee(I.data),keys:k}))}return new Ql({payerKey:B,instructions:m,recentBlockhash:i})}compileToLegacyMessage(){return In.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Vr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Ci{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Te(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(Ti));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();fn(t,this.signatures.length);const n=le([He(t.length,"encodedSignaturesLength"),Ft(Fy(),this.signatures.length,"signatures"),He(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let t=[...e];const n=[],s=rn(t);for(let o=0;o<s;o++)n.push(new Uint8Array(sn(t,0,Ti)));const i=ca.deserialize(new Uint8Array(t));return new Ci(i,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(o=>o.equals(s.publicKey));Te(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Yl(t,s.secretKey)}}addSignature(e,t){Te(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Te(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const Vy=160,Gy=64,Yy=Vy/Gy,rh=1e3/Yy,Rn=new Q("SysvarC1ock11111111111111111111111111111111"),Zy=new Q("SysvarEpochSchedu1e111111111111111111111111"),Jy=new Q("Sysvar1nstructions1111111111111111111111111"),Ys=new Q("SysvarRecentB1ockHashes11111111111111111111"),Li=new Q("SysvarRent111111111111111111111111111111111"),Xy=new Q("SysvarRewards111111111111111111111111111111"),Qy=new Q("SysvarS1otHashes111111111111111111111111111"),ew=new Q("SysvarS1otHistory11111111111111111111111111"),Zs=new Q("SysvarStakeHistory1111111111111111111111111");class vs extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,t(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const tw={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class de extends Error{constructor({code:e,message:t,data:n},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}async function Rc(r,e,t,n){const s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},i=await r.sendTransaction(e,t,s);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:i,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:a}=e.nonceInfo,c=a.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:e.nonceInfo.nonce,signature:i},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(i,n&&n.commitment)).value;if(o.err)throw i!=null?new vs({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function Cr(r){return new Promise(e=>setTimeout(e,r))}function Ie(r,e){const t=r.layout.span>=0?r.layout.span:th(r,e),n=fe.Buffer.alloc(t),s=Object.assign({instruction:r.index},e);return r.layout.encode(s,n),n}function Le(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const ih=Wt("lamportsPerSignature"),sh=le([ce("version"),ce("state"),ke("authorizedPubkey"),ke("nonce"),le([ih],"feeCalculator")]),Mc=sh.span;class la{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=sh.decode(Ee(e),0);return new la({authorizedPubkey:new Q(t.authorizedPubkey),nonce:new Q(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function Pi(r){const e=He(8,r),t=e.decode.bind(e),n=e.encode.bind(e),s=e,i=Bm();return s.decode=(o,a)=>{const c=t(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const p=i.encode(o);return n(p,a,c)},s}class nw{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ce("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Fe))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:s}=Le(Fe.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new Q(s)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=Le(Fe.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:s}=Le(Fe.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new Q(s)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=Le(Fe.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:s,programId:i}=Le(Fe.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Q(t),seed:n,space:s,programId:new Q(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=Le(Fe.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new Q(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:s}=Le(Fe.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Q(t),seed:n,programId:new Q(s)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:s,space:i,programId:o}=Le(Fe.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Q(t),seed:n,lamports:s,space:i,programId:new Q(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=Le(Fe.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Q(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Le(Fe.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Le(Fe.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=Le(Fe.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Q(t)}}static checkProgramId(e){if(!e.equals(Pt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Fe=Object.freeze({Create:{index:0,layout:le([ce("instruction"),dn("lamports"),dn("space"),ke("programId")])},Assign:{index:1,layout:le([ce("instruction"),ke("programId")])},Transfer:{index:2,layout:le([ce("instruction"),Pi("lamports")])},CreateWithSeed:{index:3,layout:le([ce("instruction"),ke("base"),Or("seed"),dn("lamports"),dn("space"),ke("programId")])},AdvanceNonceAccount:{index:4,layout:le([ce("instruction")])},WithdrawNonceAccount:{index:5,layout:le([ce("instruction"),dn("lamports")])},InitializeNonceAccount:{index:6,layout:le([ce("instruction"),ke("authorized")])},AuthorizeNonceAccount:{index:7,layout:le([ce("instruction"),ke("authorized")])},Allocate:{index:8,layout:le([ce("instruction"),dn("space")])},AllocateWithSeed:{index:9,layout:le([ce("instruction"),ke("base"),Or("seed"),dn("space"),ke("programId")])},AssignWithSeed:{index:10,layout:le([ce("instruction"),ke("base"),Or("seed"),ke("programId")])},TransferWithSeed:{index:11,layout:le([ce("instruction"),Pi("lamports"),Or("seed"),ke("programId")])},UpgradeNonceAccount:{index:12,layout:le([ce("instruction")])}});class Pt{constructor(){}static createAccount(e){const t=Fe.Create,n=Ie(t,{lamports:e.lamports,space:e.space,programId:Ee(e.programId.toBuffer())});return new Ue({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const s=Fe.TransferWithSeed;t=Ie(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ee(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Fe.Transfer;t=Ie(s,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Ue({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const s=Fe.AssignWithSeed;t=Ie(s,{base:Ee(e.basePubkey.toBuffer()),seed:e.seed,programId:Ee(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Fe.Assign;t=Ie(s,{programId:Ee(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ue({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Fe.CreateWithSeed,n=Ie(t,{base:Ee(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ee(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Ue({keys:s,programId:this.programId,data:n})}static createNonceAccount(e){const t=new xe;"basePubkey"in e&&"seed"in e?t.add(Pt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Mc,programId:this.programId})):t.add(Pt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Mc,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Fe.InitializeNonceAccount,n=Ie(t,{authorized:Ee(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ys,isSigner:!1,isWritable:!1},{pubkey:Li,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Ue(s)}static nonceAdvance(e){const t=Fe.AdvanceNonceAccount,n=Ie(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ys,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Ue(s)}static nonceWithdraw(e){const t=Fe.WithdrawNonceAccount,n=Ie(t,{lamports:e.lamports});return new Ue({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ys,isSigner:!1,isWritable:!1},{pubkey:Li,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Fe.AuthorizeNonceAccount,n=Ie(t,{authorized:Ee(e.newAuthorizedPubkey.toBuffer())});return new Ue({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const s=Fe.AllocateWithSeed;t=Ie(s,{base:Ee(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ee(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Fe.Allocate;t=Ie(s,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ue({keys:n,programId:this.programId,data:t})}}Pt.programId=new Q("11111111111111111111111111111111");const rw=Er-300;class Gr{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Gr.chunkSize)+1+1)}static async load(e,t,n,s,i){{const w=await e.getMinimumBalanceForRentExemption(i.length),B=await e.getAccountInfo(n.publicKey,"confirmed");let m=null;if(B!==null){if(B.executable)return console.error("Program load failed, account is already executable"),!1;B.data.length!==i.length&&(m=m||new xe,m.add(Pt.allocate({accountPubkey:n.publicKey,space:i.length}))),B.owner.equals(s)||(m=m||new xe,m.add(Pt.assign({accountPubkey:n.publicKey,programId:s}))),B.lamports<w&&(m=m||new xe,m.add(Pt.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:w-B.lamports})))}else m=new xe().add(Pt.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:w>0?w:1,space:i.length,programId:s}));m!==null&&await Rc(e,m,[t,n],{commitment:"confirmed"})}const o=le([ce("instruction"),ce("offset"),ce("bytesLength"),ce("bytesLengthPadding"),Ft(Be("byte"),Sr(ce(),-8),"bytes")]),a=Gr.chunkSize;let c=0,p=i,g=[];for(;p.length>0;){const w=p.slice(0,a),B=fe.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:w,bytesLength:0,bytesLengthPadding:0},B);const m=new xe().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:B});g.push(Rc(e,m,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Cr(1e3/4),c+=a,p=p.slice(a)}await Promise.all(g);{const w=le([ce("instruction")]),B=fe.Buffer.alloc(w.span);w.encode({instruction:1},B);const m=new xe().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Li,isSigner:!1,isWritable:!1}],programId:s,data:B}),I="processed",k=await e.sendTransaction(m,[t,n],{preflightCommitment:I}),{context:E,value:M}=await e.confirmTransaction({signature:k,lastValidBlockHeight:m.lastValidBlockHeight,blockhash:m.recentBlockhash},I);if(M.err)throw new Error(`Transaction ${k} failed (${JSON.stringify(M)})`);for(;;){try{if(await e.getSlot({commitment:I})>E.slot)break}catch{}await new Promise(C=>setTimeout(C,Math.round(rh/2)))}}return!0}}Gr.chunkSize=rw;const iw=new Q("BPFLoader2111111111111111111111111111111111");class sw{static getMinNumSignatures(e){return Gr.getMinNumSignatures(e)}static load(e,t,n,s,i){return Gr.load(e,t,n,i,s)}}function ow(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ic,Qu;function aw(){if(Qu)return ic;Qu=1;var r=Object.prototype.toString,e=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function t(n,s){var i,o,a,c,p,g,w;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),s);if(w=r.call(n),w==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=t(n[i],!0)+",";return o>-1&&(a+=t(n[i],!0)),a+"]"}else if(w==="[object Object]"){for(c=e(n).sort(),o=c.length,a="",i=0;i<o;)p=c[i],g=t(n[p],!1),g!==void 0&&(a&&(a+=","),a+=JSON.stringify(p)+":"+g),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return ic=function(n){var s=t(n,!1);if(s!==void 0)return""+s},ic}var cw=aw(),ed=ow(cw);const Gi=32;function sc(r){let e=0;for(;r>1;)r/=2,e++;return e}function lw(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class oh{constructor(e,t,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=sc(lw(e+Gi+1))-sc(Gi)-1,n=this.getSlotsInEpoch(t),s=e-(n-Gi);return[t,s]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=t%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Gi:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+sc(Gi)):this.slotsPerEpoch}}var uw=globalThis.fetch;class dw extends fy{constructor(e,t,n){const s=i=>{const o=uy(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function fw(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const td=56;class Tc{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=fw(hw,e),n=e.length-td;Te(n>=0,"lookup table is invalid"),Te(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=le([Ft(ke(),s,"addresses")]).decode(e.slice(td));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Q(t.authority[0]):void 0,addresses:i.map(o=>new Q(o))}}}const hw={index:1,layout:le([ce("typeIndex"),Pi("deactivationSlot"),Wt("lastExtendedSlot"),Be("lastExtendedStartIndex"),Be(),Ft(ke(),Sr(Be(),-1),"authority")])},pw=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function gw(r){const e=r.match(pw);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,s,i]=e,o=r.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${n}${c}${i}`}const et=Rs(Hl(Q),X(),r=>new Q(r)),ah=jl([X(),Qe("base64")]),eu=Rs(Hl(fe.Buffer),ah,r=>fe.Buffer.from(r[0],"base64")),ch=30*1e3;function mw(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function De(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...s}=r;e=n,t=s}return{commitment:e,config:t}}function nd(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function lh(r){return tn([Z({jsonrpc:Qe("2.0"),id:X(),result:r}),Z({jsonrpc:Qe("2.0"),id:X(),error:Z({code:$i(),message:X(),data:pe(Pm())})})])}const yw=lh($i());function Se(r){return Rs(lh(r),yw,e=>"error"in e?e:{...e,result:te(e.result,r)})}function st(r){return Se(Z({context:Z({slot:$()}),value:r}))}function ua(r){return Z({context:Z({slot:$()}),value:r})}function oc(r,e){return r===0?new Vr({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Q(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Dt.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new In(e)}const ww=Z({foundation:$(),foundationTerm:$(),initial:$(),taper:$(),terminal:$()}),bw=Se(ie(se(Z({epoch:$(),effectiveSlot:$(),amount:$(),postBalance:$(),commission:pe(se($()))})))),vw=ie(Z({slot:$(),prioritizationFee:$()})),Sw=Z({total:$(),validator:$(),foundation:$(),epoch:$()}),Ew=Z({epoch:$(),slotIndex:$(),slotsInEpoch:$(),absoluteSlot:$(),blockHeight:pe($()),transactionCount:pe($())}),_w=Z({slotsPerEpoch:$(),leaderScheduleSlotOffset:$(),warmup:Wn(),firstNormalEpoch:$(),firstNormalSlot:$()}),Aw=Uf(X(),ie($())),Qr=se(tn([Z({}),X()])),kw=Z({err:Qr}),Iw=Qe("receivedSignature"),xw=Z({"solana-core":X(),"feature-set":pe($())}),Bw=Z({program:X(),programId:et,parsed:$i()}),Rw=Z({programId:et,accounts:ie(et),data:X()}),rd=st(Z({err:se(tn([Z({}),X()])),logs:se(ie(X())),accounts:pe(se(ie(se(Z({executable:Wn(),owner:X(),lamports:$(),data:ie(X()),rentEpoch:pe($())}))))),unitsConsumed:pe($()),returnData:pe(se(Z({programId:X(),data:jl([X(),Qe("base64")])}))),innerInstructions:pe(se(ie(Z({index:$(),instructions:ie(tn([Bw,Rw]))}))))})),Mw=st(Z({byIdentity:Uf(X(),ie($())),range:Z({firstSlot:$(),lastSlot:$()})}));function Tw(r,e,t,n,s,i){const o=t||uw;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(g,w)=>{const B=await new Promise((m,I)=>{try{n(g,w,(k,E)=>m([k,E]))}catch(k){I(k)}});return await o(...B)}),new ay(async(g,w)=>{const B={method:"POST",body:g,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},T1)};try{let m=5,I,k=500;for(;c?I=await c(r,B):I=await o(r,B),!(I.status!==429||s===!0||(m-=1,m===0));)console.error(`Server responded with ${I.status} ${I.statusText}.  Retrying after ${k}ms delay...`),await Cr(k),k*=2;const E=await I.text();I.ok?w(null,E):w(new Error(`${I.status} ${I.statusText}: ${E}`))}catch(m){m instanceof Error&&w(m)}},{})}function Cw(r){return(e,t)=>new Promise((n,s)=>{r.request(e,t,(i,o)=>{if(i){s(i);return}n(o)})})}function Lw(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const s=e.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}t(o)})})}const Pw=Se(ww),Nw=Se(Sw),Ow=Se(vw),Ww=Se(Ew),Uw=Se(_w),zw=Se(Aw),Dw=Se($()),Fw=st(Z({total:$(),circulating:$(),nonCirculating:$(),nonCirculatingAccounts:ie(et)})),Cc=Z({amount:X(),uiAmount:se($()),decimals:$(),uiAmountString:pe(X())}),Kw=st(ie(Z({address:et,amount:X(),uiAmount:se($()),decimals:$(),uiAmountString:pe(X())}))),$w=st(ie(Z({pubkey:et,account:Z({executable:Wn(),owner:et,lamports:$(),data:eu,rentEpoch:$()})}))),Lc=Z({program:X(),parsed:$i(),space:$()}),qw=st(ie(Z({pubkey:et,account:Z({executable:Wn(),owner:et,lamports:$(),data:Lc,rentEpoch:$()})}))),Hw=st(ie(Z({lamports:$(),address:et}))),Ss=Z({executable:Wn(),owner:et,lamports:$(),data:eu,rentEpoch:$()}),jw=Z({pubkey:et,account:Ss}),Vw=Rs(tn([Hl(fe.Buffer),Lc]),tn([ah,Lc]),r=>Array.isArray(r)?te(r,eu):r),Pc=Z({executable:Wn(),owner:et,lamports:$(),data:Vw,rentEpoch:$()}),Gw=Z({pubkey:et,account:Pc}),Yw=Z({state:tn([Qe("active"),Qe("inactive"),Qe("activating"),Qe("deactivating")]),active:$(),inactive:$()}),Zw=Se(ie(Z({signature:X(),slot:$(),err:Qr,memo:se(X()),blockTime:pe(se($()))}))),Jw=Se(ie(Z({signature:X(),slot:$(),err:Qr,memo:se(X()),blockTime:pe(se($()))}))),Xw=Z({subscription:$(),result:ua(Ss)}),Qw=Z({pubkey:et,account:Ss}),e1=Z({subscription:$(),result:ua(Qw)}),t1=Z({parent:$(),slot:$(),root:$()}),n1=Z({subscription:$(),result:t1}),r1=tn([Z({type:tn([Qe("firstShredReceived"),Qe("completed"),Qe("optimisticConfirmation"),Qe("root")]),slot:$(),timestamp:$()}),Z({type:Qe("createdBank"),parent:$(),slot:$(),timestamp:$()}),Z({type:Qe("frozen"),slot:$(),timestamp:$(),stats:Z({numTransactionEntries:$(),numSuccessfulTransactions:$(),numFailedTransactions:$(),maxTransactionsPerEntry:$()})}),Z({type:Qe("dead"),slot:$(),timestamp:$(),err:X()})]),i1=Z({subscription:$(),result:r1}),s1=Z({subscription:$(),result:ua(tn([kw,Iw]))}),o1=Z({subscription:$(),result:$()}),a1=Z({pubkey:X(),gossip:se(X()),tpu:se(X()),rpc:se(X()),version:se(X())}),id=Z({votePubkey:X(),nodePubkey:X(),activatedStake:$(),epochVoteAccount:Wn(),epochCredits:ie(jl([$(),$(),$()])),commission:$(),lastVote:$(),rootSlot:se($())}),c1=Se(Z({current:ie(id),delinquent:ie(id)})),l1=tn([Qe("processed"),Qe("confirmed"),Qe("finalized")]),u1=Z({slot:$(),confirmations:se($()),err:Qr,confirmationStatus:pe(l1)}),d1=st(ie(se(u1))),f1=Se($()),uh=Z({accountKey:et,writableIndexes:ie($()),readonlyIndexes:ie($())}),tu=Z({signatures:ie(X()),message:Z({accountKeys:ie(X()),header:Z({numRequiredSignatures:$(),numReadonlySignedAccounts:$(),numReadonlyUnsignedAccounts:$()}),instructions:ie(Z({accounts:ie($()),data:X(),programIdIndex:$()})),recentBlockhash:X(),addressTableLookups:pe(ie(uh))})}),dh=Z({pubkey:et,signer:Wn(),writable:Wn(),source:pe(tn([Qe("transaction"),Qe("lookupTable")]))}),fh=Z({accountKeys:ie(dh),signatures:ie(X())}),hh=Z({parsed:$i(),program:X(),programId:et}),ph=Z({accounts:ie(et),data:X(),programId:et}),h1=tn([ph,hh]),p1=tn([Z({parsed:$i(),program:X(),programId:X()}),Z({accounts:ie(X()),data:X(),programId:X()})]),gh=Rs(h1,p1,r=>"accounts"in r?te(r,ph):te(r,hh)),mh=Z({signatures:ie(X()),message:Z({accountKeys:ie(dh),instructions:ie(gh),recentBlockhash:X(),addressTableLookups:pe(se(ie(uh)))})}),Oo=Z({accountIndex:$(),mint:X(),owner:pe(X()),programId:pe(X()),uiTokenAmount:Cc}),yh=Z({writable:ie(et),readonly:ie(et)}),da=Z({err:Qr,fee:$(),innerInstructions:pe(se(ie(Z({index:$(),instructions:ie(Z({accounts:ie($()),data:X(),programIdIndex:$()}))})))),preBalances:ie($()),postBalances:ie($()),logMessages:pe(se(ie(X()))),preTokenBalances:pe(se(ie(Oo))),postTokenBalances:pe(se(ie(Oo))),loadedAddresses:pe(yh),computeUnitsConsumed:pe($())}),nu=Z({err:Qr,fee:$(),innerInstructions:pe(se(ie(Z({index:$(),instructions:ie(gh)})))),preBalances:ie($()),postBalances:ie($()),logMessages:pe(se(ie(X()))),preTokenBalances:pe(se(ie(Oo))),postTokenBalances:pe(se(ie(Oo))),loadedAddresses:pe(yh),computeUnitsConsumed:pe($())}),qi=tn([Qe(0),Qe("legacy")]),ei=Z({pubkey:X(),lamports:$(),postBalance:se($()),rewardType:se(X()),commission:pe(se($()))}),g1=Se(se(Z({blockhash:X(),previousBlockhash:X(),parentSlot:$(),transactions:ie(Z({transaction:tu,meta:se(da),version:pe(qi)})),rewards:pe(ie(ei)),blockTime:se($()),blockHeight:se($())}))),m1=Se(se(Z({blockhash:X(),previousBlockhash:X(),parentSlot:$(),rewards:pe(ie(ei)),blockTime:se($()),blockHeight:se($())}))),y1=Se(se(Z({blockhash:X(),previousBlockhash:X(),parentSlot:$(),transactions:ie(Z({transaction:fh,meta:se(da),version:pe(qi)})),rewards:pe(ie(ei)),blockTime:se($()),blockHeight:se($())}))),w1=Se(se(Z({blockhash:X(),previousBlockhash:X(),parentSlot:$(),transactions:ie(Z({transaction:mh,meta:se(nu),version:pe(qi)})),rewards:pe(ie(ei)),blockTime:se($()),blockHeight:se($())}))),b1=Se(se(Z({blockhash:X(),previousBlockhash:X(),parentSlot:$(),transactions:ie(Z({transaction:fh,meta:se(nu),version:pe(qi)})),rewards:pe(ie(ei)),blockTime:se($()),blockHeight:se($())}))),v1=Se(se(Z({blockhash:X(),previousBlockhash:X(),parentSlot:$(),rewards:pe(ie(ei)),blockTime:se($()),blockHeight:se($())}))),S1=Se(se(Z({blockhash:X(),previousBlockhash:X(),parentSlot:$(),transactions:ie(Z({transaction:tu,meta:se(da)})),rewards:pe(ie(ei)),blockTime:se($())}))),sd=Se(se(Z({blockhash:X(),previousBlockhash:X(),parentSlot:$(),signatures:ie(X()),blockTime:se($())}))),ac=Se(se(Z({slot:$(),meta:se(da),blockTime:pe(se($())),transaction:tu,version:pe(qi)}))),js=Se(se(Z({slot:$(),transaction:mh,meta:se(nu),blockTime:pe(se($())),version:pe(qi)}))),E1=st(Z({blockhash:X(),lastValidBlockHeight:$()})),_1=st(Wn()),A1=Z({slot:$(),numTransactions:$(),numSlots:$(),samplePeriodSecs:$()}),k1=Se(ie(A1)),I1=st(se(Z({feeCalculator:Z({lamportsPerSignature:$()})}))),x1=Se(X()),B1=Se(X()),R1=Z({err:Qr,logs:ie(X()),signature:X()}),M1=Z({result:ua(R1),subscription:$()}),T1={"solana-client":"js/1.0.0-maintenance"};class wh{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const p={};return async g=>{const{commitment:w,config:B}=De(g),m=this._buildArgs([],w,void 0,B),I=ed(m);return p[I]=p[I]??(async()=>{try{const k=await this._rpcRequest("getBlockHeight",m),E=te(k,Se($()));if("error"in E)throw new de(E.error,"failed to get block height information");return E.result}finally{delete p[I]}})(),await p[I]}})();let n,s,i,o,a,c;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,s=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=mw(e),this._rpcWsEndpoint=n||gw(e),this._rpcClient=Tw(e,s,i,o,a,c),this._rpcRequest=Cw(this._rpcClient),this._rpcBatchRequest=Lw(this._rpcClient),this._rpcWebSocket=new dw(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:s}=De(t),i=this._buildArgs([e.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=te(o,st($()));if("error"in a)throw new de(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=te(t,Se(se($())));if("error"in n)throw new de(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=te(e,Se($()));if("error"in t)throw new de(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=te(e,Dw);if("error"in t)throw new de(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),s=te(n,Fw);if("error"in s)throw new de(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",n),i=te(s,st(Cc));if("error"in i)throw new de(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",n),i=te(s,st(Cc));if("error"in i)throw new de(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,n){const{commitment:s,config:i}=De(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),p=te(c,$w);if("error"in p)throw new de(p.error,`failed to get token accounts owned by account ${e.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(e,t,n){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=te(o,qw);if("error"in a)throw new de(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",n),i=te(s,Hw);if("error"in i)throw new de(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",n),i=te(s,Kw);if("error"in i)throw new de(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:s}=De(t),i=this._buildArgs([e.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=te(o,st(se(Ss)));if("error"in a)throw new de(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:n,config:s}=De(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=te(o,st(se(Pc)));if("error"in a)throw new de(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:s}=De(t),i=e.map(p=>p.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=te(a,st(ie(se(Pc))));if("error"in c)throw new de(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:s}=De(t),i=e.map(p=>p.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=te(a,st(ie(se(Ss))));if("error"in c)throw new de(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:s,config:i}=De(t),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=te(a,Se(Yw));if("error"in c)throw new de(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,t){const{commitment:n,config:s}=De(t),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],n,i||"base64",{...o,...o.filters?{filters:nd(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),p=ie(jw),g=o.withContext===!0?te(c,st(p)):te(c,Se(p));if("error"in g)throw new de(g.error,`failed to get accounts owned by program ${e.toBase58()}`);return g.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:s}=De(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=te(o,Se(ie(Gw)));if("error"in a)throw new de(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){var i;let n;if(typeof e=="string")n=e;else{const o=e;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=Dt.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Te(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,s,i=!1;const o=new Promise((c,p)=>{try{n=this.onSignature(t,(w,B)=>{n=void 0;const m={context:B,value:w};c({__type:Vn.PROCESSED,response:m})},e);const g=new Promise(w=>{n==null?w():s=this._onSubscriptionStateChange(n,B=>{B==="subscribed"&&w()})});(async()=>{if(await g,i)return;const w=await this.getSignatureStatus(t);if(i||w==null)return;const{context:B,value:m}=w;if(m!=null)if(m!=null&&m.err)p(m.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(m.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(m.confirmationStatus==="processed"||m.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:Vn.PROCESSED,response:{context:B,value:m}})}})()}catch(g){p(g)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(w=>{const B=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let m=await B();if(!i){for(;m<=n;)if(await Cr(1e3),i||(m=await B(),i))return;w({__type:Vn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),p=this.getCancellationPromise(t);let g;try{const w=await Promise.race([p,c,o]);if(w.__type===Vn.PROCESSED)g=w.response;else throw new Jl(s)}finally{i=!0,a()}return g}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(m=>{let I=i,k=null;const E=async()=>{try{const{context:M,value:C}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:n});return k=M.slot,C==null?void 0:C.nonce}catch{return I}};(async()=>{if(I=await E(),!a)for(;;){if(i!==I){m({__type:Vn.NONCE_INVALID,slotInWhichNonceDidAdvance:k});return}if(await Cr(2e3),a||(I=await E(),a))return}})()}),{abortConfirmation:p,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),w=this.getCancellationPromise(t);let B;try{const m=await Promise.race([w,g,c]);if(m.__type===Vn.PROCESSED)B=m.response;else{let I;for(;;){const k=await this.getSignatureStatus(o);if(k==null)break;if(k.context.slot<(m.slotInWhichNonceDidAdvance??n)){await Cr(400);continue}I=k;break}if(I!=null&&I.value){const k=e||"finalized",{confirmationStatus:E}=I.value;switch(k){case"processed":case"recent":if(E!=="processed"&&E!=="confirmed"&&E!=="finalized")throw new bi(o);break;case"confirmed":case"single":case"singleGossip":if(E!=="confirmed"&&E!=="finalized")throw new bi(o);break;case"finalized":case"max":case"root":if(E!=="finalized")throw new bi(o);break;default:}B={context:I.context,value:{err:I.value.err}}}else throw new bi(o)}}finally{a=!0,p()}return B}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const s=new Promise(c=>{let p=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{p=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:Vn.TIMED_OUT,timeoutMs:p}),p)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const c=await Promise.race([o,s]);if(c.__type===Vn.PROCESSED)a=c.response;else throw new Xl(t,c.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=te(e,Se(ie(a1)));if("error"in t)throw new de(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),s=te(n,c1);if("error"in s)throw new de(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:n}=De(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlot",s),o=te(i,Se($()));if("error"in o)throw new de(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=De(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=te(i,Se(X()));if("error"in o)throw new de(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],s=await this._rpcRequest("getSlotLeaders",n),i=te(s,Se(ie(et)));if("error"in i)throw new de(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:n,value:s}=await this.getSignatureStatuses([e],t);Te(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const s=await this._rpcRequest("getSignatureStatuses",n),i=te(s,d1);if("error"in i)throw new de(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:n}=De(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=te(i,Se($()));if("error"in o)throw new de(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),s=te(n,Pw);if("error"in s)throw new de(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,n){const{commitment:s,config:i}=De(n),o=this._buildArgs([e.map(p=>p.toBase58())],s,void 0,{...i,epoch:t??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=te(a,bw);if("error"in c)throw new de(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=te(e,Nw);if("error"in t)throw new de(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=De(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=te(i,Ww);if("error"in o)throw new de(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=te(e,Uw);if("error"in t)throw new de(t.error,"failed to get epoch schedule");const n=t.result;return new oh(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=te(e,zw);if("error"in t)throw new de(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=te(s,f1);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=te(t,k1);if("error"in n)throw new de(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=te(s,I1);if("error"in i)throw new de(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const n=Ee(e.serialize()).toString("base64"),s=this._buildArgs([n],t),i=await this._rpcRequest("getFeeForMessage",s),o=te(i,st(se($())));if("error"in o)throw new de(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=t!=null&&t.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=te(s,Ow);if("error"in i)throw new de(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=De(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=te(i,E1);if("error"in o)throw new de(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:s}=De(t),i=this._buildArgs([e],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=te(o,_1);if("error"in a)throw new de(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=te(e,Se(xw));if("error"in t)throw new de(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=te(e,Se(X()));if("error"in t)throw new de(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:s}=De(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=te(o,y1);if("error"in a)throw a.error;return a.result}case"none":{const a=te(o,m1);if("error"in a)throw a.error;return a.result}default:{const a=te(o,g1);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:p,meta:g,version:w})=>({meta:g,transaction:{...p,message:oc(w,p.message)},version:w}))}:null}}}catch(a){throw new de(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:s}=De(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=te(o,b1);if("error"in a)throw a.error;return a.result}case"none":{const a=te(o,v1);if("error"in a)throw a.error;return a.result}default:{const a=te(o,w1);if("error"in a)throw a.error;return a.result}}}catch(a){throw new de(a,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...c}=e;n=a,t=c}const s=this._buildArgs([],n,"base64",t),i=await this._rpcRequest("getBlockProduction",s),o=te(i,Mw);if("error"in o)throw new de(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:s}=De(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=te(o,ac);if("error"in a)throw new de(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:oc(c.version,c.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:s}=De(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=te(o,js);if("error"in a)throw new de(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:n,config:s}=De(t),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const p=te(c,js);if("error"in p)throw new de(p.error,"failed to get transactions");return p.result})}async getTransactions(e,t){const{commitment:n,config:s}=De(t),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const p=te(c,ac);if("error"in p)throw new de(p.error,"failed to get transactions");const g=p.result;return g&&{...g,transaction:{...g.transaction,message:oc(g.version,g.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",n),i=te(s,S1);if("error"in i)throw new de(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:p})=>{const g=new In(c.message);return{meta:p,transaction:{...c,message:g}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:p})=>({meta:p,transaction:xe.populate(c.message,c.signatures)}))}}async getBlocks(e,t,n){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),i=await this._rpcRequest("getBlocks",s),o=te(i,Se(ie($())));if("error"in o)throw new de(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=te(s,sd);if("error"in i)throw new de(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=te(s,sd);if("error"in i)throw new de(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",n),i=te(s,ac);if("error"in i)throw new de(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new In(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:xe.populate(a,c)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=te(s,js);if("error"in i)throw new de(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=te(o,js);if("error"in a)throw new de(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<i));)try{const c=await this.getConfirmedBlockSignatures(t,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=te(i,Zw);if("error"in o)throw new de(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",s),o=te(i,Jw);if("error"in o)throw new de(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=new Tc({key:e,state:Tc.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=la.fromAccountData(s.data)),{context:n,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=te(n,x1);if("error"in s)throw new de(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Cr(100);const n=Date.now()-this._blockhashInfo.lastFetch>=ch;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Cr(rh/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=De(e),s=this._buildArgs([],t,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=te(i,st($()));if("error"in o)throw new de(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const k=e.serialize(),E=fe.Buffer.from(k).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const M=t||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(M.innerInstructions=t.innerInstructions);const C=[E,M],T=await this._rpcRequest("simulateTransaction",C),N=te(T,rd);if("error"in N)throw new Error("failed to simulate transaction: "+N.error.message);return N.result}let s;if(e instanceof xe){let I=e;s=new xe,s.feePayer=I.feePayer,s.instructions=e.instructions,s.nonceInfo=I.nonceInfo,s.signatures=I.signatures}else s=xe.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(s.nonceInfo&&i)s.sign(...i);else{let I=this._disableBlockhashCaching;for(;;){const k=await this._blockhashWithExpiryBlockHeight(I);if(s.lastValidBlockHeight=k.lastValidBlockHeight,s.recentBlockhash=k.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const E=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(E)&&!this._blockhashInfo.transactionSignatures.includes(E)){this._blockhashInfo.simulatedSignatures.push(E);break}else I=!0}}const o=s._compile(),a=o.serialize(),p=s._serialize(a).toString("base64"),g={encoding:"base64",commitment:this.commitment};if(n){const I=(Array.isArray(n)?n:o.nonProgramIds()).map(k=>k.toBase58());g.accounts={encoding:"base64",addresses:I}}i&&(g.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(g.innerInstructions=t.innerInstructions);const w=[p,g],B=await this._rpcRequest("simulateTransaction",w),m=te(B,rd);if("error"in m){let I;if("data"in m.error&&(I=m.error.data.logs,I&&Array.isArray(I))){const k=`
    `,E=k+I.join(k);console.error(m.error.message,E)}throw new vs({action:"simulate",signature:"",transactionMessage:m.error.message,logs:I})}return m.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(e,t){const n=Ee(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},s=t&&t.skipPreflight,i=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),c=te(a,B1);if("error"in c){let p;throw"data"in c.error&&(p=c.error.data.logs),new vs({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:p})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var s;const n=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var i;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!t())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(s=>{try{s(...t)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=te(e,Xw);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,s=ed([e.method,t]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Te(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:s,config:i}=De(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=te(e,e1);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,s){const{commitment:i,config:o}=De(n),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:nd(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=te(e,M1);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=te(e,n1);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=te(e,i1);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,s){const i=t||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,s){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,s)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=te(e,s1);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const s=this._buildArgs([e],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,t,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,p)=>{t(c,p);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=te(e,o1);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Ai{constructor(e){this._keypair=void 0,this._keypair=e??Zu()}static generate(){return new Ai(Zu())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),i=No(s);for(let o=0;o<32;o++)if(n[o]!==i[o])throw new Error("provided secretKey is invalid")}return new Ai({publicKey:n,secretKey:e})}static fromSeed(e){const t=No(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Ai({publicKey:t,secretKey:n})}get publicKey(){return new Q(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Xn=Object.freeze({CreateLookupTable:{index:0,layout:le([ce("instruction"),Pi("recentSlot"),Be("bumpSeed")])},FreezeLookupTable:{index:1,layout:le([ce("instruction")])},ExtendLookupTable:{index:2,layout:le([ce("instruction"),Pi(),Ft(ke(),Sr(ce(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:le([ce("instruction")])},CloseLookupTable:{index:4,layout:le([ce("instruction")])}});class C1{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ce("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Xn))if(o.index==n){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=Le(Xn.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=Le(Xn.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new Q(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(ru.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class ru{constructor(){}static createLookupTable(e){const[t,n]=Q.findProgramAddressSync([e.authority.toBuffer(),Nf().encode(e.recentSlot)],this.programId),s=Xn.CreateLookupTable,i=Ie(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Pt.programId,isSigner:!1,isWritable:!1}];return[new Ue({programId:this.programId,keys:o,data:i}),t]}static freezeLookupTable(e){const t=Xn.FreezeLookupTable,n=Ie(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ue({programId:this.programId,keys:s,data:n})}static extendLookupTable(e){const t=Xn.ExtendLookupTable,n=Ie(t,{addresses:e.addresses.map(i=>i.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Pt.programId,isSigner:!1,isWritable:!1}),new Ue({programId:this.programId,keys:s,data:n})}static deactivateLookupTable(e){const t=Xn.DeactivateLookupTable,n=Ie(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ue({programId:this.programId,keys:s,data:n})}static closeLookupTable(e){const t=Xn.CloseLookupTable,n=Ie(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Ue({programId:this.programId,keys:s,data:n})}}ru.programId=new Q("AddressLookupTab1e1111111111111111111111111");class L1{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Be("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Cn))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=Le(Cn.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=Le(Cn.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=Le(Cn.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=Le(Cn.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(iu.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Cn=Object.freeze({RequestUnits:{index:0,layout:le([Be("instruction"),ce("units"),ce("additionalFee")])},RequestHeapFrame:{index:1,layout:le([Be("instruction"),ce("bytes")])},SetComputeUnitLimit:{index:2,layout:le([Be("instruction"),ce("units")])},SetComputeUnitPrice:{index:3,layout:le([Be("instruction"),Pi("microLamports")])}});class iu{constructor(){}static requestUnits(e){const t=Cn.RequestUnits,n=Ie(t,e);return new Ue({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=Cn.RequestHeapFrame,n=Ie(t,e);return new Ue({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=Cn.SetComputeUnitLimit,n=Ie(t,e);return new Ue({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=Cn.SetComputeUnitPrice,n=Ie(t,{microLamports:BigInt(e.microLamports)});return new Ue({keys:[],programId:this.programId,data:n})}}iu.programId=new Q("ComputeBudget111111111111111111111111111111");const od=64,ad=32,cd=64,ld=le([Be("numSignatures"),Be("padding"),bn("signatureOffset"),bn("signatureInstructionIndex"),bn("publicKeyOffset"),bn("publicKeyInstructionIndex"),bn("messageDataOffset"),bn("messageDataSize"),bn("messageInstructionIndex")]);class fa{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,instructionIndex:i}=e;Te(t.length===ad,`Public Key must be ${ad} bytes but received ${t.length} bytes`),Te(s.length===cd,`Signature must be ${cd} bytes but received ${s.length} bytes`);const o=ld.span,a=o+t.length,c=a+s.length,p=1,g=fe.Buffer.alloc(c+n.length),w=i??65535;return ld.encode({numSignatures:p,padding:0,signatureOffset:a,signatureInstructionIndex:w,publicKeyOffset:o,publicKeyInstructionIndex:w,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:w},g),g.fill(t,o),g.fill(s,a),g.fill(n,c),new Ue({keys:[],programId:fa.programId,data:g})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Te(t.length===od,`Private key must be ${od} bytes but received ${t.length} bytes`);try{const i=Ai.fromSecretKey(t),o=i.publicKey.toBytes(),a=Yl(n,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:a,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}fa.programId=new Q("Ed25519SigVerify111111111111111111111111111");const P1=(r,e)=>{const t=Gl.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};Gl.utils.isValidPrivateKey;const N1=Gl.getPublicKey,ud=32,cc=20,dd=64,O1=11,lc=le([Be("numSignatures"),bn("signatureOffset"),Be("signatureInstructionIndex"),bn("ethAddressOffset"),Be("ethAddressInstructionIndex"),bn("messageDataOffset"),bn("messageDataSize"),Be("messageInstructionIndex"),He(20,"ethAddress"),He(64,"signature"),Be("recoveryId")]);class ki{constructor(){}static publicKeyToEthAddress(e){Te(e.length===dd,`Public key must be ${dd} bytes but received ${e.length} bytes`);try{return fe.Buffer.from(Vu(Ee(e))).slice(-cc)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,recoveryId:i,instructionIndex:o}=e;return ki.createInstructionWithEthAddress({ethAddress:ki.publicKeyToEthAddress(t),message:n,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:s,recoveryId:i,instructionIndex:o=0}=e;let a;typeof t=="string"?t.startsWith("0x")?a=fe.Buffer.from(t.substr(2),"hex"):a=fe.Buffer.from(t,"hex"):a=t,Te(a.length===cc,`Address must be ${cc} bytes but received ${a.length} bytes`);const c=1+O1,p=c,g=c+a.length,w=g+s.length+1,B=1,m=fe.Buffer.alloc(lc.span+n.length);return lc.encode({numSignatures:B,signatureOffset:g,signatureInstructionIndex:o,ethAddressOffset:p,ethAddressInstructionIndex:o,messageDataOffset:w,messageDataSize:n.length,messageInstructionIndex:o,signature:Ee(s),ethAddress:Ee(a),recoveryId:i},m),m.fill(Ee(n),lc.span),new Ue({keys:[],programId:ki.programId,data:m})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Te(t.length===ud,`Private key must be ${ud} bytes but received ${t.length} bytes`);try{const i=Ee(t),o=N1(i,!1).slice(1),a=fe.Buffer.from(Vu(Ee(n))),[c,p]=P1(a,i);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:c,recoveryId:p,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}ki.programId=new Q("KeccakSecp256k11111111111111111111111111111");var bh;const vh=new Q("StakeConfig11111111111111111111111111111111");class Sh{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Ms{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}bh=Ms;Ms.default=new bh(0,0,Q.default);class W1{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ce("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Tt))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=Le(Tt.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Sh(new Q(t.staker),new Q(t.withdrawer)),lockup:new Ms(n.unixTimestamp,n.epoch,new Q(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Le(Tt.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=Le(Tt.Authorize,e.data),s={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Q(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:s,authorityOwner:i}=Le(Tt.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:s,authorityOwner:new Q(i),newAuthorizedPubkey:new Q(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Le(Tt.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Le(Tt.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Le(Tt.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Le(Tt.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(ha.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Tt=Object.freeze({Initialize:{index:0,layout:le([ce("instruction"),Ky(),$y()])},Authorize:{index:1,layout:le([ce("instruction"),ke("newAuthorized"),ce("stakeAuthorizationType")])},Delegate:{index:2,layout:le([ce("instruction")])},Split:{index:3,layout:le([ce("instruction"),dn("lamports")])},Withdraw:{index:4,layout:le([ce("instruction"),dn("lamports")])},Deactivate:{index:5,layout:le([ce("instruction")])},Merge:{index:7,layout:le([ce("instruction")])},AuthorizeWithSeed:{index:8,layout:le([ce("instruction"),ke("newAuthorized"),ce("stakeAuthorizationType"),Or("authoritySeed"),ke("authorityOwner")])}}),U1=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ha{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:s}=e,i=s||Ms.default,o=Tt.Initialize,a=Ie(o,{authorized:{staker:Ee(n.staker.toBuffer()),withdrawer:Ee(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:Ee(i.custodian.toBuffer())}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Li,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new Ue(c)}static createAccountWithSeed(e){const t=new xe;t.add(Pt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static createAccount(e){const t=new xe;t.add(Pt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:s}=e,i=Tt.Delegate,o=Ie(i);return new xe().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:Rn,isSigner:!1,isWritable:!1},{pubkey:Zs,isSigner:!1,isWritable:!1},{pubkey:vh,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=e,a=Tt.Authorize,c=Ie(a,{newAuthorized:Ee(s.toBuffer()),stakeAuthorizationType:i.index}),p=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Rn,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&p.push({pubkey:o,isSigner:!0,isWritable:!1}),new xe().add({keys:p,programId:this.programId,data:c})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:c}=e,p=Tt.AuthorizeWithSeed,g=Ie(p,{newAuthorized:Ee(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:s,authorityOwner:Ee(i.toBuffer())}),w=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:Rn,isSigner:!1,isWritable:!1}];return c&&w.push({pubkey:c,isSigner:!0,isWritable:!1}),new xe().add({keys:w,programId:this.programId,data:g})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:s,lamports:i}=e,o=Tt.Split,a=Ie(o,{lamports:i});return new Ue({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e,t){const n=new xe;return n.add(Pt.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:a,lamports:c}=e,p=new xe;return p.add(Pt.allocate({accountPubkey:i,basePubkey:o,seed:a,space:this.space,programId:this.programId})),t&&t>0&&p.add(Pt.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),p.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,lamports:c}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:s}=e,i=Tt.Merge,o=Ie(i);return new xe().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Rn,isSigner:!1,isWritable:!1},{pubkey:Zs,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:s,lamports:i,custodianPubkey:o}=e,a=Tt.Withdraw,c=Ie(a,{lamports:i}),p=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Rn,isSigner:!1,isWritable:!1},{pubkey:Zs,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&p.push({pubkey:o,isSigner:!0,isWritable:!1}),new xe().add({keys:p,programId:this.programId,data:c})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,s=Tt.Deactivate,i=Ie(s);return new xe().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Rn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}ha.programId=new Q("Stake11111111111111111111111111111111111111");ha.space=200;class Eh{constructor(e,t,n,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=s}}class z1{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ce("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Ln))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=Le(Ln.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Eh(new Q(t.nodePubkey),new Q(t.authorizedVoter),new Q(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=Le(Ln.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Q(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:s,voteAuthorizationType:i}}=Le(Ln.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Q(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new Q(s),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Le(Ln.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Hi.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ln=Object.freeze({InitializeAccount:{index:0,layout:le([ce("instruction"),qy()])},Authorize:{index:1,layout:le([ce("instruction"),ke("newAuthorized"),ce("voteAuthorizationType")])},Withdraw:{index:3,layout:le([ce("instruction"),dn("lamports")])},UpdateValidatorIdentity:{index:4,layout:le([ce("instruction")])},AuthorizeWithSeed:{index:10,layout:le([ce("instruction"),Hy()])}}),D1=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Hi{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:s}=e,i=Ln.InitializeAccount,o=Ie(i,{voteInit:{nodePubkey:Ee(s.nodePubkey.toBuffer()),authorizedVoter:Ee(s.authorizedVoter.toBuffer()),authorizedWithdrawer:Ee(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Li,isSigner:!1,isWritable:!1},{pubkey:Rn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Ue(a)}static createAccount(e){const t=new xe;return t.add(Pt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,voteAuthorizationType:i}=e,o=Ln.Authorize,a=Ie(o,{newAuthorized:Ee(s.toBuffer()),voteAuthorizationType:i.index}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Rn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new xe().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:a}=e,c=Ln.AuthorizeWithSeed,p=Ie(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Ee(n.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:Ee(i.toBuffer()),voteAuthorizationType:o.index}}),g=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:Rn,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new xe().add({keys:g,programId:this.programId,data:p})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:s,toPubkey:i}=e,o=Ln.Withdraw,a=Ie(o,{lamports:s}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new xe().add({keys:c,programId:this.programId,data:a})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return Hi.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:s}=e,i=Ln.UpdateValidatorIdentity,o=Ie(i),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new xe().add({keys:a,programId:this.programId,data:o})}}Hi.programId=new Q("Vote111111111111111111111111111111111111111");Hi.space=3762;const _h=new Q("Va1idator1nfo111111111111111111111111111111"),F1=Z({name:X(),website:pe(X()),details:pe(X()),iconUrl:pe(X()),keybaseUsername:pe(X())});class su{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(rn(t)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new Q(sn(t,0,On)),a=Tn(t)===1;s.push({publicKey:o,isSigner:a})}if(s[0].publicKey.equals(_h)&&s[1].isSigner){const i=Or().decode(fe.Buffer.from(t)),o=JSON.parse(i);return Of(o,F1),new su(s[1].publicKey,o)}return null}}const K1=new Q("Vote111111111111111111111111111111111111111"),$1=le([ke("nodePubkey"),ke("authorizedWithdrawer"),Be("commission"),Wt(),Ft(le([Wt("slot"),ce("confirmationCount")]),Sr(ce(),-8),"votes"),Be("rootSlotValid"),Wt("rootSlot"),Wt(),Ft(le([Wt("epoch"),ke("authorizedVoter")]),Sr(ce(),-8),"authorizedVoters"),le([Ft(le([ke("authorizedPubkey"),Wt("epochOfLastAuthorizedSwitch"),Wt("targetEpoch")]),32,"buf"),Wt("idx"),Be("isEmpty")],"priorVoters"),Wt(),Ft(le([Wt("epoch"),Wt("credits"),Wt("prevCredits")]),Sr(ce(),-8),"epochCredits"),le([Wt("slot"),Wt("timestamp")],"lastTimestamp")]);class ou{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=$1.decode(Ee(e),4);let s=n.rootSlot;return n.rootSlotValid||(s=null),new ou({nodePubkey:new Q(n.nodePubkey),authorizedWithdrawer:new Q(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:s,authorizedVoters:n.authorizedVoters.map(q1),priorVoters:H1(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function q1({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new Q(r)}}function fd({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new Q(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function H1({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(fd),...r.slice(0,e).map(fd)]}const hd={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function j1(r,e){const t=e===!1?"http":"https";if(!r)return hd[t].devnet;const n=hd[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function V1(r,e,t,n){let s,i;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(s=t,i=n):i=t;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},a=await r.sendRawTransaction(e,o),c=i&&i.commitment,g=(await(s?r.confirmTransaction(s,c):r.confirmTransaction(a,c))).value;if(g.err)throw a!=null?new vs({action:o!=null&&o.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(g)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(g)})`);return a}const G1=1e9,Y1=Object.freeze(Object.defineProperty({__proto__:null,Account:zy,AddressLookupTableAccount:Tc,AddressLookupTableInstruction:C1,AddressLookupTableProgram:ru,Authorized:Sh,BLOCKHASH_CACHE_TIMEOUT_MS:ch,BPF_LOADER_DEPRECATED_PROGRAM_ID:Dy,BPF_LOADER_PROGRAM_ID:iw,BpfLoader:sw,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Cn,ComputeBudgetInstruction:L1,ComputeBudgetProgram:iu,Connection:wh,Ed25519Program:fa,Enum:Wy,EpochSchedule:oh,FeeCalculatorLayout:ih,Keypair:Ai,LAMPORTS_PER_SOL:G1,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Xn,Loader:Gr,Lockup:Ms,MAX_SEED_LENGTH:eh,Message:In,MessageAccountKeys:bs,MessageV0:Vr,NONCE_ACCOUNT_LENGTH:Mc,NonceAccount:la,PACKET_DATA_SIZE:Er,PUBLIC_KEY_LENGTH:On,PublicKey:Q,SIGNATURE_LENGTH_IN_BYTES:Ti,SOLANA_SCHEMA:us,STAKE_CONFIG_ID:vh,STAKE_INSTRUCTION_LAYOUTS:Tt,SYSTEM_INSTRUCTION_LAYOUTS:Fe,SYSVAR_CLOCK_PUBKEY:Rn,SYSVAR_EPOCH_SCHEDULE_PUBKEY:Zy,SYSVAR_INSTRUCTIONS_PUBKEY:Jy,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Ys,SYSVAR_RENT_PUBKEY:Li,SYSVAR_REWARDS_PUBKEY:Xy,SYSVAR_SLOT_HASHES_PUBKEY:Qy,SYSVAR_SLOT_HISTORY_PUBKEY:ew,SYSVAR_STAKE_HISTORY_PUBKEY:Zs,Secp256k1Program:ki,SendTransactionError:vs,SolanaJSONRPCError:de,SolanaJSONRPCErrorCode:tw,StakeAuthorizationLayout:U1,StakeInstruction:W1,StakeProgram:ha,Struct:Zl,SystemInstruction:nw,SystemProgram:Pt,Transaction:xe,TransactionExpiredBlockheightExceededError:Jl,TransactionExpiredNonceInvalidError:bi,TransactionExpiredTimeoutError:Xl,TransactionInstruction:Ue,TransactionMessage:Ql,TransactionStatus:Vn,VALIDATOR_INFO_KEY:_h,VERSION_PREFIX_MASK:oa,VOTE_PROGRAM_ID:K1,ValidatorInfo:su,VersionedMessage:ca,VersionedTransaction:Ci,VoteAccount:ou,VoteAuthorizationLayout:D1,VoteInit:Eh,VoteInstruction:z1,VoteProgram:Hi,clusterApiUrl:j1,sendAndConfirmRawTransaction:V1,sendAndConfirmTransaction:Rc},Symbol.toStringTag,{value:"Module"})),Ah=re.createContext({});function Z1(){return re.useContext(Ah)}const PE=({children:r,endpoint:e,config:t={commitment:"confirmed"}})=>{const n=re.useMemo(()=>new wh(e,t),[e,t]);return J.createElement(Ah.Provider,{value:{connection:n}},r)};class at extends Error{constructor(e,t){super(e),this.error=t}}class Wo extends at{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class J1 extends at{constructor(){super(...arguments),this.name="WalletLoadError"}}class vi extends at{constructor(){super(...arguments),this.name="WalletConfigError"}}class kh extends at{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Ih extends at{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class xh extends at{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Wr extends at{constructor(){super(...arguments),this.name="WalletAccountError"}}class Bh extends at{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class X1 extends at{constructor(){super(...arguments),this.name="WalletKeypairError"}}class Nn extends at{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Ur extends at{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class zr extends at{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Rh extends at{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class Nc extends at{constructor(){super(...arguments),this.name="WalletSignInError"}}class Q1 extends at{constructor(){super(...arguments),this.name="WalletTimeoutError"}}class eb extends at{constructor(){super(...arguments),this.name="WalletWindowBlockedError"}}class tb extends at{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}var Gt;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(Gt||(Gt={}));class au extends sa{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,n={}){const s=this.publicKey;if(!s)throw new Nn;return e.feePayer=e.feePayer||s,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function nb(r){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(r())for(const i of e)i()}const n=setInterval(t,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function rb(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),e=r.includes("iphone")||r.includes("ipad"),t=r.includes("safari");return e&&t}function wr(r){return"version"in r}class Mh extends au{async sendTransaction(e,t,n={}){let s=!0;try{if(wr(e)){if(!this.supportedTransactionVersions)throw new Ur("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Ur(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const i=e.serialize();return await t.sendRawTransaction(i,n)}catch(i){throw i instanceof zr?(s=!1,i):new Ur(i==null?void 0:i.message,i)}}else try{const{signers:i,...o}=n;e=await this.prepareTransaction(e,t,o),i!=null&&i.length&&e.partialSign(...i),e=await this.signTransaction(e);const a=e.serialize();return await t.sendRawTransaction(a,o)}catch(i){throw i instanceof zr?(s=!1,i):new Ur(i==null?void 0:i.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(e){for(const n of e)if(wr(n)){if(!this.supportedTransactionVersions)throw new zr("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new zr(`Signing transaction version ${n.version} isn't supported by this wallet`)}const t=[];for(const n of e)t.push(await this.signTransaction(n));return t}}class Th extends Mh{}class ib extends Th{}const Qn="solana:signAndSendTransaction",Js="solana:signIn",ci="solana:signMessage",Ct="solana:signTransaction",sb="solana:signAndSendAllTransactions",ob=Object.freeze(Object.defineProperty({__proto__:null,SignAndSendAllTransactions:sb,SolanaSignAndSendTransaction:Qn,SolanaSignIn:Js,SolanaSignMessage:ci,SolanaSignTransaction:Ct},Symbol.toStringTag,{value:"Module"})),pa="standard:connect",ab=pa,Uo="standard:disconnect",cb=Uo,ga="standard:events",lb=ga,ub=Object.freeze(Object.defineProperty({__proto__:null,Connect:ab,Disconnect:cb,Events:lb,StandardConnect:pa,StandardDisconnect:Uo,StandardEvents:ga},Symbol.toStringTag,{value:"Module"}));function Ch(r){return pa in r.features&&ga in r.features&&(Qn in r.features||Ct in r.features)}var Oc;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(Oc||(Oc={}));const db=Object.freeze(Object.defineProperty({__proto__:null,BaseMessageSignerWalletAdapter:Th,BaseSignInMessageSignerWalletAdapter:ib,BaseSignerWalletAdapter:Mh,BaseWalletAdapter:au,EventEmitter:sa,WalletAccountError:Wr,get WalletAdapterNetwork(){return Oc},WalletConfigError:vi,WalletConnectionError:kh,WalletDisconnectedError:Ih,WalletDisconnectionError:xh,WalletError:at,WalletKeypairError:X1,WalletLoadError:J1,WalletNotConnectedError:Nn,WalletNotReadyError:Wo,WalletPublicKeyError:Bh,get WalletReadyState(){return Gt},WalletSendTransactionError:Ur,WalletSignInError:Nc,WalletSignMessageError:Rh,WalletSignTransactionError:zr,WalletTimeoutError:Q1,WalletWindowBlockedError:eb,WalletWindowClosedError:tb,isIosAndRedirectable:rb,isVersionedTransaction:wr,isWalletAdapterCompatibleStandardWallet:Ch,scopePollingDetectionStrategy:nb},Symbol.toStringTag,{value:"Module"}));class pd extends at{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const fb=[],ma={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){_n("call","select")},connect(){return Promise.reject(_n("call","connect"))},disconnect(){return Promise.reject(_n("call","disconnect"))},sendTransaction(){return Promise.reject(_n("call","sendTransaction"))},signTransaction(){return Promise.reject(_n("call","signTransaction"))},signAllTransactions(){return Promise.reject(_n("call","signAllTransactions"))},signMessage(){return Promise.reject(_n("call","signMessage"))},signIn(){return Promise.reject(_n("call","signIn"))}};Object.defineProperty(ma,"wallets",{get(){return _n("read","wallets"),fb}});Object.defineProperty(ma,"wallet",{get(){return _n("read","wallet"),null}});Object.defineProperty(ma,"publicKey",{get(){return _n("read","publicKey"),null}});function _n(r,e){const t=new Error(`You have tried to ${r} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const Lh=re.createContext(ma);function Ph(){return re.useContext(Lh)}function hb(r,e){const t=re.useState(()=>{try{const i=localStorage.getItem(r);if(i)return JSON.parse(i)}catch(i){typeof window<"u"&&console.error(i)}return e}),n=t[0],s=re.useRef(!0);return re.useEffect(()=>{if(s.current){s.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(i){typeof window<"u"&&console.error(i)}},[n,r]),t}var kr={};const pb=nr(db),Nh=nr(Y1),Oh=nr(ob);var Fn={},Ts={},gb=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Wh={},mn={};let cu;const mb=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];mn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};mn.getSymbolTotalCodewords=function(e){return mb[e]};mn.getBCHDigit=function(r){let e=0;for(;r!==0;)e++,r>>>=1;return e};mn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');cu=e};mn.isKanjiModeEnabled=function(){return typeof cu<"u"};mn.toSJIS=function(e){return cu(e)};var ya={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return e(n)}catch{return s}}})(ya);function Uh(){this.buffer=[],this.length=0}Uh.prototype={get:function(r){const e=Math.floor(r/8);return(this.buffer[e]>>>7-r%8&1)===1},put:function(r,e){for(let t=0;t<e;t++)this.putBit((r>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),r&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var yb=Uh;function Cs(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}Cs.prototype.set=function(r,e,t,n){const s=r*this.size+e;this.data[s]=t,n&&(this.reservedBit[s]=!0)};Cs.prototype.get=function(r,e){return this.data[r*this.size+e]};Cs.prototype.xor=function(r,e,t){this.data[r*this.size+e]^=t};Cs.prototype.isReserved=function(r,e){return this.reservedBit[r*this.size+e]};var wb=Cs,zh={};(function(r){const e=mn.getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=e(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let c=1;c<s-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},r.getPositions=function(n){const s=[],i=r.getRowColCoords(n),o=i.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||s.push([i[a],i[c]]);return s}})(zh);var Dh={};const bb=mn.getSymbolSize,gd=7;Dh.getPositions=function(e){const t=bb(e);return[[0,0],[t-gd,0],[0,t-gd]]};var Fh={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,c=0,p=null,g=null;for(let w=0;w<i;w++){a=c=0,p=g=null;for(let B=0;B<i;B++){let m=s.get(w,B);m===p?a++:(a>=5&&(o+=e.N1+(a-5)),p=m,a=1),m=s.get(B,w),m===g?c++:(c>=5&&(o+=e.N1+(c-5)),g=m,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},r.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let c=0;c<i-1;c++){const p=s.get(a,c)+s.get(a,c+1)+s.get(a+1,c)+s.get(a+1,c+1);(p===4||p===0)&&o++}return o*e.N2},r.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,c=0;for(let p=0;p<i;p++){a=c=0;for(let g=0;g<i;g++)a=a<<1&2047|s.get(p,g),g>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|s.get(g,p),g>=10&&(c===1488||c===93)&&o++}return o*e.N3},r.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function t(n,s,i){switch(n){case r.Patterns.PATTERN000:return(s+i)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(s+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return s*i%2+s*i%3===0;case r.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case r.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)i.isReserved(c,a)||i.xor(c,a,t(s,c,a))},r.getBestMask=function(s,i){const o=Object.keys(r.Patterns).length;let a=0,c=1/0;for(let p=0;p<o;p++){i(p),r.applyMask(p,s);const g=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(p,s),g<c&&(c=g,a=p)}return a}})(Fh);var wa={};const br=ya,Vs=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Gs=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];wa.getBlocksCount=function(e,t){switch(t){case br.L:return Vs[(e-1)*4+0];case br.M:return Vs[(e-1)*4+1];case br.Q:return Vs[(e-1)*4+2];case br.H:return Vs[(e-1)*4+3];default:return}};wa.getTotalCodewordsCount=function(e,t){switch(t){case br.L:return Gs[(e-1)*4+0];case br.M:return Gs[(e-1)*4+1];case br.Q:return Gs[(e-1)*4+2];case br.H:return Gs[(e-1)*4+3];default:return}};var Kh={},ba={};const ds=new Uint8Array(512),zo=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)ds[t]=e,zo[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)ds[t]=ds[t-255]})();ba.log=function(e){if(e<1)throw new Error("log("+e+")");return zo[e]};ba.exp=function(e){return ds[e]};ba.mul=function(e,t){return e===0||t===0?0:ds[zo[e]+zo[t]]};(function(r){const e=ba;r.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(n[o],s[a]);return i},r.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=r.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(Kh);const $h=Kh;function lu(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}lu.prototype.initialize=function(e){this.degree=e,this.genPoly=$h.generateECPolynomial(this.degree)};lu.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=$h.mod(t,this.genPoly),s=this.degree-n.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(n,s),i}return n};var vb=lu,qh={},Ir={},uu={};uu.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Kn={};const Hh="[0-9]+",Sb="[A-Z $%*+\\-./:]+";let Es="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Es=Es.replace(/u/g,"\\u");const Eb="(?:(?![A-Z0-9 $%*+\\-./:]|"+Es+`)(?:.|[\r
]))+`;Kn.KANJI=new RegExp(Es,"g");Kn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Kn.BYTE=new RegExp(Eb,"g");Kn.NUMERIC=new RegExp(Hh,"g");Kn.ALPHANUMERIC=new RegExp(Sb,"g");const _b=new RegExp("^"+Es+"$"),Ab=new RegExp("^"+Hh+"$"),kb=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Kn.testKanji=function(e){return _b.test(e)};Kn.testNumeric=function(e){return Ab.test(e)};Kn.testAlphanumeric=function(e){return kb.test(e)};(function(r){const e=uu,t=Kn;r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return t.testNumeric(i)?r.NUMERIC:t.testAlphanumeric(i)?r.ALPHANUMERIC:t.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(i,o){if(r.isValid(i))return i;try{return n(i)}catch{return o}}})(Ir);(function(r){const e=mn,t=wa,n=ya,s=Ir,i=uu,o=7973,a=e.getBCHDigit(o);function c(B,m,I){for(let k=1;k<=40;k++)if(m<=r.getCapacity(k,I,B))return k}function p(B,m){return s.getCharCountIndicator(B,m)+4}function g(B,m){let I=0;return B.forEach(function(k){const E=p(k.mode,m);I+=E+k.getBitsLength()}),I}function w(B,m){for(let I=1;I<=40;I++)if(g(B,I)<=r.getCapacity(I,m,s.MIXED))return I}r.from=function(m,I){return i.isValid(m)?parseInt(m,10):I},r.getCapacity=function(m,I,k){if(!i.isValid(m))throw new Error("Invalid QR Code version");typeof k>"u"&&(k=s.BYTE);const E=e.getSymbolTotalCodewords(m),M=t.getTotalCodewordsCount(m,I),C=(E-M)*8;if(k===s.MIXED)return C;const T=C-p(k,m);switch(k){case s.NUMERIC:return Math.floor(T/10*3);case s.ALPHANUMERIC:return Math.floor(T/11*2);case s.KANJI:return Math.floor(T/13);case s.BYTE:default:return Math.floor(T/8)}},r.getBestVersionForData=function(m,I){let k;const E=n.from(I,n.M);if(Array.isArray(m)){if(m.length>1)return w(m,E);if(m.length===0)return 1;k=m[0]}else k=m;return c(k.mode,k.getLength(),E)},r.getEncodedBits=function(m){if(!i.isValid(m)||m<7)throw new Error("Invalid QR Code version");let I=m<<12;for(;e.getBCHDigit(I)-a>=0;)I^=o<<e.getBCHDigit(I)-a;return m<<12|I}})(qh);var jh={};const Wc=mn,Vh=1335,Ib=21522,md=Wc.getBCHDigit(Vh);jh.getEncodedBits=function(e,t){const n=e.bit<<3|t;let s=n<<10;for(;Wc.getBCHDigit(s)-md>=0;)s^=Vh<<Wc.getBCHDigit(s)-md;return(n<<10|s)^Ib};var Gh={};const xb=Ir;function Ni(r){this.mode=xb.NUMERIC,this.data=r.toString()}Ni.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ni.prototype.getLength=function(){return this.data.length};Ni.prototype.getBitsLength=function(){return Ni.getBitsLength(this.data.length)};Ni.prototype.write=function(e){let t,n,s;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),s=parseInt(n,10),e.put(s,10);const i=this.data.length-t;i>0&&(n=this.data.substr(t),s=parseInt(n,10),e.put(s,i*3+1))};var Bb=Ni;const Rb=Ir,uc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Oi(r){this.mode=Rb.ALPHANUMERIC,this.data=r}Oi.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Oi.prototype.getLength=function(){return this.data.length};Oi.prototype.getBitsLength=function(){return Oi.getBitsLength(this.data.length)};Oi.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=uc.indexOf(this.data[t])*45;n+=uc.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(uc.indexOf(this.data[t]),6)};var Mb=Oi;const Tb=Ir;function Wi(r){this.mode=Tb.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}Wi.getBitsLength=function(e){return e*8};Wi.prototype.getLength=function(){return this.data.length};Wi.prototype.getBitsLength=function(){return Wi.getBitsLength(this.data.length)};Wi.prototype.write=function(r){for(let e=0,t=this.data.length;e<t;e++)r.put(this.data[e],8)};var Cb=Wi;const Lb=Ir,Pb=mn;function Ui(r){this.mode=Lb.KANJI,this.data=r}Ui.getBitsLength=function(e){return e*13};Ui.prototype.getLength=function(){return this.data.length};Ui.prototype.getBitsLength=function(){return Ui.getBitsLength(this.data.length)};Ui.prototype.write=function(r){let e;for(e=0;e<this.data.length;e++){let t=Pb.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),r.put(t,13)}};var Nb=Ui,Yh={exports:{}};(function(r){var e={single_source_shortest_paths:function(t,n,s){var i={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,p,g,w,B,m,I,k,E;!a.empty();){c=a.pop(),p=c.value,w=c.cost,B=t[p]||{};for(g in B)B.hasOwnProperty(g)&&(m=B[g],I=w+m,k=o[g],E=typeof o[g]>"u",(E||k>I)&&(o[g]=I,a.push(g,I),i[g]=p))}if(typeof s<"u"&&typeof o[s]>"u"){var M=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(M)}return i},extract_shortest_path_from_predecessor_list:function(t,n){for(var s=[],i=n;i;)s.push(i),t[i],i=t[i];return s.reverse(),s},find_path:function(t,n,s){var i=e.single_source_shortest_paths(t,n,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,s={},i;t=t||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=t.sorter||n.default_sorter,s},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var s={value:t,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(Yh);var Ob=Yh.exports;(function(r){const e=Ir,t=Bb,n=Mb,s=Cb,i=Nb,o=Kn,a=mn,c=Ob;function p(M){return unescape(encodeURIComponent(M)).length}function g(M,C,T){const N=[];let P;for(;(P=M.exec(T))!==null;)N.push({data:P[0],index:P.index,mode:C,length:P[0].length});return N}function w(M){const C=g(o.NUMERIC,e.NUMERIC,M),T=g(o.ALPHANUMERIC,e.ALPHANUMERIC,M);let N,P;return a.isKanjiModeEnabled()?(N=g(o.BYTE,e.BYTE,M),P=g(o.KANJI,e.KANJI,M)):(N=g(o.BYTE_KANJI,e.BYTE,M),P=[]),C.concat(T,N,P).sort(function(F,Y){return F.index-Y.index}).map(function(F){return{data:F.data,mode:F.mode,length:F.length}})}function B(M,C){switch(C){case e.NUMERIC:return t.getBitsLength(M);case e.ALPHANUMERIC:return n.getBitsLength(M);case e.KANJI:return i.getBitsLength(M);case e.BYTE:return s.getBitsLength(M)}}function m(M){return M.reduce(function(C,T){const N=C.length-1>=0?C[C.length-1]:null;return N&&N.mode===T.mode?(C[C.length-1].data+=T.data,C):(C.push(T),C)},[])}function I(M){const C=[];for(let T=0;T<M.length;T++){const N=M[T];switch(N.mode){case e.NUMERIC:C.push([N,{data:N.data,mode:e.ALPHANUMERIC,length:N.length},{data:N.data,mode:e.BYTE,length:N.length}]);break;case e.ALPHANUMERIC:C.push([N,{data:N.data,mode:e.BYTE,length:N.length}]);break;case e.KANJI:C.push([N,{data:N.data,mode:e.BYTE,length:p(N.data)}]);break;case e.BYTE:C.push([{data:N.data,mode:e.BYTE,length:p(N.data)}])}}return C}function k(M,C){const T={},N={start:{}};let P=["start"];for(let D=0;D<M.length;D++){const F=M[D],Y=[];for(let W=0;W<F.length;W++){const j=F[W],q=""+D+W;Y.push(q),T[q]={node:j,lastCount:0},N[q]={};for(let G=0;G<P.length;G++){const v=P[G];T[v]&&T[v].node.mode===j.mode?(N[v][q]=B(T[v].lastCount+j.length,j.mode)-B(T[v].lastCount,j.mode),T[v].lastCount+=j.length):(T[v]&&(T[v].lastCount=j.length),N[v][q]=B(j.length,j.mode)+4+e.getCharCountIndicator(j.mode,C))}}P=Y}for(let D=0;D<P.length;D++)N[P[D]].end=0;return{map:N,table:T}}function E(M,C){let T;const N=e.getBestModeForData(M);if(T=e.from(C,N),T!==e.BYTE&&T.bit<N.bit)throw new Error('"'+M+'" cannot be encoded with mode '+e.toString(T)+`.
 Suggested mode is: `+e.toString(N));switch(T===e.KANJI&&!a.isKanjiModeEnabled()&&(T=e.BYTE),T){case e.NUMERIC:return new t(M);case e.ALPHANUMERIC:return new n(M);case e.KANJI:return new i(M);case e.BYTE:return new s(M)}}r.fromArray=function(C){return C.reduce(function(T,N){return typeof N=="string"?T.push(E(N,null)):N.data&&T.push(E(N.data,N.mode)),T},[])},r.fromString=function(C,T){const N=w(C,a.isKanjiModeEnabled()),P=I(N),D=k(P,T),F=c.find_path(D.map,"start","end"),Y=[];for(let W=1;W<F.length-1;W++)Y.push(D.table[F[W]].node);return r.fromArray(m(Y))},r.rawSplit=function(C){return r.fromArray(w(C,a.isKanjiModeEnabled()))}})(Gh);const va=mn,dc=ya,Wb=yb,Ub=wb,zb=zh,Db=Dh,Uc=Fh,zc=wa,Fb=vb,Do=qh,Kb=jh,$b=Ir,fc=Gh;function qb(r,e){const t=r.size,n=Db.getPositions(e);for(let s=0;s<n.length;s++){const i=n[s][0],o=n[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||t<=i+a))for(let c=-1;c<=7;c++)o+c<=-1||t<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?r.set(i+a,o+c,!0,!0):r.set(i+a,o+c,!1,!0))}}function Hb(r){const e=r.size;for(let t=8;t<e-8;t++){const n=t%2===0;r.set(t,6,n,!0),r.set(6,t,n,!0)}}function jb(r,e){const t=zb.getPositions(e);for(let n=0;n<t.length;n++){const s=t[n][0],i=t[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?r.set(s+o,i+a,!0,!0):r.set(s+o,i+a,!1,!0)}}function Vb(r,e){const t=r.size,n=Do.getEncodedBits(e);let s,i,o;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+t-8-3,o=(n>>a&1)===1,r.set(s,i,o,!0),r.set(i,s,o,!0)}function hc(r,e,t){const n=r.size,s=Kb.getEncodedBits(e,t);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?r.set(i,8,o,!0):i<8?r.set(i+1,8,o,!0):r.set(n-15+i,8,o,!0),i<8?r.set(8,n-i-1,o,!0):i<9?r.set(8,15-i-1+1,o,!0):r.set(8,15-i-1,o,!0);r.set(n-8,8,1,!0)}function Gb(r,e){const t=r.size;let n=-1,s=t-1,i=7,o=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!r.isReserved(s,a-c)){let p=!1;o<e.length&&(p=(e[o]>>>i&1)===1),r.set(s,a-c,p),i--,i===-1&&(o++,i=7)}if(s+=n,s<0||t<=s){s-=n,n=-n;break}}}function Yb(r,e,t){const n=new Wb;t.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),$b.getCharCountIndicator(c.mode,r)),c.write(n)});const s=va.getSymbolTotalCodewords(r),i=zc.getTotalCodewordsCount(r,e),o=(s-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return Zb(n,r,e)}function Zb(r,e,t){const n=va.getSymbolTotalCodewords(e),s=zc.getTotalCodewordsCount(e,t),i=n-s,o=zc.getBlocksCount(e,t),a=n%o,c=o-a,p=Math.floor(n/o),g=Math.floor(i/o),w=g+1,B=p-g,m=new Fb(B);let I=0;const k=new Array(o),E=new Array(o);let M=0;const C=new Uint8Array(r.buffer);for(let F=0;F<o;F++){const Y=F<c?g:w;k[F]=C.slice(I,I+Y),E[F]=m.encode(k[F]),I+=Y,M=Math.max(M,Y)}const T=new Uint8Array(n);let N=0,P,D;for(P=0;P<M;P++)for(D=0;D<o;D++)P<k[D].length&&(T[N++]=k[D][P]);for(P=0;P<B;P++)for(D=0;D<o;D++)T[N++]=E[D][P];return T}function Jb(r,e,t,n){let s;if(Array.isArray(r))s=fc.fromArray(r);else if(typeof r=="string"){let p=e;if(!p){const g=fc.rawSplit(r);p=Do.getBestVersionForData(g,t)}s=fc.fromString(r,p||40)}else throw new Error("Invalid data");const i=Do.getBestVersionForData(s,t);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=Yb(e,t,s),a=va.getSymbolSize(e),c=new Ub(a);return qb(c,e),Hb(c),jb(c,e),hc(c,t,0),e>=7&&Vb(c,e),Gb(c,o),isNaN(n)&&(n=Uc.getBestMask(c,hc.bind(null,c,t))),Uc.applyMask(n,c),hc(c,t,n),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:n,segments:s}}Wh.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let n=dc.M,s,i;return typeof t<"u"&&(n=dc.from(t.errorCorrectionLevel,dc.M),s=Do.from(t.version),i=Uc.from(t.maskPattern),t.toSJISFunc&&va.setToSJISFunction(t.toSJISFunc)),Jb(e,s,n,i)};var Zh={},du={};(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const i=r.getScale(n,s);return Math.floor((n+s.margin*2)*i)},r.qrToImageData=function(n,s,i){const o=s.modules.size,a=s.modules.data,c=r.getScale(o,i),p=Math.floor((o+i.margin*2)*c),g=i.margin*c,w=[i.color.light,i.color.dark];for(let B=0;B<p;B++)for(let m=0;m<p;m++){let I=(B*p+m)*4,k=i.color.light;if(B>=g&&m>=g&&B<p-g&&m<p-g){const E=Math.floor((B-g)/c),M=Math.floor((m-g)/c);k=w[a[E*o+M]?1:0]}n[I++]=k.r,n[I++]=k.g,n[I++]=k.b,n[I]=k.a}}})(du);(function(r){const e=du;function t(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,o,a){let c=a,p=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(p=n()),c=e.getOptions(c);const g=e.getImageWidth(i.modules.size,c),w=p.getContext("2d"),B=w.createImageData(g,g);return e.qrToImageData(B.data,i,c),t(w,p,g),w.putImageData(B,0,0),p},r.renderToDataURL=function(i,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const p=r.render(i,o,c),g=c.type||"image/png",w=c.rendererOpts||{};return p.toDataURL(g,w.quality)}})(Zh);var Jh={};const Xb=du;function yd(r,e){const t=r.a/255,n=e+'="'+r.hex+'"';return t<1?n+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':n}function pc(r,e,t){let n=r+e;return typeof t<"u"&&(n+=" "+t),n}function Qb(r,e,t){let n="",s=0,i=!1,o=0;for(let a=0;a<r.length;a++){const c=Math.floor(a%e),p=Math.floor(a/e);!c&&!i&&(i=!0),r[a]?(o++,a>0&&c>0&&r[a-1]||(n+=i?pc("M",c+t,.5+p+t):pc("m",s,0),s=0,i=!1),c+1<e&&r[a+1]||(n+=pc("h",o),o=0)):s++}return n}Jh.render=function(e,t,n){const s=Xb.getOptions(t),i=e.modules.size,o=e.modules.data,a=i+s.margin*2,c=s.color.light.a?"<path "+yd(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",p="<path "+yd(s.color.dark,"stroke")+' d="'+Qb(o,i,s.margin)+'"/>',g='viewBox="0 0 '+a+" "+a+'"',B='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+g+' shape-rendering="crispEdges">'+c+p+`</svg>
`;return typeof n=="function"&&n(null,B),B};const ev=gb,Dc=Wh,Xh=Zh,tv=Jh;function fu(r,e,t,n,s){const i=[].slice.call(arguments,1),o=i.length,a=typeof i[o-1]=="function";if(!a&&!ev())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(s=t,t=e,e=n=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=n=void 0):o===2&&!e.getContext&&(n=t,t=e,e=void 0),new Promise(function(c,p){try{const g=Dc.create(t,n);c(r(g,e,n))}catch(g){p(g)}})}try{const c=Dc.create(t,n);s(null,r(c,e,n))}catch(c){s(c)}}Ts.create=Dc.create;Ts.toCanvas=fu.bind(null,Xh.render);Ts.toDataURL=fu.bind(null,Xh.renderToDataURL);Ts.toString=fu.bind(null,function(r,e,t){return tv.render(r,t)});const nv=nr(ub);var hu={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SOLANA_CHAINS=r.SOLANA_LOCALNET_CHAIN=r.SOLANA_TESTNET_CHAIN=r.SOLANA_DEVNET_CHAIN=r.SOLANA_MAINNET_CHAIN=void 0,r.isSolanaChain=e,r.SOLANA_MAINNET_CHAIN="solana:mainnet",r.SOLANA_DEVNET_CHAIN="solana:devnet",r.SOLANA_TESTNET_CHAIN="solana:testnet",r.SOLANA_LOCALNET_CHAIN="solana:localnet",r.SOLANA_CHAINS=[r.SOLANA_MAINNET_CHAIN,r.SOLANA_DEVNET_CHAIN,r.SOLANA_TESTNET_CHAIN,r.SOLANA_LOCALNET_CHAIN];function e(t){return r.SOLANA_CHAINS.includes(t)}})(hu);var $n={},Si={},pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.getCommitment=rv;function rv(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}var Qh={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LOCALNET_ENDPOINT=r.TESTNET_ENDPOINT=r.DEVNET_ENDPOINT=r.MAINNET_ENDPOINT=void 0,r.getChainForEndpoint=t,r.getEndpointForChain=n;const e=hu;r.MAINNET_ENDPOINT="https://api.mainnet-beta.solana.com",r.DEVNET_ENDPOINT="https://api.devnet.solana.com",r.TESTNET_ENDPOINT="https://api.testnet.solana.com",r.LOCALNET_ENDPOINT="http://localhost:8899";function t(s){return s.includes(r.MAINNET_ENDPOINT)?e.SOLANA_MAINNET_CHAIN:/\bdevnet\b/i.test(s)?e.SOLANA_DEVNET_CHAIN:/\btestnet\b/i.test(s)?e.SOLANA_TESTNET_CHAIN:/\blocalhost\b/i.test(s)||/\b127\.0\.0\.1\b/.test(s)?e.SOLANA_LOCALNET_CHAIN:e.SOLANA_MAINNET_CHAIN}function n(s,i){return i||(s===e.SOLANA_MAINNET_CHAIN?r.MAINNET_ENDPOINT:s===e.SOLANA_DEVNET_CHAIN?r.DEVNET_ENDPOINT:s===e.SOLANA_TESTNET_CHAIN?r.TESTNET_ENDPOINT:s===e.SOLANA_LOCALNET_CHAIN?r.LOCALNET_ENDPOINT:r.MAINNET_ENDPOINT)}})(Qh);var rr={},Ls={};const iv=nr(Mg);var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.arraysEqual=e0;Ps.bytesEqual=sv;function e0(r,e){if(r===e)return!0;const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function sv(r,e){return e0(r,e)}Object.defineProperty(Ls,"__esModule",{value:!0});Ls.verifyMessageSignature=t0;Ls.verifySignMessage=cv;const ov=iv,av=Ps;function t0({message:r,signedMessage:e,signature:t,publicKey:n}){return(0,av.bytesEqual)(r,e)&&ov.ed25519.verify(t,e,n)}function cv(r,e){const{message:t,account:{publicKey:n}}=r,{signedMessage:s,signature:i}=e;return t0({message:t,signedMessage:s,signature:i,publicKey:n})}Object.defineProperty(rr,"__esModule",{value:!0});rr.verifySignIn=dv;rr.deriveSignInMessage=n0;rr.deriveSignInMessageText=r0;rr.parseSignInMessage=i0;rr.parseSignInMessageText=s0;rr.createSignInMessage=Iv;rr.createSignInMessageText=gu;const lv=Ls,uv=Ps;function dv(r,e){const{signedMessage:t,signature:n,account:{publicKey:s}}=e,i=n0(r,e);return!!i&&(0,lv.verifyMessageSignature)({message:i,signedMessage:t,signature:n,publicKey:s})}function n0(r,e){const t=r0(r,e);return t?new TextEncoder().encode(t):null}function r0(r,e){const t=i0(e.signedMessage);if(!t||r.domain&&r.domain!==t.domain||r.address&&r.address!==t.address||r.statement!==t.statement||r.uri!==t.uri||r.version!==t.version||r.chainId!==t.chainId||r.nonce!==t.nonce||r.issuedAt!==t.issuedAt||r.expirationTime!==t.expirationTime||r.notBefore!==t.notBefore||r.requestId!==t.requestId)return null;if(r.resources){if(!t.resources||!(0,uv.arraysEqual)(r.resources,t.resources))return null}else if(t.resources)return null;return gu(t)}function i0(r){const e=new TextDecoder().decode(r);return s0(e)}const fv="(?<domain>[^\\n]+?) wants you to sign in with your Solana account:\\n",hv="(?<address>[^\\n]+)(?:\\n|$)",pv="(?:\\n(?<statement>[\\S\\s]*?)(?:\\n|$))??",gv="(?:\\nURI: (?<uri>[^\\n]+))?",mv="(?:\\nVersion: (?<version>[^\\n]+))?",yv="(?:\\nChain ID: (?<chainId>[^\\n]+))?",wv="(?:\\nNonce: (?<nonce>[^\\n]+))?",bv="(?:\\nIssued At: (?<issuedAt>[^\\n]+))?",vv="(?:\\nExpiration Time: (?<expirationTime>[^\\n]+))?",Sv="(?:\\nNot Before: (?<notBefore>[^\\n]+))?",Ev="(?:\\nRequest ID: (?<requestId>[^\\n]+))?",_v="(?:\\nResources:(?<resources>(?:\\n- [^\\n]+)*))?",Av=`${gv}${mv}${yv}${wv}${bv}${vv}${Sv}${Ev}${_v}`,kv=new RegExp(`^${fv}${hv}${pv}${Av}\\n*$`);function s0(r){var e;const t=kv.exec(r);if(!t)return null;const n=t.groups;return n?{domain:n.domain,address:n.address,statement:n.statement,uri:n.uri,version:n.version,nonce:n.nonce,chainId:n.chainId,issuedAt:n.issuedAt,expirationTime:n.expirationTime,notBefore:n.notBefore,requestId:n.requestId,resources:(e=n.resources)===null||e===void 0?void 0:e.split(`
- `).slice(1)}:null}function Iv(r){const e=gu(r);return new TextEncoder().encode(e)}function gu(r){let e=`${r.domain} wants you to sign in with your Solana account:
`;e+=`${r.address}`,r.statement&&(e+=`

${r.statement}`);const t=[];if(r.uri&&t.push(`URI: ${r.uri}`),r.version&&t.push(`Version: ${r.version}`),r.chainId&&t.push(`Chain ID: ${r.chainId}`),r.nonce&&t.push(`Nonce: ${r.nonce}`),r.issuedAt&&t.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&t.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&t.push(`Not Before: ${r.notBefore}`),r.requestId&&t.push(`Request ID: ${r.requestId}`),r.resources){t.push("Resources:");for(const n of r.resources)t.push(`- ${n}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}(function(r){var e=Qt&&Qt.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),t=Qt&&Qt.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(r,"__esModule",{value:!0}),t(pu,r),t(Qh,r),t(rr,r),t(Ls,r)})(Si);Object.defineProperty($n,"__esModule",{value:!0});var xv=Si;const hn={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION",ERROR_BROWSER_NOT_SUPPORTED:"ERROR_BROWSER_NOT_SUPPORTED"};class pn extends Error{constructor(...e){const[t,n,s]=e;super(n),this.code=t,this.data=s,this.name="SolanaMobileWalletAdapterError"}}const Bv={ERROR_AUTHORIZATION_FAILED:-1,ERROR_INVALID_PAYLOADS:-2,ERROR_NOT_SIGNED:-3,ERROR_NOT_SUBMITTED:-4,ERROR_TOO_MANY_PAYLOADS:-5,ERROR_ATTEST_ORIGIN_ANDROID:-100};class Sa extends Error{constructor(...e){const[t,n,s,i]=e;super(s),this.code=n,this.data=i,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function Pe(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(w){o(w)}}function c(g){try{p(n.throw(g))}catch(w){o(w)}}function p(g){g.done?i(g.value):s(g.value).then(a,c)}p((n=n.apply(r,[])).next())})}function Rv(r){return window.btoa(r)}function Fc(r,e){const t=window.btoa(String.fromCharCode.call(null,...r));return e?t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):t}function Mv(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function Xs(r,e){return Pe(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),s=new Uint8Array(t.byteLength+n.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(n),t.byteLength),s})}function Tv(r){return xv.createSignInMessageText(r)}function Cv(r){return Rv(Tv(r))}const o0="solana:signTransactions",Kc="solana:cloneAuthorization",Lv="solana:signInWithSolana";function a0(r,e){return new Proxy({},{get(t,n){return n==="then"?null:(t[n]==null&&(t[n]=function(s){return Pe(this,void 0,void 0,function*(){const{method:i,params:o}=Pv(n,s,r),a=yield e(i,o);return i==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield Ov(o.sign_in_payload,a,e)),Nv(n,a,r)})}),t[n])},defineProperty(){return!1},deleteProperty(){return!1}})}function Pv(r,e,t){let n=e,s=r.toString().replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:i}=n;if(t==="legacy"){switch(i){case"solana:testnet":{i="testnet";break}case"solana:devnet":{i="devnet";break}case"solana:mainnet":{i="mainnet-beta";break}default:i=n.cluster}n.cluster=i}else{switch(i){case"testnet":case"devnet":{i=`solana:${i}`;break}case"mainnet-beta":{i="solana:mainnet";break}}n.chain=i}}case"reauthorize":{const{auth_token:i,identity:o}=n;if(i)switch(t){case"legacy":{s="reauthorize",n={auth_token:i,identity:o};break}default:{s="authorize";break}}break}}return{method:s,params:n}}function Nv(r,e,t){switch(r){case"getCapabilities":{const n=e;switch(t){case"legacy":{const s=[o0];return n.supports_clone_authorization===!0&&s.push(Kc),Object.assign(Object.assign({},n),{features:s})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(Kc)})}}}return e}function Ov(r,e,t){var n;return Pe(this,void 0,void 0,function*(){const s=(n=r.domain)!==null&&n!==void 0?n:window.location.host,i=e.accounts[0].address,o=Cv(Object.assign(Object.assign({},r),{domain:s,address:i})),a=yield t("sign_messages",{addresses:[i],payloads:[o]});return{address:i,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const tr=4;function Wv(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(tr);return new DataView(e).setUint32(0,r,!1),new Uint8Array(e)}const $c=12,mu=65;function Uv(r,e,t){return Pe(this,void 0,void 0,function*(){const n=Wv(e),s=new Uint8Array($c);crypto.getRandomValues(s);const i=yield crypto.subtle.encrypt(l0(n,s),t,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+s.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(s),n.byteLength),o.set(new Uint8Array(i),n.byteLength+s.byteLength),o})}function c0(r,e){return Pe(this,void 0,void 0,function*(){const t=r.slice(0,tr),n=r.slice(tr,tr+$c),s=r.slice(tr+$c),i=yield crypto.subtle.decrypt(l0(t,n),e,s);return zv().decode(i)})}function l0(r,e){return{additionalData:r,iv:e,name:"AES-GCM",tagLength:128}}let gc;function zv(){return gc===void 0&&(gc=new TextDecoder("utf-8")),gc}function u0(){return Pe(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Qs(){return Pe(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function d0(r){let e="";const t=new Uint8Array(r),n=t.byteLength;for(let s=0;s<n;s++)e+=String.fromCharCode(t[s]);return window.btoa(e)}function Dv(){return f0(49152+Math.floor(Math.random()*16384))}function f0(r){if(r<49152||r>65535)throw new pn(hn.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function h0(r){return r.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const Fv="solana-wallet";function wd(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function p0(r,e){let t=null;if(e){try{t=new URL(e)}catch{}if((t==null?void 0:t.protocol)!=="https:")throw new pn(hn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${Fv}:/`));const n=r.startsWith("/")?r:[...wd(t.pathname),...wd(r)].join("/");return new URL(n,t)}function Kv(r,e,t,n=["v1"]){return Pe(this,void 0,void 0,function*(){const s=f0(e),i=yield crypto.subtle.exportKey("raw",r),o=d0(i),a=p0("v1/associate/local",t);return a.searchParams.set("association",h0(o)),a.searchParams.set("port",`${s}`),n.forEach(c=>{a.searchParams.set("v",c)}),a})}function $v(r,e,t,n,s=["v1"]){return Pe(this,void 0,void 0,function*(){const i=yield crypto.subtle.exportKey("raw",r),o=d0(i),a=p0("v1/associate/remote",n);return a.searchParams.set("association",h0(o)),a.searchParams.set("reflector",`${e}`),a.searchParams.set("id",`${Fc(t,!0)}`),s.forEach(c=>{a.searchParams.set("v",c)}),a})}function g0(r,e){return Pe(this,void 0,void 0,function*(){const t=JSON.stringify(r),n=r.id;return Uv(t,n,e)})}function m0(r,e){return Pe(this,void 0,void 0,function*(){const t=yield c0(r,e),n=JSON.parse(t);if(Object.hasOwnProperty.call(n,"error"))throw new Sa(n.id,n.error.code,n.error.message);return n})}function y0(r,e,t){return Pe(this,void 0,void 0,function*(){const[n,s]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",r.slice(0,mu),{name:"ECDH",namedCurve:"P-256"},!1,[])]),i=yield crypto.subtle.deriveBits({name:"ECDH",public:s},t,256),o=yield crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function w0(r,e){return Pe(this,void 0,void 0,function*(){const t=yield c0(r,e),n=JSON.parse(t);let s="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new pn(hn.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:s}})}const Fo={Firefox:0,Other:1};function qv(){return navigator.userAgent.indexOf("Firefox/")!==-1?Fo.Firefox:Fo.Other}function Hv(){return new Promise((r,e)=>{function t(){clearTimeout(s),window.removeEventListener("blur",n)}function n(){t(),r()}window.addEventListener("blur",n);const s=setTimeout(()=>{t(),e()},3e3)})}let Yi=null;function jv(r){Yi==null&&(Yi=document.createElement("iframe"),Yi.style.display="none",document.body.appendChild(Yi)),Yi.contentWindow.location.href=r.toString()}function Vv(r){return Pe(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const e=qv();switch(e){case Fo.Firefox:jv(r);break;case Fo.Other:{const t=Hv();window.location.assign(r),yield t;break}default:}}catch{throw new pn(hn.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function Gv(r,e){return Pe(this,void 0,void 0,function*(){const t=Dv(),n=yield Kv(r,t,e);return yield Vv(n),t})}const Ko={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},b0="com.solana.mobilewalletadapter.v1",bd="com.solana.mobilewalletadapter.v1.base64";function v0(){if(typeof window>"u"||window.isSecureContext!==!0)throw new pn(hn.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function S0(r){let e;try{e=new URL(r)}catch{throw new pn(hn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new pn(hn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function $o(r){return new DataView(r).getUint32(0,!1)}function Yv(r){var e=new Uint8Array(r),t=r.byteLength,n=10,s=0,i=0,o;do{if(i>=t||i>n)throw new RangeError("Failed to decode varint");o=e[i++],s|=(o&127)<<7*i}while(o>=128);return{value:s,offset:i}}function Zv(r){let{value:e,offset:t}=Yv(r);return new Uint8Array(r.slice(t,t+e))}function Jv(r,e){return Pe(this,void 0,void 0,function*(){v0();const t=yield u0(),s=`ws://localhost:${yield Gv(t.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let i;const o=(()=>{const g=[...Ko.retryDelayScheduleMs];return()=>g.length>1?g.shift():g[0]})();let a=1,c=0,p={__type:"disconnected"};return new Promise((g,w)=>{let B;const m={},I=()=>Pe(this,void 0,void 0,function*(){if(p.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${p.__type}\`.`);return}B.removeEventListener("open",I);const{associationKeypair:P}=p,D=yield Qs();B.send(yield Xs(D.publicKey,P.privateKey)),p={__type:"hello_req_sent",associationPublicKey:P.publicKey,ecdhPrivateKey:D.privateKey}}),k=P=>{P.wasClean?p={__type:"disconnected"}:w(new pn(hn.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${P.code}: ${P.reason}).`,{closeEvent:P})),C()},E=P=>Pe(this,void 0,void 0,function*(){C(),Date.now()-i>=Ko.timeoutMs?w(new pn(hn.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise(D=>{const F=o();T=window.setTimeout(D,F)}),N())}),M=P=>Pe(this,void 0,void 0,function*(){const D=yield P.data.arrayBuffer();switch(p.__type){case"connecting":if(D.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const F=yield Qs();B.send(yield Xs(F.publicKey,t.privateKey)),p={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:F.privateKey};break;case"connected":try{const Y=D.slice(0,tr),W=$o(Y);if(W!==c+1)throw new Error("Encrypted message has invalid sequence number");c=W;const j=yield m0(D,p.sharedSecret),q=m[j.id];delete m[j.id],q.resolve(j.result)}catch(Y){if(Y instanceof Sa){const W=m[Y.jsonRpcMessageId];delete m[Y.jsonRpcMessageId],W.reject(Y)}else throw Y}break;case"hello_req_sent":{if(D.byteLength===0){const G=yield Qs();B.send(yield Xs(G.publicKey,t.privateKey)),p={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:G.privateKey};break}const Y=yield y0(D,p.associationPublicKey,p.ecdhPrivateKey),W=D.slice(mu),j=W.byteLength!==0?yield Pe(this,void 0,void 0,function*(){const G=W.slice(0,tr),v=$o(G);if(v!==c+1)throw new Error("Encrypted message has invalid sequence number");return c=v,w0(W,Y)}):{protocol_version:"legacy"};p={__type:"connected",sharedSecret:Y,sessionProperties:j};const q=a0(j.protocol_version,(G,v)=>Pe(this,void 0,void 0,function*(){const l=a++;return B.send(yield g0({id:l,jsonrpc:"2.0",method:G,params:v??{}},Y)),new Promise((h,y)=>{m[l]={resolve(S){switch(G){case"authorize":case"reauthorize":{const{wallet_uri_base:A}=S;if(A!=null)try{S0(A)}catch(L){y(L);return}break}}h(S)},reject:y}})}));try{g(yield r(q))}catch(G){w(G)}finally{C(),B.close()}break}}});let C,T;const N=()=>{C&&C(),p={__type:"connecting",associationKeypair:t},i===void 0&&(i=Date.now()),B=new WebSocket(s,[b0]),B.addEventListener("open",I),B.addEventListener("close",k),B.addEventListener("error",E),B.addEventListener("message",M),C=()=>{window.clearTimeout(T),B.removeEventListener("open",I),B.removeEventListener("close",k),B.removeEventListener("error",E),B.removeEventListener("message",M)}};N()})})}function Xv(r){return Pe(this,void 0,void 0,function*(){v0();const e=yield u0(),t=`wss://${r==null?void 0:r.remoteHostAuthority}/reflect`;let n;const s=(()=>{const k=[...Ko.retryDelayScheduleMs];return()=>k.length>1?k.shift():k[0]})();let i=1,o=0,a,c={__type:"disconnected"},p,g,w=k=>Pe(this,void 0,void 0,function*(){if(a=="base64"){const E=yield k.data;return Mv(E).buffer}else return yield k.data.arrayBuffer()});const B=yield new Promise((k,E)=>{const M=()=>Pe(this,void 0,void 0,function*(){if(c.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${c.__type}\`.`);return}p.protocol.includes(bd)?a="base64":a="binary",p.removeEventListener("open",M)}),C=F=>{F.wasClean?c={__type:"disconnected"}:E(new pn(hn.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${F.code}: ${F.reason}).`,{closeEvent:F})),g()},T=F=>Pe(this,void 0,void 0,function*(){g(),Date.now()-n>=Ko.timeoutMs?E(new pn(hn.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${t}.`)):(yield new Promise(Y=>{const W=s();P=window.setTimeout(Y,W)}),D())}),N=F=>Pe(this,void 0,void 0,function*(){const Y=yield w(F);if(c.__type==="connecting"){if(Y.byteLength==0)throw new Error("Encountered unexpected message while connecting");const W=Zv(Y);c={__type:"reflector_id_received",reflectorId:W};const j=yield $v(e.publicKey,r.remoteHostAuthority,W,r==null?void 0:r.baseUri);p.removeEventListener("message",N),k(j)}});let P;const D=()=>{g&&g(),c={__type:"connecting",associationKeypair:e},n===void 0&&(n=Date.now()),p=new WebSocket(t,[b0,bd]),p.addEventListener("open",M),p.addEventListener("close",C),p.addEventListener("error",T),p.addEventListener("message",N),g=()=>{window.clearTimeout(P),p.removeEventListener("open",M),p.removeEventListener("close",C),p.removeEventListener("error",T),p.removeEventListener("message",N)}};D()});let m=!1,I;return{associationUrl:B,close:()=>{p.close(),I()},wallet:new Promise((k,E)=>{const M={},C=T=>Pe(this,void 0,void 0,function*(){const N=yield w(T);switch(c.__type){case"reflector_id_received":if(N.byteLength!==0)throw new Error("Encountered unexpected message while awaiting reflection");const P=yield Qs(),D=yield Xs(P.publicKey,e.privateKey);a=="base64"?p.send(Fc(D)):p.send(D),c={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:P.privateKey};break;case"connected":try{const F=N.slice(0,tr),Y=$o(F);if(Y!==o+1)throw new Error("Encrypted message has invalid sequence number");o=Y;const W=yield m0(N,c.sharedSecret),j=M[W.id];delete M[W.id],j.resolve(W.result)}catch(F){if(F instanceof Sa){const Y=M[F.jsonRpcMessageId];delete M[F.jsonRpcMessageId],Y.reject(F)}else throw F}break;case"hello_req_sent":{const F=yield y0(N,c.associationPublicKey,c.ecdhPrivateKey),Y=N.slice(mu),W=Y.byteLength!==0?yield Pe(this,void 0,void 0,function*(){const q=Y.slice(0,tr),G=$o(q);if(G!==o+1)throw new Error("Encrypted message has invalid sequence number");return o=G,w0(Y,F)}):{protocol_version:"legacy"};c={__type:"connected",sharedSecret:F,sessionProperties:W};const j=a0(W.protocol_version,(q,G)=>Pe(this,void 0,void 0,function*(){const v=i++,l=yield g0({id:v,jsonrpc:"2.0",method:q,params:G??{}},F);return a=="base64"?p.send(Fc(l)):p.send(l),new Promise((h,y)=>{M[v]={resolve(S){switch(q){case"authorize":case"reauthorize":{const{wallet_uri_base:A}=S;if(A!=null)try{S0(A)}catch(L){y(L);return}break}}h(S)},reject:y}})}));m=!0;try{k(j)}catch(q){E(q)}break}}});p.addEventListener("message",C),I=()=>{p.removeEventListener("message",C),g(),m||E(new pn(hn.ERROR_SESSION_CLOSED,"The wallet session was closed before connection.",{closeEvent:new CloseEvent("socket was closed before connection")}))}})}})}$n.SolanaCloneAuthorization=Kc;$n.SolanaMobileWalletAdapterError=pn;$n.SolanaMobileWalletAdapterErrorCode=hn;$n.SolanaMobileWalletAdapterProtocolError=Sa;$n.SolanaMobileWalletAdapterProtocolErrorCode=Bv;$n.SolanaSignInWithSolana=Lv;$n.SolanaSignTransactions=o0;var Qv=$n.startRemoteScenario=Xv,eS=$n.transact=Jv;function tS(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var o=r.length,a=r.charAt(0),c=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var I=0,k=0,E=0,M=m.length;E!==M&&m[E]===0;)E++,I++;for(var C=(M-E)*p+1>>>0,T=new Uint8Array(C);E!==M;){for(var N=m[E],P=0,D=C-1;(N!==0||P<k)&&D!==-1;D--,P++)N+=256*T[D]>>>0,T[D]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");k=P,E++}for(var F=C-k;F!==C&&T[F]===0;)F++;for(var Y=a.repeat(I);F<C;++F)Y+=r.charAt(T[F]);return Y}function w(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;for(var I=0,k=0,E=0;m[I]===a;)k++,I++;for(var M=(m.length-I)*c+1>>>0,C=new Uint8Array(M);m[I];){var T=m.charCodeAt(I);if(T>255)return;var N=e[T];if(N===255)return;for(var P=0,D=M-1;(N!==0||P<E)&&D!==-1;D--,P++)N+=o*C[D]>>>0,C[D]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");E=P,I++}for(var F=M-E;F!==M&&C[F]===0;)F++;for(var Y=new Uint8Array(k+(M-F)),W=k;F!==M;)Y[W++]=C[F++];return Y}function B(m){var I=w(m);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:w,decode:B}}var nS=tS;const rS=nS,iS="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var sS=rS(iS);const oS=As(sS);function mc(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function fs(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(w){o(w)}}function c(g){try{p(n.throw(g))}catch(w){o(w)}}function p(g){g.done?i(g.value):s(g.value).then(a,c)}p((n=n.apply(r,[])).next())})}function E0(r){return window.btoa(String.fromCharCode.call(null,...r))}function yc(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function vd(r){const e="version"in r?r.serialize():r.serialize({requireAllSignatures:!1,verifySignatures:!1});return E0(e)}function aS(r){const t=r[0]*Ti+1;return ca.deserializeMessageVersion(r.slice(t,r.length))==="legacy"?xe.from(r):Ci.deserialize(r)}function cS(r,e){return fs(this,void 0,void 0,function*(){return yield eS(n=>r(_0(n)),e)})}function lS(r){return fs(this,void 0,void 0,function*(){const{wallet:e,close:t,associationUrl:n}=yield Qv(r);return{wallet:e.then(i=>_0(i)),close:t,associationUrl:n}})}function _0(r){return new Proxy({},{get(e,t){if(e[t]==null)switch(t){case"signAndSendTransactions":e[t]=function(n){var{minContextSlot:s,commitment:i,skipPreflight:o,maxRetries:a,waitForCommitmentToSendNextTransaction:c,transactions:p}=n,g=mc(n,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return fs(this,void 0,void 0,function*(){const w=p.map(vd),B={min_context_slot:s,commitment:i,skip_preflight:o,max_retries:a,wait_for_commitment_to_send_next_transaction:c},{signatures:m}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},g),Object.values(B).some(k=>k!=null)?{options:B}:null),{payloads:w}));return m.map(yc).map(oS.encode)})};break;case"signMessages":e[t]=function(n){var{payloads:s}=n,i=mc(n,["payloads"]);return fs(this,void 0,void 0,function*(){const o=s.map(E0),{signed_payloads:a}=yield r.signMessages(Object.assign(Object.assign({},i),{payloads:o}));return a.map(yc)})};break;case"signTransactions":e[t]=function(n){var{transactions:s}=n,i=mc(n,["transactions"]);return fs(this,void 0,void 0,function*(){const o=s.map(vd),{signed_payloads:a}=yield r.signTransactions(Object.assign(Object.assign({},i),{payloads:o}));return a.map(yc).map(aS)})};break;default:{e[t]=r[t];break}}return e[t]},defineProperty(){return!1},deleteProperty(){return!1}})}const uS=Object.freeze(Object.defineProperty({__proto__:null,startRemoteScenario:lS,transact:cS},Symbol.toStringTag,{value:"Module"})),dS=nr(uS);function fS(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var o=r.length,a=r.charAt(0),c=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var I=0,k=0,E=0,M=m.length;E!==M&&m[E]===0;)E++,I++;for(var C=(M-E)*p+1>>>0,T=new Uint8Array(C);E!==M;){for(var N=m[E],P=0,D=C-1;(N!==0||P<k)&&D!==-1;D--,P++)N+=256*T[D]>>>0,T[D]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");k=P,E++}for(var F=C-k;F!==C&&T[F]===0;)F++;for(var Y=a.repeat(I);F<C;++F)Y+=r.charAt(T[F]);return Y}function w(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;for(var I=0,k=0,E=0;m[I]===a;)k++,I++;for(var M=(m.length-I)*c+1>>>0,C=new Uint8Array(M);m[I];){var T=m.charCodeAt(I);if(T>255)return;var N=e[T];if(N===255)return;for(var P=0,D=M-1;(N!==0||P<E)&&D!==-1;D--,P++)N+=o*C[D]>>>0,C[D]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");E=P,I++}for(var F=M-E;F!==M&&C[F]===0;)F++;for(var Y=new Uint8Array(k+(M-F)),W=k;F!==M;)Y[W++]=C[F++];return Y}function B(m){var I=w(m);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:w,decode:B}}var hS=fS;const pS=hS,gS="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var mS=pS(gS);Object.defineProperty(Fn,"__esModule",{value:!0});var Lt=Oh,_s=Nh,yS=Ts,Ii=nv,Sd=hu,A0=dS,wS=mS;function k0(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var bS=k0(yS),qo=k0(wS);function ye(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(w){o(w)}}function c(g){try{p(n.throw(g))}catch(w){o(w)}}function p(g){g.done?i(g.value):s(g.value).then(a,c)}p((n=n.apply(r,[])).next())})}function z(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function _e(r,e,t,n,s){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var Zi,Bt,xr,li,I0,x0,B0,eo;const vS=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,SS=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,ES=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class R0{constructor(){Zi.add(this),Bt.set(this,null),xr.set(this,{}),li.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),z(this,Zi,"m",x0).call(this),z(this,Bt,"f")&&(z(this,Bt,"f").style.display="flex")},this.close=(e=void 0)=>{var t;console.debug("Modal close"),z(this,Zi,"m",B0).call(this),z(this,Bt,"f")&&(z(this,Bt,"f").style.display="none"),(t=z(this,xr,"f").close)===null||t===void 0||t.forEach(n=>n(e))},eo.set(this,e=>{e.key==="Escape"&&this.close(e)}),this.init=this.init.bind(this),_e(this,Bt,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return ye(this,void 0,void 0,function*(){console.log("Injecting modal"),z(this,Zi,"m",I0).call(this)})}addEventListener(e,t){var n;return!((n=z(this,xr,"f")[e])===null||n===void 0)&&n.push(t)||(z(this,xr,"f")[e]=[t]),()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;z(this,xr,"f")[e]=(n=z(this,xr,"f")[e])===null||n===void 0?void 0:n.filter(s=>t!==s)}}Bt=new WeakMap,xr=new WeakMap,li=new WeakMap,eo=new WeakMap,Zi=new WeakSet,I0=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){z(this,Bt,"f")||_e(this,Bt,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}_e(this,Bt,document.createElement("div")),z(this,Bt,"f").id="mobile-wallet-adapter-embedded-root-ui",z(this,Bt,"f").innerHTML=vS,z(this,Bt,"f").style.display="none";const e=z(this,Bt,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);const t=document.createElement("style");t.id="mobile-wallet-adapter-embedded-modal-styles",t.textContent=SS+this.contentStyles;const n=document.createElement("div");n.innerHTML=ES,this.dom=n.attachShadow({mode:"closed"}),this.dom.appendChild(t),this.dom.appendChild(z(this,Bt,"f")),document.body.appendChild(n)},x0=function(){if(!z(this,Bt,"f")||z(this,li,"f"))return;[...z(this,Bt,"f").querySelectorAll("[data-modal-close]")].forEach(t=>t==null?void 0:t.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",z(this,eo,"f")),_e(this,li,!0)},B0=function(){if(!z(this,li,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",z(this,eo,"f")),!z(this,Bt,"f")))return;[...z(this,Bt,"f").querySelectorAll("[data-modal-close]")].forEach(t=>t==null?void 0:t.removeEventListener("click",this.close)),_e(this,li,!1)};class _S extends R0{constructor(){super(...arguments),this.contentStyles=kS,this.contentHtml=AS}initWithQR(e){const t=Object.create(null,{init:{get:()=>super.init}});return ye(this,void 0,void 0,function*(){t.init.call(this),this.populateQRCode(e)})}populateQRCode(e){var t;return ye(this,void 0,void 0,function*(){const n=(t=this.dom)===null||t===void 0?void 0:t.getElementById("mobile-wallet-adapter-embedded-modal-qr-code-container");if(n){const s=yield bS.default.toCanvas(e,{width:200,margin:0});n.firstElementChild!==null?n.replaceChild(s,n.firstElementChild):n.appendChild(s)}else console.error("QRCode Container not found")})}}const AS=`
<div class="mobile-wallet-adapter-embedded-modal-qr-content">
    <div>
        <svg class="mobile-wallet-adapter-embedded-modal-icon" width="100%" height="100%">
            <circle r="52" cx="53" cy="53" fill="#99b3be" stroke="#000000" stroke-width="2"/>
            <path d="m 53,82.7305 c -3.3116,0 -6.1361,-1.169 -8.4735,-3.507 -2.338,-2.338 -3.507,-5.1625 -3.507,-8.4735 0,-3.3116 1.169,-6.1364 3.507,-8.4744 2.3374,-2.338 5.1619,-3.507 8.4735,-3.507 3.3116,0 6.1361,1.169 8.4735,3.507 2.338,2.338 3.507,5.1628 3.507,8.4744 0,3.311 -1.169,6.1355 -3.507,8.4735 -2.3374,2.338 -5.1619,3.507 -8.4735,3.507 z m 0.007,-5.25 c 1.8532,0 3.437,-0.6598 4.7512,-1.9793 1.3149,-1.3195 1.9723,-2.9058 1.9723,-4.7591 0,-1.8526 -0.6598,-3.4364 -1.9793,-4.7512 -1.3195,-1.3149 -2.9055,-1.9723 -4.7582,-1.9723 -1.8533,0 -3.437,0.6598 -4.7513,1.9793 -1.3148,1.3195 -1.9722,2.9058 -1.9722,4.7591 0,1.8527 0.6597,3.4364 1.9792,4.7512 1.3195,1.3149 2.9056,1.9723 4.7583,1.9723 z m -28,-33.5729 -3.85,-3.6347 c 4.1195,-4.025 8.8792,-7.1984 14.2791,-9.52 5.4005,-2.3223 11.2551,-3.4834 17.5639,-3.4834 6.3087,0 12.1634,1.1611 17.5639,3.4834 5.3999,2.3216 10.1596,5.495 14.2791,9.52 l -3.85,3.6347 C 77.2999,40.358 73.0684,37.5726 68.2985,35.5514 63.5292,33.5301 58.4296,32.5195 53,32.5195 c -5.4297,0 -10.5292,1.0106 -15.2985,3.0319 -4.7699,2.0212 -9.0014,4.8066 -12.6945,8.3562 z m 44.625,10.8771 c -2.2709,-2.1046 -4.7962,-3.7167 -7.5758,-4.8361 -2.7795,-1.12 -5.7983,-1.68 -9.0562,-1.68 -3.2579,0 -6.2621,0.56 -9.0125,1.68 -2.7504,1.1194 -5.2903,2.7315 -7.6195,4.8361 L 32.5189,51.15 c 2.8355,-2.6028 5.9777,-4.6086 9.4263,-6.0174 3.4481,-1.4087 7.133,-2.1131 11.0548,-2.1131 3.9217,0 7.5979,0.7044 11.0285,2.1131 3.43,1.4088 6.5631,3.4146 9.3992,6.0174 z"/>
        </svg>
        <div class="mobile-wallet-adapter-embedded-modal-title">Remote Mobile Wallet Adapter</div>
    </div>
    <div>
        <div>
            <h4 class="mobile-wallet-adapter-embedded-modal-qr-label">
                Open your wallet and scan this code
            </h4>
        </div>
        <div id="mobile-wallet-adapter-embedded-modal-qr-code-container" class="mobile-wallet-adapter-embedded-modal-qr-code-container"></div>
    </div>
</div>
<div class="mobile-wallet-adapter-embedded-modal-divider"><hr></div>
<div class="mobile-wallet-adapter-embedded-modal-footer">
    <div class="mobile-wallet-adapter-embedded-modal-subtitle">
        Follow the instructions on your device. When you're finished, this screen will update.
    </div>
    <div class="mobile-wallet-adapter-embedded-modal-progress-badge">
        <div>
            <div class="spinner">
                <div class="leftWrapper">
                    <div class="left">
                        <div class="circle"></div>
                    </div>
                </div>
                <div class="rightWrapper">
                    <div class="right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
        <div>Waiting for scan</div>
    </div>
</div>
`,kS=`
.mobile-wallet-adapter-embedded-modal-qr-content {
    display: flex; 
    margin-top: 10px;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
    display: flex;
    flex-direction: column;
    flex: 2;
    margin-top: auto;
    margin-right: 30px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
    display: flex;
    flex-direction: column;
    flex: 1;
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-footer {
    display: flex;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-icon {}

.mobile-wallet-adapter-embedded-modal-title {
    color: #000000;
    font-size: 2.5em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-qr-label {
    text-align: right;
    color: #000000;
}

.mobile-wallet-adapter-embedded-modal-qr-code-container {
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-divider {
    margin-top: 20px;
    padding-left: 10px;
    padding-right: 10px;
}

.mobile-wallet-adapter-embedded-modal-divider hr {
    border-top: 1px solid #D9DEDE;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: auto;
    margin-right: 60px;
    padding: 20px;
    color: #6E8286;
}

.mobile-wallet-adapter-embedded-modal-progress-badge {
    display: flex;
    background: #F7F8F8;
    height: 56px;
    min-width: 200px;
    margin: auto;
    padding-left: 20px;
    padding-right: 20px;
    border-radius: 18px;
    color: #A8B6B8;
    align-items: center;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:first-child {
    margin-left: auto;
    margin-right: 20px;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:nth-child(2) {
    margin-right: auto;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-card {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
        margin: auto;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
        margin: auto;
        flex: 2 auto;
    }
    .mobile-wallet-adapter-embedded-modal-footer {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-icon {
        display: none;
    }
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: unset;
    }
    .mobile-wallet-adapter-embedded-modal-qr-label {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-code-container {
        margin: auto;
    }
}

/* Spinner */
@keyframes spinLeft {
    0% {
        transform: rotate(20deg);
    }
    50% {
        transform: rotate(160deg);
    }
    100% {
        transform: rotate(20deg);
    }
}
@keyframes spinRight {
    0% {
        transform: rotate(160deg);
    }
    50% {
        transform: rotate(20deg);
    }
    100% {
        transform: rotate(160deg);
    }
}
@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(2520deg);
    }
}

.spinner {
    position: relative;
    width: 1.5em;
    height: 1.5em;
    margin: auto;
    animation: spin 10s linear infinite;
}
.spinner::before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}
.right, .rightWrapper, .left, .leftWrapper {
    position: absolute;
    top: 0;
    overflow: hidden;
    width: .75em;
    height: 1.5em;
}
.left, .leftWrapper {
    left: 0;
}
.right {
    left: -12px;
}
.rightWrapper {
    right: 0;
}
.circle {
    border: .125em solid #A8B6B8;
    width: 1.25em; /* 1.5em - 2*0.125em border */
    height: 1.25em; /* 1.5em - 2*0.125em border */
    border-radius: 0.75em; /* 0.5*1.5em spinner size 8 */
}
.left {
    transform-origin: 100% 50%;
    animation: spinLeft 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
.right {
    transform-origin: 100% 50%;
    animation: spinRight 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
`,M0="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function T0(r){return"version"in r}function C0(r){return window.btoa(String.fromCharCode.call(null,...r))}function vr(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}var ui,Dr,qc,Hc,jc,Vc,Ji,Jt,Gn,cr,di,fi,to,Xi,no,Gc,ro,L0,Yc,io,hi,Zc,Qi,so,pi,es,oo,Jc,Xc,ao,Qc,el,tl,co,gi,Fr,nl,rl,il,sl,ts,Xt,lr,ur,mi,yi,lo,ns,uo,fo,En,ol,ho,P0,al,po,rs,cl,is,go,wi,ss,mo,ll,ul,yo,dl,fl,hl,wo;const yu="Mobile Wallet Adapter",N0=64,O0=[Lt.SolanaSignAndSendTransaction,Lt.SolanaSignTransaction,Lt.SolanaSignMessage,Lt.SolanaSignIn];class W0{constructor(e){ui.add(this),Dr.set(this,{}),qc.set(this,"1.0.0"),Hc.set(this,yu),jc.set(this,"https://solanamobile.com/wallets"),Vc.set(this,M0),Ji.set(this,void 0),Jt.set(this,void 0),Gn.set(this,void 0),cr.set(this,!1),di.set(this,0),fi.set(this,[]),to.set(this,void 0),Xi.set(this,void 0),no.set(this,void 0),Gc.set(this,(t,n)=>{var s;return!((s=z(this,Dr,"f")[t])===null||s===void 0)&&s.push(n)||(z(this,Dr,"f")[t]=[n]),()=>z(this,ui,"m",L0).call(this,t,n)}),Yc.set(this,({silent:t}={})=>ye(this,void 0,void 0,function*(){if(z(this,cr,"f")||this.connected)return{accounts:this.accounts};_e(this,cr,!0);try{if(t){const n=yield z(this,Gn,"f").get();if(n)yield z(this,hi,"f").call(this,n);else return{accounts:this.accounts}}else yield z(this,io,"f").call(this)}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}finally{_e(this,cr,!1)}return{accounts:this.accounts}})),io.set(this,t=>ye(this,void 0,void 0,function*(){try{const n=yield z(this,Gn,"f").get();if(n)return z(this,hi,"f").call(this,n),n;const s=yield z(this,to,"f").select(z(this,fi,"f"));return yield z(this,pi,"f").call(this,i=>ye(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([i.getCapabilities(),i.authorize({chain:s,identity:z(this,Ji,"f"),sign_in_payload:t})]),c=z(this,oo,"f").call(this,a.accounts),p=Object.assign(Object.assign({},a),{accounts:c,chain:s});return Promise.all([z(this,Zc,"f").call(this,o),z(this,Gn,"f").set(p),z(this,hi,"f").call(this,p)]),p}))}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}})),hi.set(this,t=>ye(this,void 0,void 0,function*(){var n;const s=z(this,Jt,"f")==null||((n=z(this,Jt,"f"))===null||n===void 0?void 0:n.accounts.length)!==t.accounts.length||z(this,Jt,"f").accounts.some((i,o)=>i.address!==t.accounts[o].address);_e(this,Jt,t),s&&z(this,ui,"m",ro).call(this,"change",{accounts:this.accounts})})),Zc.set(this,t=>ye(this,void 0,void 0,function*(){const n=t.features.includes("solana:signTransactions"),s=t.supports_sign_and_send_transactions,i=Lt.SolanaSignAndSendTransaction in this.features!==s||Lt.SolanaSignTransaction in this.features!==n;_e(this,Xi,Object.assign(Object.assign({},(s||!s&&!n)&&{[Lt.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:z(this,ao,"f")}}),n&&{[Lt.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:z(this,Qc,"f")}})),i&&z(this,ui,"m",ro).call(this,"change",{features:this.features})})),Qi.set(this,(t,n,s)=>ye(this,void 0,void 0,function*(){try{const i=yield t.authorize({auth_token:n,identity:z(this,Ji,"f"),chain:s}),o=z(this,oo,"f").call(this,i.accounts),a=Object.assign(Object.assign({},i),{accounts:o,chain:s});Promise.all([z(this,Gn,"f").set(a),z(this,hi,"f").call(this,a)])}catch(i){throw z(this,so,"f").call(this),new Error(i instanceof Error&&i.message||"Unknown error")}})),so.set(this,()=>ye(this,void 0,void 0,function*(){var t;z(this,Gn,"f").clear(),_e(this,cr,!1),_e(this,di,(t=z(this,di,"f"),t++,t)),_e(this,Jt,void 0),z(this,ui,"m",ro).call(this,"change",{accounts:this.accounts})})),pi.set(this,t=>ye(this,void 0,void 0,function*(){var n;const s=(n=z(this,Jt,"f"))===null||n===void 0?void 0:n.wallet_uri_base,i=s?{baseUri:s}:void 0,o=z(this,di,"f");try{return yield A0.transact(t,i)}catch(a){throw z(this,di,"f")!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield z(this,no,"f").call(this,this)),a}})),es.set(this,()=>{if(!z(this,Jt,"f"))throw new Error("Wallet not connected");return{authToken:z(this,Jt,"f").auth_token,chain:z(this,Jt,"f").chain}}),oo.set(this,t=>t.map(n=>{var s,i;const o=vr(n.address);return{address:qo.default.encode(o),publicKey:o,label:n.label,icon:n.icon,chains:(s=n.chains)!==null&&s!==void 0?s:z(this,fi,"f"),features:(i=n.features)!==null&&i!==void 0?i:O0}})),Jc.set(this,t=>ye(this,void 0,void 0,function*(){const{authToken:n,chain:s}=z(this,es,"f").call(this);try{return yield z(this,pi,"f").call(this,i=>ye(this,void 0,void 0,function*(){return yield z(this,Qi,"f").call(this,i,n,s),yield i.signTransactions({transactions:t})}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),Xc.set(this,(t,n)=>ye(this,void 0,void 0,function*(){const{authToken:s,chain:i}=z(this,es,"f").call(this);try{return yield z(this,pi,"f").call(this,o=>ye(this,void 0,void 0,function*(){const[a,c]=yield Promise.all([o.getCapabilities(),z(this,Qi,"f").call(this,o,s,i)]);if(a.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions(Object.assign(Object.assign({},n),{transactions:[t]})))[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),ao.set(this,(...t)=>ye(this,void 0,void 0,function*(){const n=[];for(const s of t){const i=_s.VersionedTransaction.deserialize(s.transaction),o=yield z(this,Xc,"f").call(this,i,s.options);n.push({signature:qo.default.decode(o)})}return n})),Qc.set(this,(...t)=>ye(this,void 0,void 0,function*(){const n=t.map(({transaction:i})=>_s.VersionedTransaction.deserialize(i));return(yield z(this,Jc,"f").call(this,n)).map(i=>({signedTransaction:T0(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))})),el.set(this,(...t)=>ye(this,void 0,void 0,function*(){const{authToken:n,chain:s}=z(this,es,"f").call(this),i=t.map(({account:a})=>C0(a.publicKey)),o=t.map(({message:a})=>a);try{return yield z(this,pi,"f").call(this,a=>ye(this,void 0,void 0,function*(){return yield z(this,Qi,"f").call(this,a,n,s),(yield a.signMessages({addresses:i,payloads:o})).map(p=>({signedMessage:p,signature:p.slice(-N0)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),tl.set(this,(...t)=>ye(this,void 0,void 0,function*(){const n=[];if(t.length>1)for(const s of t)n.push(yield z(this,co,"f").call(this,s));else return[yield z(this,co,"f").call(this,t[0])];return n})),co.set(this,t=>ye(this,void 0,void 0,function*(){var n,s;_e(this,cr,!0);try{const i=yield z(this,io,"f").call(this,Object.assign(Object.assign({},t),{domain:(n=t==null?void 0:t.domain)!==null&&n!==void 0?n:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const o=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(s=i.accounts.find(c=>c.address==o))!==null&&s!==void 0?s:{address:o}),{publicKey:vr(o)}),signedMessage:vr(i.sign_in_result.signed_message),signature:vr(i.sign_in_result.signature)}}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}finally{_e(this,cr,!1)}})),_e(this,Gn,e.authorizationCache),_e(this,Ji,e.appIdentity),_e(this,fi,e.chains),_e(this,to,e.chainSelector),_e(this,no,e.onWalletNotFound),_e(this,Xi,{[Lt.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:z(this,ao,"f")}})}get version(){return z(this,qc,"f")}get name(){return z(this,Hc,"f")}get url(){return z(this,jc,"f")}get icon(){return z(this,Vc,"f")}get chains(){return z(this,fi,"f")}get features(){return Object.assign({[Ii.StandardConnect]:{version:"1.0.0",connect:z(this,Yc,"f")},[Ii.StandardDisconnect]:{version:"1.0.0",disconnect:z(this,so,"f")},[Ii.StandardEvents]:{version:"1.0.0",on:z(this,Gc,"f")},[Lt.SolanaSignMessage]:{version:"1.0.0",signMessage:z(this,el,"f")},[Lt.SolanaSignIn]:{version:"1.0.0",signIn:z(this,tl,"f")}},z(this,Xi,"f"))}get accounts(){var e,t;return(t=(e=z(this,Jt,"f"))===null||e===void 0?void 0:e.accounts)!==null&&t!==void 0?t:[]}get connected(){return!!z(this,Jt,"f")}get isAuthorized(){return!!z(this,Jt,"f")}get currentAuthorization(){return z(this,Jt,"f")}get cachedAuthorizationResult(){return z(this,Gn,"f").get()}}Dr=new WeakMap,qc=new WeakMap,Hc=new WeakMap,jc=new WeakMap,Vc=new WeakMap,Ji=new WeakMap,Jt=new WeakMap,Gn=new WeakMap,cr=new WeakMap,di=new WeakMap,fi=new WeakMap,to=new WeakMap,Xi=new WeakMap,no=new WeakMap,Gc=new WeakMap,Yc=new WeakMap,io=new WeakMap,hi=new WeakMap,Zc=new WeakMap,Qi=new WeakMap,so=new WeakMap,pi=new WeakMap,es=new WeakMap,oo=new WeakMap,Jc=new WeakMap,Xc=new WeakMap,ao=new WeakMap,Qc=new WeakMap,el=new WeakMap,tl=new WeakMap,co=new WeakMap,ui=new WeakSet,ro=function(e,...t){var n;(n=z(this,Dr,"f")[e])===null||n===void 0||n.forEach(s=>s.apply(null,t))},L0=function(e,t){var n;z(this,Dr,"f")[e]=(n=z(this,Dr,"f")[e])===null||n===void 0?void 0:n.filter(s=>t!==s)};class U0{constructor(e){gi.add(this),Fr.set(this,{}),nl.set(this,"1.0.0"),rl.set(this,yu),il.set(this,"https://solanamobile.com/wallets"),sl.set(this,M0),ts.set(this,void 0),Xt.set(this,void 0),lr.set(this,void 0),ur.set(this,!1),mi.set(this,0),yi.set(this,[]),lo.set(this,void 0),ns.set(this,void 0),uo.set(this,void 0),fo.set(this,void 0),En.set(this,void 0),ol.set(this,(t,n)=>{var s;return!((s=z(this,Fr,"f")[t])===null||s===void 0)&&s.push(n)||(z(this,Fr,"f")[t]=[n]),()=>z(this,gi,"m",P0).call(this,t,n)}),al.set(this,({silent:t}={})=>ye(this,void 0,void 0,function*(){if(z(this,ur,"f")||this.connected)return{accounts:this.accounts};_e(this,ur,!0);try{yield z(this,po,"f").call(this)}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}finally{_e(this,ur,!1)}return{accounts:this.accounts}})),po.set(this,t=>ye(this,void 0,void 0,function*(){try{const n=yield z(this,lr,"f").get();if(n)return z(this,rs,"f").call(this,n),n;z(this,En,"f")&&_e(this,En,void 0,"f");const s=yield z(this,lo,"f").select(z(this,yi,"f"));return yield z(this,wi,"f").call(this,i=>ye(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([i.getCapabilities(),i.authorize({chain:s,identity:z(this,ts,"f"),sign_in_payload:t})]),c=z(this,mo,"f").call(this,a.accounts),p=Object.assign(Object.assign({},a),{accounts:c,chain:s});return Promise.all([z(this,cl,"f").call(this,o),z(this,lr,"f").set(p),z(this,rs,"f").call(this,p)]),p}))}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}})),rs.set(this,t=>ye(this,void 0,void 0,function*(){var n;const s=z(this,Xt,"f")==null||((n=z(this,Xt,"f"))===null||n===void 0?void 0:n.accounts.length)!==t.accounts.length||z(this,Xt,"f").accounts.some((i,o)=>i.address!==t.accounts[o].address);_e(this,Xt,t),s&&z(this,gi,"m",ho).call(this,"change",{accounts:this.accounts})})),cl.set(this,t=>ye(this,void 0,void 0,function*(){const n=t.features.includes("solana:signTransactions"),s=t.supports_sign_and_send_transactions||t.features.includes("solana:signAndSendTransaction"),i=Lt.SolanaSignAndSendTransaction in this.features!==s||Lt.SolanaSignTransaction in this.features!==n;_e(this,ns,Object.assign(Object.assign({},s&&{[Lt.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:t.supported_transaction_versions,signAndSendTransaction:z(this,yo,"f")}}),n&&{[Lt.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:t.supported_transaction_versions,signTransaction:z(this,dl,"f")}})),i&&z(this,gi,"m",ho).call(this,"change",{features:this.features})})),is.set(this,(t,n,s)=>ye(this,void 0,void 0,function*(){try{const i=yield t.authorize({auth_token:n,identity:z(this,ts,"f")}),o=z(this,mo,"f").call(this,i.accounts),a=Object.assign(Object.assign({},i),{accounts:o,chain:s});Promise.all([z(this,lr,"f").set(a),z(this,rs,"f").call(this,a)])}catch(i){throw z(this,go,"f").call(this),new Error(i instanceof Error&&i.message||"Unknown error")}})),go.set(this,()=>ye(this,void 0,void 0,function*(){var t,n;(t=z(this,En,"f"))===null||t===void 0||t.close(),z(this,lr,"f").clear(),_e(this,ur,!1),_e(this,mi,(n=z(this,mi,"f"),n++,n)),_e(this,Xt,void 0),_e(this,En,void 0),z(this,gi,"m",ho).call(this,"change",{accounts:this.accounts})})),wi.set(this,t=>ye(this,void 0,void 0,function*(){var n;const s=(n=z(this,Xt,"f"))===null||n===void 0?void 0:n.wallet_uri_base,o=Object.assign(Object.assign({},s?{baseUri:s}:void 0),{remoteHostAuthority:z(this,fo,"f")}),a=z(this,mi,"f"),c=new _S;if(z(this,En,"f"))return t(z(this,En,"f").wallet);try{const{associationUrl:p,close:g,wallet:w}=yield A0.startRemoteScenario(o),B=c.addEventListener("close",m=>{m&&g()});return c.initWithQR(p.toString()),c.open(),_e(this,En,{close:g,wallet:yield w},"f"),B(),c.close(),yield t(z(this,En,"f").wallet)}catch(p){throw c.close(),z(this,mi,"f")!==a&&(yield new Promise(()=>{})),p instanceof Error&&p.name==="SolanaMobileWalletAdapterError"&&p.code==="ERROR_WALLET_NOT_FOUND"&&(yield z(this,uo,"f").call(this,this)),p}})),ss.set(this,()=>{if(!z(this,Xt,"f"))throw new Error("Wallet not connected");return{authToken:z(this,Xt,"f").auth_token,chain:z(this,Xt,"f").chain}}),mo.set(this,t=>t.map(n=>{var s,i;const o=vr(n.address);return{address:qo.default.encode(o),publicKey:o,label:n.label,icon:n.icon,chains:(s=n.chains)!==null&&s!==void 0?s:z(this,yi,"f"),features:(i=n.features)!==null&&i!==void 0?i:O0}})),ll.set(this,t=>ye(this,void 0,void 0,function*(){const{authToken:n,chain:s}=z(this,ss,"f").call(this);try{return yield z(this,wi,"f").call(this,i=>ye(this,void 0,void 0,function*(){return yield z(this,is,"f").call(this,i,n,s),yield i.signTransactions({transactions:t})}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),ul.set(this,(t,n)=>ye(this,void 0,void 0,function*(){const{authToken:s,chain:i}=z(this,ss,"f").call(this);try{return yield z(this,wi,"f").call(this,o=>ye(this,void 0,void 0,function*(){const[a,c]=yield Promise.all([o.getCapabilities(),z(this,is,"f").call(this,o,s,i)]);if(a.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions(Object.assign(Object.assign({},n),{transactions:[t]})))[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),yo.set(this,(...t)=>ye(this,void 0,void 0,function*(){const n=[];for(const s of t){const i=_s.VersionedTransaction.deserialize(s.transaction),o=yield z(this,ul,"f").call(this,i,s.options);n.push({signature:qo.default.decode(o)})}return n})),dl.set(this,(...t)=>ye(this,void 0,void 0,function*(){const n=t.map(({transaction:i})=>_s.VersionedTransaction.deserialize(i));return(yield z(this,ll,"f").call(this,n)).map(i=>({signedTransaction:T0(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))})),fl.set(this,(...t)=>ye(this,void 0,void 0,function*(){const{authToken:n,chain:s}=z(this,ss,"f").call(this),i=t.map(({account:a})=>C0(a.publicKey)),o=t.map(({message:a})=>a);try{return yield z(this,wi,"f").call(this,a=>ye(this,void 0,void 0,function*(){return yield z(this,is,"f").call(this,a,n,s),(yield a.signMessages({addresses:i,payloads:o})).map(p=>({signedMessage:p,signature:p.slice(-N0)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),hl.set(this,(...t)=>ye(this,void 0,void 0,function*(){const n=[];if(t.length>1)for(const s of t)n.push(yield z(this,wo,"f").call(this,s));else return[yield z(this,wo,"f").call(this,t[0])];return n})),wo.set(this,t=>ye(this,void 0,void 0,function*(){var n,s;_e(this,ur,!0);try{const i=yield z(this,po,"f").call(this,Object.assign(Object.assign({},t),{domain:(n=t==null?void 0:t.domain)!==null&&n!==void 0?n:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const o=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(s=i.accounts.find(c=>c.address==o))!==null&&s!==void 0?s:{address:o}),{publicKey:vr(o)}),signedMessage:vr(i.sign_in_result.signed_message),signature:vr(i.sign_in_result.signature)}}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}finally{_e(this,ur,!1)}})),_e(this,lr,e.authorizationCache),_e(this,ts,e.appIdentity),_e(this,yi,e.chains),_e(this,lo,e.chainSelector),_e(this,fo,e.remoteHostAuthority),_e(this,uo,e.onWalletNotFound),_e(this,ns,{[Lt.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:z(this,yo,"f")}})}get version(){return z(this,nl,"f")}get name(){return z(this,rl,"f")}get url(){return z(this,il,"f")}get icon(){return z(this,sl,"f")}get chains(){return z(this,yi,"f")}get features(){return Object.assign({[Ii.StandardConnect]:{version:"1.0.0",connect:z(this,al,"f")},[Ii.StandardDisconnect]:{version:"1.0.0",disconnect:z(this,go,"f")},[Ii.StandardEvents]:{version:"1.0.0",on:z(this,ol,"f")},[Lt.SolanaSignMessage]:{version:"1.0.0",signMessage:z(this,fl,"f")},[Lt.SolanaSignIn]:{version:"1.0.0",signIn:z(this,hl,"f")}},z(this,ns,"f"))}get accounts(){var e,t;return(t=(e=z(this,Xt,"f"))===null||e===void 0?void 0:e.accounts)!==null&&t!==void 0?t:[]}get connected(){return!!z(this,En,"f")&&!!z(this,Xt,"f")}get isAuthorized(){return!!z(this,Xt,"f")}get currentAuthorization(){return z(this,Xt,"f")}get cachedAuthorizationResult(){return z(this,lr,"f").get()}}Fr=new WeakMap,nl=new WeakMap,rl=new WeakMap,il=new WeakMap,sl=new WeakMap,ts=new WeakMap,Xt=new WeakMap,lr=new WeakMap,ur=new WeakMap,mi=new WeakMap,yi=new WeakMap,lo=new WeakMap,ns=new WeakMap,uo=new WeakMap,fo=new WeakMap,En=new WeakMap,ol=new WeakMap,al=new WeakMap,po=new WeakMap,rs=new WeakMap,cl=new WeakMap,is=new WeakMap,go=new WeakMap,wi=new WeakMap,ss=new WeakMap,mo=new WeakMap,ll=new WeakMap,ul=new WeakMap,yo=new WeakMap,dl=new WeakMap,fl=new WeakMap,hl=new WeakMap,wo=new WeakMap,gi=new WeakSet,ho=function(e,...t){var n;(n=z(this,Fr,"f")[e])===null||n===void 0||n.forEach(s=>s.apply(null,t))},P0=function(e,t){var n;z(this,Fr,"f")[e]=(n=z(this,Fr,"f")[e])===null||n===void 0?void 0:n.filter(s=>t!==s)};var IS=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},xS=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},bo;function Ed(r){const e=({register:t})=>t(r);try{window.dispatchEvent(new BS(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}class BS extends Event{constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),bo.set(this,void 0),IS(this,bo,e,"f")}get detail(){return xS(this,bo,"f")}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}bo=new WeakMap;function RS(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}function MS(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function TS(r){RS()?Ed(new W0(r)):MS()&&r.remoteHostAuthority!==void 0&&Ed(new U0(Object.assign(Object.assign({},r),{remoteHostAuthority:r.remoteHostAuthority})))}const CS="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",LS="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class PS extends R0{constructor(){super(...arguments),this.contentStyles=OS,this.contentHtml=NS}initWithError(e){super.init(),this.populateError(e)}populateError(e){var t,n;const s=(t=this.dom)===null||t===void 0?void 0:t.getElementById("mobile-wallet-adapter-error-message"),i=(n=this.dom)===null||n===void 0?void 0:n.getElementById("mobile-wallet-adapter-error-action");if(s){if(e.name==="SolanaMobileWalletAdapterError")switch(e.code){case"ERROR_WALLET_NOT_FOUND":s.innerHTML=CS,i&&i.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":s.innerHTML=LS,i&&(i.style.display="none");return}s.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}const NS=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,OS=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function z0(){return ye(this,void 0,void 0,function*(){if(typeof window<"u"){const r=window.navigator.userAgent.toLowerCase(),e=new PS;r.includes("wv")?e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),e.open()}})}function WS(){return()=>ye(this,void 0,void 0,function*(){z0()})}const wc="SolanaMobileWalletAdapterDefaultAuthorizationCache";function US(){let r;try{r=window.localStorage}catch{}return{clear(){return ye(this,void 0,void 0,function*(){if(r)try{r.removeItem(wc)}catch{}})},get(){return ye(this,void 0,void 0,function*(){if(r)try{const e=JSON.parse(r.getItem(wc));if(e&&e.accounts){const t=e.accounts.map(n=>Object.assign(Object.assign({},n),{publicKey:"publicKey"in n?new Uint8Array(Object.values(n.publicKey)):new _s.PublicKey(n.address).toBytes()}));return Object.assign(Object.assign({},e),{accounts:t})}else return e||void 0}catch{}})},set(e){return ye(this,void 0,void 0,function*(){if(r)try{r.setItem(wc,JSON.stringify(e))}catch{}})}}}function zS(){return{select(r){return ye(this,void 0,void 0,function*(){return r.length===1?r[0]:r.includes(Sd.SOLANA_MAINNET_CHAIN)?Sd.SOLANA_MAINNET_CHAIN:r[0]})}}}Fn.LocalSolanaMobileWalletAdapterWallet=W0;Fn.RemoteSolanaMobileWalletAdapterWallet=U0;Fn.SolanaMobileWalletAdapterWalletName=yu;Fn.createDefaultAuthorizationCache=US;Fn.createDefaultChainSelector=zS;Fn.createDefaultWalletNotFoundHandler=WS;Fn.defaultErrorModalWalletNotFoundHandler=z0;Fn.registerMwa=TS;Object.defineProperty(kr,"__esModule",{value:!0});var Rt=pb,vo=Nh,Lr=Oh,zi=Fn;function Oe(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(w){o(w)}}function c(g){try{p(n.throw(g))}catch(w){o(w)}}function p(g){g.done?i(g.value):s(g.value).then(a,c)}p((n=n.apply(r,[])).next())})}function he(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function ln(r,e,t,n,s){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}const pl="standard:connect",DS="standard:disconnect",FS="standard:events";function bc(r){return window.btoa(String.fromCharCode.call(null,...r))}function KS(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var Mt,Je,pr,er,So,Zn,Br,gl,ml,D0,Ho,Eo,hr;const $S="Mobile Wallet Adapter",qS=64;function HS(r){return"version"in r}function wu(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return r}}class F0 extends Rt.BaseSignInMessageSignerWalletAdapter{constructor(e,t){super(),Mt.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),Je.set(this,void 0),pr.set(this,!1),er.set(this,KS()?Rt.WalletReadyState.Loadable:Rt.WalletReadyState.Unsupported),So.set(this,void 0),Zn.set(this,void 0),Br.set(this,void 0),gl.set(this,n=>Oe(this,void 0,void 0,function*(){if(n.accounts&&n.accounts.length>0){he(this,Mt,"m",D0).call(this);const s=yield he(this,So,"f").call(this,n.accounts);s!==he(this,Zn,"f")&&(ln(this,Zn,s),ln(this,Br,void 0),this.emit("connect",this.publicKey))}})),ln(this,So,n=>Oe(this,void 0,void 0,function*(){var s;const i=yield t.addressSelector.select(n.map(({publicKey:o})=>bc(o)));return(s=n.find(({publicKey:o})=>bc(o)===i))!==null&&s!==void 0?s:n[0]})),ln(this,Je,e),he(this,Je,"f").features[FS].on("change",he(this,gl,"f")),this.name=he(this,Je,"f").name,this.icon=he(this,Je,"f").icon,this.url=he(this,Je,"f").url}get publicKey(){var e;if(!he(this,Br,"f")&&he(this,Zn,"f"))try{ln(this,Br,new vo.PublicKey(he(this,Zn,"f").publicKey),"f")}catch(t){throw new Rt.WalletPublicKeyError(t instanceof Error&&(t==null?void 0:t.message)||"Unknown error",t)}return(e=he(this,Br,"f"))!==null&&e!==void 0?e:null}get connected(){return he(this,Je,"f").connected}get connecting(){return he(this,pr,"f")}get readyState(){return he(this,er,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return Oe(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return Oe(this,void 0,void 0,function*(){he(this,Mt,"m",ml).call(this,!0)})}connect(){return Oe(this,void 0,void 0,function*(){he(this,Mt,"m",ml).call(this)})}performAuthorization(e){return Oe(this,void 0,void 0,function*(){try{const t=yield he(this,Je,"f").cachedAuthorizationResult;return t?(yield he(this,Je,"f").features[pl].connect({silent:!0}),t):(e?yield he(this,Je,"f").features[Lr.SolanaSignIn].signIn(e):yield he(this,Je,"f").features[pl].connect(),yield yield he(this,Je,"f").cachedAuthorizationResult)}catch(t){throw new Rt.WalletConnectionError(t instanceof Error&&t.message||"Unknown error",t)}})}disconnect(){return Oe(this,void 0,void 0,function*(){return yield he(this,Mt,"m",hr).call(this,()=>Oe(this,void 0,void 0,function*(){ln(this,pr,!1),ln(this,Br,void 0),ln(this,Zn,void 0),yield he(this,Je,"f").features[DS].disconnect(),this.emit("disconnect")}))})}signIn(e){return Oe(this,void 0,void 0,function*(){return he(this,Mt,"m",hr).call(this,()=>Oe(this,void 0,void 0,function*(){var t;if(he(this,er,"f")!==Rt.WalletReadyState.Installed&&he(this,er,"f")!==Rt.WalletReadyState.Loadable)throw new Rt.WalletNotReadyError;ln(this,pr,!0);try{const n=yield he(this,Je,"f").features[Lr.SolanaSignIn].signIn(Object.assign(Object.assign({},e),{domain:(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:window.location.host}));if(n.length>0)return n[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(n){throw new Rt.WalletConnectionError(n instanceof Error&&n.message||"Unknown error",n)}finally{ln(this,pr,!1)}}))})}signMessage(e){return Oe(this,void 0,void 0,function*(){return yield he(this,Mt,"m",hr).call(this,()=>Oe(this,void 0,void 0,function*(){const t=he(this,Mt,"m",Ho).call(this);try{return(yield he(this,Je,"f").features[Lr.SolanaSignMessage].signMessage({account:t,message:e}))[0].signature}catch(n){throw new Rt.WalletSignMessageError(n==null?void 0:n.message,n)}}))})}sendTransaction(e,t,n){return Oe(this,void 0,void 0,function*(){return yield he(this,Mt,"m",hr).call(this,()=>Oe(this,void 0,void 0,function*(){const s=he(this,Mt,"m",Ho).call(this);try{let i=function(){let o;switch(t.commitment){case"confirmed":case"finalized":case"processed":o=t.commitment;break;default:o="finalized"}let a;switch(n==null?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":a=n.preflightCommitment;break;case void 0:a=o;break;default:a="finalized"}return(a==="finalized"?2:a==="confirmed"?1:0)<(o==="finalized"?2:o==="confirmed"?1:0)?a:o};if(Lr.SolanaSignAndSendTransaction in he(this,Je,"f").features){const o=wu(he(this,Je,"f").currentAuthorization.chain),[a]=(yield he(this,Je,"f").features[Lr.SolanaSignAndSendTransaction].signAndSendTransaction({account:s,transaction:e.serialize(),chain:o,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map(c=>bc(c.signature));return a}else{const[o]=yield he(this,Mt,"m",Eo).call(this,[e]);if(HS(o))return yield t.sendTransaction(o);{const a=o.serialize();return yield t.sendRawTransaction(a,Object.assign(Object.assign({},n),{preflightCommitment:i()}))}}}catch(i){throw new Rt.WalletSendTransactionError(i==null?void 0:i.message,i)}}))})}signTransaction(e){return Oe(this,void 0,void 0,function*(){return yield he(this,Mt,"m",hr).call(this,()=>Oe(this,void 0,void 0,function*(){const[t]=yield he(this,Mt,"m",Eo).call(this,[e]);return t}))})}signAllTransactions(e){return Oe(this,void 0,void 0,function*(){return yield he(this,Mt,"m",hr).call(this,()=>Oe(this,void 0,void 0,function*(){return yield he(this,Mt,"m",Eo).call(this,e)}))})}}Je=new WeakMap,pr=new WeakMap,er=new WeakMap,So=new WeakMap,Zn=new WeakMap,Br=new WeakMap,gl=new WeakMap,Mt=new WeakSet,ml=function(e=!1){return Oe(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield he(this,Mt,"m",hr).call(this,()=>Oe(this,void 0,void 0,function*(){if(he(this,er,"f")!==Rt.WalletReadyState.Installed&&he(this,er,"f")!==Rt.WalletReadyState.Loadable)throw new Rt.WalletNotReadyError;ln(this,pr,!0);try{yield he(this,Je,"f").features[pl].connect({silent:e})}catch(t){throw new Rt.WalletConnectionError(t instanceof Error&&t.message||"Unknown error",t)}finally{ln(this,pr,!1)}}))})},D0=function(){he(this,er,"f")!==Rt.WalletReadyState.Installed&&this.emit("readyStateChange",ln(this,er,Rt.WalletReadyState.Installed))},Ho=function(){if(!he(this,Je,"f").isAuthorized||!he(this,Zn,"f"))throw new Rt.WalletNotConnectedError;return he(this,Zn,"f")},Eo=function(e){return Oe(this,void 0,void 0,function*(){const t=he(this,Mt,"m",Ho).call(this);try{if(Lr.SolanaSignTransaction in he(this,Je,"f").features)return he(this,Je,"f").features[Lr.SolanaSignTransaction].signTransaction(...e.map(n=>({account:t,transaction:n.serialize()}))).then(n=>n.map(s=>{const i=s.signedTransaction,a=i[0]*qS+1;return vo.VersionedMessage.deserializeMessageVersion(i.slice(a,i.length))==="legacy"?vo.Transaction.from(i):vo.VersionedTransaction.deserialize(i)}));throw new Error("Connected wallet does not support signing transactions")}catch(n){throw new Rt.WalletSignTransactionError(n==null?void 0:n.message,n)}})},hr=function(e){return Oe(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})};class K0 extends F0{constructor(e){var t;const n=wu((t=e.chain)!==null&&t!==void 0?t:e.cluster);super(new zi.LocalSolanaMobileWalletAdapterWallet({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>Oe(this,void 0,void 0,function*(){const s=yield e.authorizationResultCache.get();return s&&"chain"in s?s:s?Object.assign(Object.assign({},s),{chain:n}):void 0}),clear:e.authorizationResultCache.clear},chains:[n],chainSelector:zi.createDefaultChainSelector(),onWalletNotFound:()=>Oe(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:n})}}class jS extends F0{constructor(e){const t=wu(e.chain);super(new zi.RemoteSolanaMobileWalletAdapterWallet({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>Oe(this,void 0,void 0,function*(){const n=yield e.authorizationResultCache.get();return n&&"chain"in n?n:n?Object.assign(Object.assign({},n),{chain:t}):void 0}),clear:e.authorizationResultCache.clear},chains:[t],chainSelector:zi.createDefaultChainSelector(),remoteHostAuthority:e.remoteHostAuthority,onWalletNotFound:()=>Oe(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:t})}}class VS extends K0{}function GS(){return{select(r){return Oe(this,void 0,void 0,function*(){return r[0]})}}}function YS(){return zi.createDefaultAuthorizationCache()}function ZS(r){return Oe(this,void 0,void 0,function*(){return zi.defaultErrorModalWalletNotFoundHandler()})}function JS(){return ZS}kr.LocalSolanaMobileWalletAdapter=K0;kr.RemoteSolanaMobileWalletAdapter=jS;var XS=kr.SolanaMobileWalletAdapter=VS,_o=kr.SolanaMobileWalletAdapterWalletName=$S,QS=kr.createDefaultAddressSelector=GS,eE=kr.createDefaultAuthorizationResultCache=YS,tE=kr.createDefaultWalletNotFoundHandler=JS;function nE(r,e){if(r===e)return!0;const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}var ue=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},It=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},Ut,nn,Kr,$r,Rr,os,jo,Me,Vo,yl,Ao,wl,hs,bl,_d,Ad,kd,Id;class rE extends au{get name(){return ue(this,Me,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return ue(this,Me,"f").icon}get readyState(){return ue(this,Vo,"f")}get publicKey(){return ue(this,Kr,"f")}get connecting(){return ue(this,$r,"f")}get supportedTransactionVersions(){return ue(this,jo,"f")}get wallet(){return ue(this,Me,"f")}get standard(){return!0}constructor({wallet:e}){super(),Ut.add(this),nn.set(this,void 0),Kr.set(this,void 0),$r.set(this,void 0),Rr.set(this,void 0),os.set(this,void 0),jo.set(this,void 0),Me.set(this,void 0),Vo.set(this,typeof window>"u"||typeof document>"u"?Gt.Unsupported:Gt.Installed),bl.set(this,t=>{if("accounts"in t){const n=ue(this,Me,"f").accounts[0];ue(this,nn,"f")&&!ue(this,Rr,"f")&&n!==ue(this,nn,"f")&&(n?ue(this,Ut,"m",Ao).call(this,n):(this.emit("error",new Ih),ue(this,Ut,"m",wl).call(this)))}"features"in t&&ue(this,Ut,"m",hs).call(this)}),It(this,Me,e,"f"),It(this,nn,null,"f"),It(this,Kr,null,"f"),It(this,$r,!1,"f"),It(this,Rr,!1,"f"),It(this,os,ue(this,Me,"f").features[ga].on("change",ue(this,bl,"f")),"f"),ue(this,Ut,"m",hs).call(this)}destroy(){It(this,nn,null,"f"),It(this,Kr,null,"f"),It(this,$r,!1,"f"),It(this,Rr,!1,"f");const e=ue(this,os,"f");e&&(It(this,os,null,"f"),e())}async autoConnect(){return ue(this,Ut,"m",yl).call(this,{silent:!0})}async connect(){return ue(this,Ut,"m",yl).call(this)}async disconnect(){if(Uo in ue(this,Me,"f").features)try{It(this,Rr,!0,"f"),await ue(this,Me,"f").features[Uo].disconnect()}catch(e){this.emit("error",new xh(e==null?void 0:e.message,e))}finally{It(this,Rr,!1,"f")}ue(this,Ut,"m",wl).call(this)}async sendTransaction(e,t,n={}){try{const s=ue(this,nn,"f");if(!s)throw new Nn;let i;if(Qn in ue(this,Me,"f").features)if(s.features.includes(Qn))i=Qn;else if(Ct in ue(this,Me,"f").features&&s.features.includes(Ct))i=Ct;else throw new Wr;else if(Ct in ue(this,Me,"f").features){if(!s.features.includes(Ct))throw new Wr;i=Ct}else throw new vi;const o=Si.getChainForEndpoint(t.rpcEndpoint);if(!s.chains.includes(o))throw new Ur;try{const{signers:a,...c}=n;let p;if(wr(e)?(a!=null&&a.length&&e.sign(a),p=e.serialize()):(e=await this.prepareTransaction(e,t,c),a!=null&&a.length&&e.partialSign(...a),p=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===Qn){const[g]=await ue(this,Me,"f").features[Qn].signAndSendTransaction({account:s,chain:o,transaction:p,options:{preflightCommitment:Si.getCommitment(c.preflightCommitment||t.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return X0.encode(g.signature)}else{const[g]=await ue(this,Me,"f").features[Ct].signTransaction({account:s,chain:o,transaction:p,options:{preflightCommitment:Si.getCommitment(c.preflightCommitment||t.commitment),minContextSlot:c.minContextSlot}});return await t.sendRawTransaction(g.signedTransaction,{...c,preflightCommitment:Si.getCommitment(c.preflightCommitment||t.commitment)})}}catch(a){throw a instanceof at?a:new Ur(a==null?void 0:a.message,a)}}catch(s){throw this.emit("error",s),s}}}nn=new WeakMap,Kr=new WeakMap,$r=new WeakMap,Rr=new WeakMap,os=new WeakMap,jo=new WeakMap,Me=new WeakMap,Vo=new WeakMap,bl=new WeakMap,Ut=new WeakSet,yl=async function(e){try{if(this.connected||this.connecting)return;if(ue(this,Vo,"f")!==Gt.Installed)throw new Wo;if(It(this,$r,!0,"f"),!ue(this,Me,"f").accounts.length)try{await ue(this,Me,"f").features[pa].connect(e)}catch(n){throw new kh(n==null?void 0:n.message,n)}const t=ue(this,Me,"f").accounts[0];if(!t)throw new Wr;ue(this,Ut,"m",Ao).call(this,t)}catch(t){throw this.emit("error",t),t}finally{It(this,$r,!1,"f")}},Ao=function(e){let t;try{t=new Q(e.address)}catch(n){throw new Bh(n==null?void 0:n.message,n)}It(this,nn,e,"f"),It(this,Kr,t,"f"),ue(this,Ut,"m",hs).call(this),this.emit("connect",t)},wl=function(){It(this,nn,null,"f"),It(this,Kr,null,"f"),ue(this,Ut,"m",hs).call(this),this.emit("disconnect")},hs=function(){var t,n;const e=Qn in ue(this,Me,"f").features?ue(this,Me,"f").features[Qn].supportedTransactionVersions:ue(this,Me,"f").features[Ct].supportedTransactionVersions;It(this,jo,nE(e,["legacy"])?null:new Set(e),"f"),Ct in ue(this,Me,"f").features&&((t=ue(this,nn,"f"))!=null&&t.features.includes(Ct))?(this.signTransaction=ue(this,Ut,"m",_d),this.signAllTransactions=ue(this,Ut,"m",Ad)):(delete this.signTransaction,delete this.signAllTransactions),ci in ue(this,Me,"f").features&&((n=ue(this,nn,"f"))!=null&&n.features.includes(ci))?this.signMessage=ue(this,Ut,"m",kd):delete this.signMessage,Js in ue(this,Me,"f").features?this.signIn=ue(this,Ut,"m",Id):delete this.signIn},_d=async function(e){try{const t=ue(this,nn,"f");if(!t)throw new Nn;if(!(Ct in ue(this,Me,"f").features))throw new vi;if(!t.features.includes(Ct))throw new Wr;try{const s=(await ue(this,Me,"f").features[Ct].signTransaction({account:t,transaction:wr(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return wr(e)?Ci.deserialize(s):xe.from(s)}catch(n){throw n instanceof at?n:new zr(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},Ad=async function(e){try{const t=ue(this,nn,"f");if(!t)throw new Nn;if(!(Ct in ue(this,Me,"f").features))throw new vi;if(!t.features.includes(Ct))throw new Wr;try{const n=await ue(this,Me,"f").features[Ct].signTransaction(...e.map(s=>({account:t,transaction:wr(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((s,i)=>{const o=n[i].signedTransaction;return wr(s)?Ci.deserialize(o):xe.from(o)})}catch(n){throw new zr(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},kd=async function(e){try{const t=ue(this,nn,"f");if(!t)throw new Nn;if(!(ci in ue(this,Me,"f").features))throw new vi;if(!t.features.includes(ci))throw new Wr;try{return(await ue(this,Me,"f").features[ci].signMessage({account:t,message:e}))[0].signature}catch(n){throw new Rh(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},Id=async function(e={}){try{if(!(Js in ue(this,Me,"f").features))throw new vi;let t;try{[t]=await ue(this,Me,"f").features[Js].signIn(e)}catch(n){throw new Nc(n==null?void 0:n.message,n)}if(!t)throw new Nc;return ue(this,Ut,"m",Ao).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const iE=Ch;var sE=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},oE=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},ko;let un;const Ea=new Set;function aE(r){ps=void 0,Ea.add(r)}function cE(r){ps=void 0,Ea.delete(r)}const Ei={};function lE(){if(un||(un=Object.freeze({register:xd,get:uE,on:dE}),typeof window>"u"))return un;const r=Object.freeze({register:xd});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(r))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new fE(r))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return un}function xd(...r){var e;return r=r.filter(t=>!Ea.has(t)),r.length?(r.forEach(t=>aE(t)),(e=Ei.register)==null||e.forEach(t=>vl(()=>t(...r))),function(){var n;r.forEach(s=>cE(s)),(n=Ei.unregister)==null||n.forEach(s=>vl(()=>s(...r)))}):()=>{}}let ps;function uE(){return ps||(ps=[...Ea]),ps}function dE(r,e){var t;return(t=Ei[r])!=null&&t.push(e)||(Ei[r]=[e]),function(){var s;Ei[r]=(s=Ei[r])==null?void 0:s.filter(i=>e!==i)}}function vl(r){try{r()}catch(e){console.error(e)}}class fE extends Event{get detail(){return sE(this,ko,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),ko.set(this,void 0),oE(this,ko,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}ko=new WeakMap;function hE(){if(un||(un=lE(),typeof window>"u"))return un;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),un;const{register:e}=un,t=(...n)=>n.forEach(s=>vl(()=>s({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),un}return t(...r),un}function pE(r){const e=Bd(()=>new Set),{get:t,on:n}=Bd(()=>hE()),[s,i]=re.useState(()=>Rd(t()));re.useEffect(()=>{const a=[n("register",(...c)=>i(p=>[...p,...Rd(c)])),n("unregister",(...c)=>i(p=>p.filter(g=>c.some(w=>w===g.wallet))))];return()=>a.forEach(c=>c())},[n]);const o=gE(s);return re.useEffect(()=>{if(!o)return;const a=new Set(s);new Set(o.filter(p=>!a.has(p))).forEach(p=>p.destroy())},[o,s]),re.useEffect(()=>()=>s.forEach(a=>a.destroy()),[]),re.useMemo(()=>[...s,...r.filter(({name:a})=>s.some(c=>c.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[s,r,e])}function Bd(r){const e=re.useRef(void 0);return e.current===void 0&&(e.current={value:r()}),e.current.value}function gE(r){const e=re.useRef(void 0);return re.useEffect(()=>{e.current=r}),e.current}function Rd(r){return r.filter(iE).map(e=>new rE({wallet:e}))}var xi;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(xi||(xi={}));function mE(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function yE({adapters:r,userAgentString:e}){return r.some(t=>t.name!==_o&&t.readyState===Gt.Installed)?xi.DESKTOP_WEB:e&&/android/i.test(e)&&!mE(e)?xi.MOBILE_WEB:xi.DESKTOP_WEB}function wE(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function bE({children:r,wallets:e,adapter:t,isUnloadingRef:n,onAutoConnectRequest:s,onConnectError:i,onError:o,onSelectWallet:a}){const c=re.useRef(!1),[p,g]=re.useState(!1),w=re.useRef(!1),[B,m]=re.useState(!1),[I,k]=re.useState(()=>(t==null?void 0:t.publicKey)??null),[E,M]=re.useState(()=>(t==null?void 0:t.connected)??!1),C=re.useRef(o);re.useEffect(()=>(C.current=o,()=>{C.current=void 0}),[o]);const T=re.useRef((h,y)=>(n.current||(C.current?C.current(h,y):(console.error(h,y),h instanceof Wo&&typeof window<"u"&&y&&window.open(y.url,"_blank"))),h)),[N,P]=re.useState(()=>e.map(h=>({adapter:h,readyState:h.readyState})).filter(({readyState:h})=>h!==Gt.Unsupported));re.useEffect(()=>{P(y=>e.map((S,A)=>{const L=y[A];return L&&L.adapter===S&&L.readyState===S.readyState?L:{adapter:S,readyState:S.readyState}}).filter(({readyState:S})=>S!==Gt.Unsupported));function h(y){P(S=>{const A=S.findIndex(({adapter:O})=>O===this);if(A===-1)return S;const{adapter:L}=S[A];return[...S.slice(0,A),{adapter:L,readyState:y},...S.slice(A+1)].filter(({readyState:O})=>O!==Gt.Unsupported)})}return e.forEach(y=>y.on("readyStateChange",h,y)),()=>{e.forEach(y=>y.off("readyStateChange",h,y))}},[t,e]);const D=re.useMemo(()=>N.find(h=>h.adapter===t)??null,[t,N]);re.useEffect(()=>{if(!t)return;const h=A=>{k(A),c.current=!1,g(!1),M(!0),w.current=!1,m(!1)},y=()=>{n.current||(k(null),c.current=!1,g(!1),M(!1),w.current=!1,m(!1))},S=A=>{T.current(A,t)};return t.on("connect",h),t.on("disconnect",y),t.on("error",S),()=>{t.off("connect",h),t.off("disconnect",y),t.off("error",S),y()}},[t,n]);const F=re.useRef(!1);re.useEffect(()=>()=>{F.current=!1},[t]),re.useEffect(()=>{F.current||c.current||E||!s||!((D==null?void 0:D.readyState)===Gt.Installed||(D==null?void 0:D.readyState)===Gt.Loadable)||(c.current=!0,g(!0),F.current=!0,async function(){try{await s()}catch{i()}finally{g(!1),c.current=!1}}())},[E,s,i,D]);const Y=re.useCallback(async(h,y,S)=>{if(!t)throw T.current(new pd);if(!E)throw T.current(new Nn,t);return await t.sendTransaction(h,y,S)},[t,E]),W=re.useMemo(()=>t&&"signTransaction"in t?async h=>{if(!E)throw T.current(new Nn,t);return await t.signTransaction(h)}:void 0,[t,E]),j=re.useMemo(()=>t&&"signAllTransactions"in t?async h=>{if(!E)throw T.current(new Nn,t);return await t.signAllTransactions(h)}:void 0,[t,E]),q=re.useMemo(()=>t&&"signMessage"in t?async h=>{if(!E)throw T.current(new Nn,t);return await t.signMessage(h)}:void 0,[t,E]),G=re.useMemo(()=>t&&"signIn"in t?async h=>await t.signIn(h):void 0,[t]),v=re.useCallback(async()=>{if(c.current||w.current||D!=null&&D.adapter.connected)return;if(!D)throw T.current(new pd);const{adapter:h,readyState:y}=D;if(!(y===Gt.Installed||y===Gt.Loadable))throw T.current(new Wo,h);c.current=!0,g(!0);try{await h.connect()}catch(S){throw i(),S}finally{g(!1),c.current=!1}},[i,D]),l=re.useCallback(async()=>{if(!w.current&&t){w.current=!0,m(!0);try{await t.disconnect()}finally{m(!1),w.current=!1}}},[t]);return J.createElement(Lh.Provider,{value:{autoConnect:!!s,wallets:N,wallet:D,publicKey:I,connected:E,connecting:p,disconnecting:B,select:a,connect:v,disconnect:l,sendTransaction:Y,signTransaction:W,signAllTransactions:j,signMessage:q,signIn:G}},r)}let vc;function vE(){var r;return vc===void 0&&(vc=((r=globalThis.navigator)==null?void 0:r.userAgent)??null),vc}function Md(r){const e=vE();return yE({adapters:r,userAgentString:e})===xi.MOBILE_WEB}function SE(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function NE({children:r,wallets:e,autoConnect:t,localStorageKey:n="walletName",onError:s}){const{connection:i}=Z1(),o=pE(e),a=re.useMemo(()=>{if(!Md(o))return null;const C=o.find(T=>T.name===_o);return C||new XS({addressSelector:QS(),appIdentity:{uri:SE()},authorizationResultCache:eE(),cluster:wE(i==null?void 0:i.rpcEndpoint),onWalletNotFound:tE()})},[o,i==null?void 0:i.rpcEndpoint]),c=re.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[p,g]=hb(n,null),w=re.useMemo(()=>c.find(C=>C.name===p)??null,[c,p]),B=re.useCallback(C=>{p!==C&&(w&&w.name!==_o&&w.disconnect(),g(C))},[w,g,p]);re.useEffect(()=>{if(!w)return;function C(){k.current||g(null)}return w.on("disconnect",C),()=>{w.off("disconnect",C)}},[w,o,g,p]);const m=re.useRef(!1),I=re.useMemo(()=>{if(!(!t||!w))return async()=>{(t===!0||await t(w))&&(m.current?await w.connect():await w.autoConnect())}},[t,w]),k=re.useRef(!1);re.useEffect(()=>{if(p===_o&&Md(o)){k.current=!1;return}function C(){k.current=!0}return window.addEventListener("beforeunload",C),()=>{window.removeEventListener("beforeunload",C)}},[o,p]);const E=re.useCallback(()=>{w&&B(null)},[w,B]),M=re.useCallback(C=>{m.current=!0,B(C)},[B]);return J.createElement(bE,{wallets:c,adapter:w,isUnloadingRef:k,onAutoConnectRequest:I,onConnectError:E,onError:s,onSelectWallet:M},r)}const $0={setVisible(r){console.error(q0("call","setVisible"))},visible:!1};Object.defineProperty($0,"visible",{get(){return console.error(q0("read","visible")),!1}});function q0(r,e){return`You have tried to  ${r} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const H0=re.createContext($0);function j0(){return re.useContext(H0)}function EE({onSelectWallet:r}){const{connect:e,connected:t,connecting:n,disconnect:s,disconnecting:i,publicKey:o,select:a,wallet:c,wallets:p}=Ph();let g;n?g="connecting":t?g="connected":i?g="disconnecting":c?g="has-wallet":g="no-wallet";const w=re.useCallback(()=>{e().catch(()=>{})},[e]),B=re.useCallback(()=>{s().catch(()=>{})},[s]),m=re.useCallback(()=>{r({onSelectWallet:a,wallets:p})},[r,a,p]);return{buttonState:g,onConnect:g==="has-wallet"?w:void 0,onDisconnect:g!=="disconnecting"&&g!=="no-wallet"?B:void 0,onSelectWallet:m,publicKey:o??void 0,walletIcon:c==null?void 0:c.adapter.icon,walletName:c==null?void 0:c.adapter.name}}const V0=r=>J.createElement("button",{className:`wallet-adapter-button ${r.className||""}`,disabled:r.disabled,style:r.style,onClick:r.onClick,tabIndex:r.tabIndex||0,type:"button"},r.startIcon&&J.createElement("i",{className:"wallet-adapter-button-start-icon"},r.startIcon),r.children,r.endIcon&&J.createElement("i",{className:"wallet-adapter-button-end-icon"},r.endIcon)),G0=({wallet:r,...e})=>r&&J.createElement("img",{src:r.adapter.icon,alt:`${r.adapter.name} icon`,...e});function _E({walletIcon:r,walletName:e,...t}){return J.createElement(V0,{...t,className:"wallet-adapter-button-trigger",startIcon:r&&e?J.createElement(G0,{wallet:{adapter:{icon:r,name:e}}}):void 0})}function AE({children:r,labels:e,...t}){const{setVisible:n}=j0(),{buttonState:s,onConnect:i,onDisconnect:o,publicKey:a,walletIcon:c,walletName:p}=EE({onSelectWallet(){n(!0)}}),[g,w]=re.useState(!1),[B,m]=re.useState(!1),I=re.useRef(null);re.useEffect(()=>{const E=M=>{const C=I.current;!C||C.contains(M.target)||m(!1)};return document.addEventListener("mousedown",E),document.addEventListener("touchstart",E),()=>{document.removeEventListener("mousedown",E),document.removeEventListener("touchstart",E)}},[]);const k=re.useMemo(()=>{if(r)return r;if(a){const E=a.toBase58();return E.slice(0,4)+".."+E.slice(-4)}else return s==="connecting"||s==="has-wallet"?e[s]:e["no-wallet"]},[s,r,e,a]);return J.createElement("div",{className:"wallet-adapter-dropdown"},J.createElement(_E,{...t,"aria-expanded":B,style:{pointerEvents:B?"none":"auto",...t.style},onClick:()=>{switch(s){case"no-wallet":n(!0);break;case"has-wallet":i&&i();break;case"connected":m(!0);break}},walletIcon:c,walletName:p},k),J.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${B&&"wallet-adapter-dropdown-list-active"}`,ref:I,role:"menu"},a?J.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(a.toBase58()),w(!0),setTimeout(()=>w(!1),400)},role:"menuitem"},g?e.copied:e["copy-address"]):null,J.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{n(!0),m(!1)},role:"menuitem"},e["change-wallet"]),o?J.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),m(!1)},role:"menuitem"},e.disconnect):null))}const Td=({id:r,children:e,expanded:t=!1})=>{const n=re.useRef(null),s=re.useRef(!0),i="height 250ms ease-out",o=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.scrollHeight+"px"})},a=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.offsetHeight+"px",c.style.overflow="hidden",requestAnimationFrame(()=>{c.style.height="0"})})};return re.useLayoutEffect(()=>{t?o():a()},[t]),re.useLayoutEffect(()=>{const c=n.current;if(!c)return;function p(){c&&(c.style.overflow=t?"initial":"hidden",t&&(c.style.height="auto"))}function g(w){c&&w.target===c&&w.propertyName==="height"&&p()}return s.current&&(p(),s.current=!1),c.addEventListener("transitionend",g),()=>c.removeEventListener("transitionend",g)},[t]),J.createElement("div",{className:"wallet-adapter-collapse",id:r,ref:n,role:"region",style:{height:0,transition:s.current?void 0:i}},e)},Sc=({handleClick:r,tabIndex:e,wallet:t})=>J.createElement("li",null,J.createElement(V0,{onClick:r,startIcon:J.createElement(G0,{wallet:t}),tabIndex:e},t.adapter.name,t.readyState===Gt.Installed&&J.createElement("span",null,"Detected"))),kE=()=>J.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),J.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),J.createElement("g",{clipPath:"url(#clip0_880_5115)"},J.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),J.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),J.createElement("defs",null,J.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},J.createElement("stop",{stopColor:"#9945FF"}),J.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),J.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),J.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),J.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),J.createElement("stop",{offset:"1",stopColor:"#00D18C"})),J.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},J.createElement("stop",{stopColor:"#9945FF"}),J.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),J.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),J.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),J.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),J.createElement("stop",{offset:"1",stopColor:"#00D18C"})),J.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},J.createElement("stop",{stopColor:"#9945FF"}),J.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),J.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),J.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),J.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),J.createElement("stop",{offset:"1",stopColor:"#00D18C"})),J.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},J.createElement("stop",{stopColor:"#9945FF"}),J.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),J.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),J.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),J.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),J.createElement("stop",{offset:"1",stopColor:"#00D18C"})),J.createElement("clipPath",{id:"clip0_880_5115"},J.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),IE=({className:r="",container:e="body"})=>{const t=re.useRef(null),{wallets:n,select:s}=Ph(),{setVisible:i}=j0(),[o,a]=re.useState(!1),[c,p]=re.useState(!1),[g,w]=re.useState(null),[B,m]=re.useMemo(()=>{const T=[],N=[];for(const P of n)P.readyState===Gt.Installed?T.push(P):N.push(P);return T.length?[T,N]:[N,[]]},[n]),I=re.useCallback(()=>{p(!1),setTimeout(()=>i(!1),150)},[i]),k=re.useCallback(T=>{T.preventDefault(),I()},[I]),E=re.useCallback((T,N)=>{s(N),k(T)},[s,k]),M=re.useCallback(()=>a(!o),[o]),C=re.useCallback(T=>{const N=t.current;if(!N)return;const P=N.querySelectorAll("button"),D=P[0],F=P[P.length-1];T.shiftKey?document.activeElement===D&&(F.focus(),T.preventDefault()):document.activeElement===F&&(D.focus(),T.preventDefault())},[t]);return re.useLayoutEffect(()=>{const T=P=>{P.key==="Escape"?I():P.key==="Tab"&&C(P)},{overflow:N}=window.getComputedStyle(document.body);return setTimeout(()=>p(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",T,!1),()=>{document.body.style.overflow=N,window.removeEventListener("keydown",T,!1)}},[I,C]),re.useLayoutEffect(()=>w(document.querySelector(e)),[e]),g&&J0.createPortal(J.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${c&&"wallet-adapter-modal-fade-in"} ${r}`,ref:t,role:"dialog"},J.createElement("div",{className:"wallet-adapter-modal-container"},J.createElement("div",{className:"wallet-adapter-modal-wrapper"},J.createElement("button",{onClick:k,className:"wallet-adapter-modal-button-close"},J.createElement("svg",{width:"14",height:"14"},J.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),B.length?J.createElement(J.Fragment,null,J.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),J.createElement("ul",{className:"wallet-adapter-modal-list"},B.map(T=>J.createElement(Sc,{key:T.adapter.name,handleClick:N=>E(N,T.adapter.name),wallet:T})),m.length?J.createElement(Td,{expanded:o,id:"wallet-adapter-modal-collapse"},m.map(T=>J.createElement(Sc,{key:T.adapter.name,handleClick:N=>E(N,T.adapter.name),tabIndex:o?0:-1,wallet:T}))):null),m.length?J.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:M,tabIndex:0},J.createElement("span",null,o?"Less ":"More ","options"),J.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},J.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):J.createElement(J.Fragment,null,J.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),J.createElement("div",{className:"wallet-adapter-modal-middle"},J.createElement(kE,null)),m.length?J.createElement(J.Fragment,null,J.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:M,tabIndex:0},J.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),J.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},J.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),J.createElement(Td,{expanded:o,id:"wallet-adapter-modal-collapse"},J.createElement("ul",{className:"wallet-adapter-modal-list"},m.map(T=>J.createElement(Sc,{key:T.adapter.name,handleClick:N=>E(N,T.adapter.name),tabIndex:o?0:-1,wallet:T}))))):null))),J.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:k})),g)},OE=({children:r,...e})=>{const[t,n]=re.useState(!1);return J.createElement(H0.Provider,{value:{visible:t,setVisible:n}},r,t&&J.createElement(IE,{...e}))},xE={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function WE(r){return J.createElement(AE,{...r,labels:xE})}export{PE as C,Oc as W,NE as a,OE as b,j1 as c,j0 as d,WE as e,Ph as u};
